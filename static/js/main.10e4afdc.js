/*! For license information please see main.10e4afdc.js.LICENSE.txt */
(()=>{"use strict";var e={205:(e,t,n)=>{e.exports=n(524)},452:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(772)},524:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(s,t,i,"",function(e){return e})):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},713:(e,t,n)=>{e.exports=n(723)},723:(e,t,n)=>{var r=n(205),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},763:(e,t,n)=>{n.d(t,{DY:()=>h,Jd:()=>c,Lx:()=>d,RY:()=>f,WL:()=>l,iC:()=>a,od:()=>u,un:()=>p,zy:()=>s});var r=n(957);const i="http://localhost:5000/api";async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(){try{return localStorage.getItem("communityLibraryJwt")}catch(e){return null}}(),o="".concat(i).concat(e);console.log("[apiFetch] ->",o,t.method||"GET");const s=await fetch(o,(0,r.A)({headers:(0,r.A)((0,r.A)({"Content-Type":"application/json"},n?{Authorization:"Bearer ".concat(n)}:{}),t.headers||{})},t));if(!s.ok){let e="API ".concat(s.status);try{e=(await s.json()).error||e}catch(a){}throw console.warn("[apiFetch] error",o,s.status,e),new Error(e)}return console.log("[apiFetch] success",o,s.status),s.json()}async function s(){var e;return(null===(e=(await o("/books")).data)||void 0===e?void 0:e.items)||[]}async function a(e){return(await o("/books",{method:"POST",body:JSON.stringify(e)})).data.book}async function l(e){let{bookId:t,startDate:n,endDate:r}=e;return(await o("/requests",{method:"POST",body:JSON.stringify({bookId:t,startDate:n,endDate:r})})).data.request}async function c(e){return(await o("/requests/".concat(e,"/approve"),{method:"POST"})).data.request}async function u(e){return(await o("/requests/".concat(e,"/return"),{method:"POST"})).data.request}async function d(e,t){return(await o("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})).data}async function h(e){return(await o("/auth/register",{method:"POST",body:JSON.stringify(e)})).data}async function f(e){return(await o("/auth/verify-otp",{method:"POST",body:JSON.stringify(e)})).data}async function p(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString();return(await o("/users".concat(e?"?"+e:""))).data.items}"undefined"!==typeof window&&(window.__COMLIB_API_BASE=i,"localhost"!==window.location.hostname&&/localhost/.test(i)&&console.warn("[ComLib] Frontend is deployed but API_BASE still points to localhost. Backend calls will fail until you deploy the API and rebuild with REACT_APP_API_URL."))},772:(e,t,n)=>{var r=n(205),i=n(963);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(hi){var r=hi}Reflect.construct(e,[],t)}else{try{t.call()}catch(hi){r=hi}e.call(t.prototype)}else{try{throw Error()}catch(hi){r=hi}e()}}catch(hi){if(hi&&r&&"string"===typeof hi.stack){for(var i=hi.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case _:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Il){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ee=null;function _e(e){if(e=ki(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=Ei(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Se||null!==Ee)&&(Ae(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function je(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,ze={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,i,o,s,a,l){Le=!1,Me=null,je.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(o(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,Et,_t,Ct=!1,Tt=[],It=null,At=null,Rt=null,Nt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=wi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void _t(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){Ct=!1,null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),Nt.forEach(Ut),Dt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==At&&Bt(At,e),null!==Rt&&Bt(Rt,e),Nt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Ht=w.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function Kt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function Gt(e,t,n,r){if(qt){var i=Xt(e,t,n,r);if(null===i)qr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Lt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,Lt(Dt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=ki(i);if(null!==o&&xt(o),null===(o=Xt(e,t,n,r))&&qr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=wi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(M({},fn,{dataTransfer:0})),mn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return En}var Cn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Cn),In=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Nn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Ln=u&&"TextEvent"in window&&!jn,Mn=u&&(!On||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Xn(e){if(G(Si(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Yn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Wn(t,Gn,e,xe(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function or(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function _r(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=_r("animationend"),Tr=_r("animationiteration"),Ir=_r("animationstart"),Ar=_r("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Or=Nr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Ir,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,s.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=wi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ne(function(){var r=o,i=xe(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case Ir:l=yn;break;case Ar:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=De(p,h))&&u.push(Wr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[mi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Si(l),f=null==c?a:Si(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,wi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==d&&Qr(s,d,c,u,!0)}if("select"===(l=(a=r?Si(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Jn;else if(qn(a))if(Yn)m=sr;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Wn(s,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?Si(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=en()):($t="value"in(Yt=i)?Yt.value:Yt.textContent,Vn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=$t=Yt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=De(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=De(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),pi="__reactFiber$"+fi,gi="__reactProps$"+fi,mi="__reactContainer$"+fi,yi="__reactEvents$"+fi,vi="__reactListeners$"+fi,bi="__reactHandles$"+fi;function wi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[pi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[pi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ei(e){return e[gi]||null}var Ci=[],Ti=-1;function Ii(e){return{current:e}}function Ai(e){0>Ti||(e.current=Ci[Ti],Ci[Ti]=null,Ti--)}function Ri(e,t){Ti++,Ci[Ti]=e.current,e.current=t}var Ni={},Di=Ii(Ni),Pi=Ii(!1),Oi=Ni;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ai(Pi),Ai(Di)}function Fi(e,t,n){if(Di.current!==Ni)throw Error(o(168));Ri(Di,t),Ri(Pi,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return M({},n,r)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Oi=Di.current,Ri(Di,e),Ri(Pi,Pi.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ui(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Pi),Ai(Di),Ri(Di,e)):Ai(Pi),Ri(Pi,n)}var Vi=null,Hi=!1,qi=!1;function Wi(e){null===Vi?Vi=[e]:Vi.push(e)}function Ki(){if(!qi&&null!==Vi){qi=!0;var e=0,t=bt;try{var n=Vi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Hi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ge(Ze,Ki),i}finally{bt=t,qi=!1}}return null}var Gi=[],Qi=0,Xi=null,Ji=0,Yi=[],$i=0,Zi=null,eo=1,to="";function no(e,t){Gi[Qi++]=Ji,Gi[Qi++]=Xi,Xi=e,Ji=t}function ro(e,t,n){Yi[$i++]=eo,Yi[$i++]=to,Yi[$i++]=Zi,Zi=e;var r=eo;e=to;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,eo=1<<32-st(t)+i|n<<i|r,to=o+e}else eo=1<<o|n<<i|r,to=e}function io(e){null!==e.return&&(no(e,1),ro(e,1,0))}function oo(e){for(;e===Xi;)Xi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null;for(;e===Zi;)Zi=Yi[--$i],Yi[$i]=null,to=Yi[--$i],Yi[$i]=null,eo=Yi[--$i],Yi[$i]=null}var so=null,ao=null,lo=!1,co=null;function uo(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,so=e,ao=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,so=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:eo,overflow:to}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,so=e,ao=null,!0);default:return!1}}function fo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function po(e){if(lo){var t=ao;if(t){var n=t;if(!ho(e,t)){if(fo(e))throw Error(o(418));t=ui(n.nextSibling);var r=so;t&&ho(e,t)?uo(r,n):(e.flags=-4097&e.flags|2,lo=!1,so=e)}}else{if(fo(e))throw Error(o(418));e.flags=-4097&e.flags|2,lo=!1,so=e}}}function go(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;so=e}function mo(e){if(e!==so)return!1;if(!lo)return go(e),lo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ao)){if(fo(e))throw yo(),Error(o(418));for(;t;)uo(e,t),t=ui(t.nextSibling)}if(go(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=so?ui(e.stateNode.nextSibling):null;return!0}function yo(){for(var e=ao;e;)e=ui(e.nextSibling)}function vo(){ao=so=null,lo=!1}function bo(e){null===co?co=[e]:co.push(e)}var wo=w.ReactCurrentBatchConfig;function xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function So(e){return(0,e._init)(e._payload)}function Eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&So(o)===t.type)?((r=i(t,n.props)).ref=xo(e,t,n),r.return=e,r):((r=zc(n.type,n.key,n.props,null,e.mode,r)).ref=xo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Bc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Hc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=zc(t.type,t.key,t.props,null,e.mode,n)).ref=xo(e,null,t),n.return=e,n;case k:return(t=qc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Bc(t,e.mode,n,null)).return=e,t;ko(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:d(e,t,n,r,null);ko(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,i,null);ko(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,a[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(i,d),lo&&no(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return lo&&no(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),lo&&no(i,g),c}function m(i,a,l,c){var u=j(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(i,g),lo&&no(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return lo&&no(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(i,e)}),lo&&no(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&So(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=xo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((o=Bc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=zc(s.type,s.key,s.props,null,r.mode,l)).ref=xo(r,o,s),l.return=r,r=l)}return a(r);case k:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=qc(s,r.mode,l)).return=r,r=o}return a(r);case D:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(j(s))return m(r,o,s,l);ko(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Hc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var _o=Eo(!0),Co=Eo(!1),To=Ii(null),Io=null,Ao=null,Ro=null;function No(){Ro=Ao=Io=null}function Do(e){var t=To.current;Ai(To),e._currentValue=t}function Po(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oo(e,t){Io=e,Ro=Ao=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ea=!0),e.firstContext=null)}function jo(e){var t=e._currentValue;if(Ro!==e)if(e={context:e,memoizedValue:t,next:null},null===Ao){if(null===Io)throw Error(o(308));Ao=e,Io.dependencies={lanes:0,firstContext:e}}else Ao=Ao.next=e;return t}var Lo=null;function Mo(e){null===Lo?Lo=[e]:Lo.push(e)}function Fo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Mo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Uo(e,r)}function Uo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var zo=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Uo(e,n)}return null===(i=r.interleaved)?(t.next=t,Mo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Uo(e,n)}function Wo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ko(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Go(e,t,n,r){var i=e.updateQueue;zo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:zo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Vl|=s,e.lanes=s,e.memoizedState=d}}function Qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Jo={},Yo=Ii(Jo),$o=Ii(Jo),Zo=Ii(Jo);function es(e){if(e===Jo)throw Error(o(174));return e}function ts(e,t){switch(Ri(Zo,t),Ri($o,e),Ri(Yo,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(Yo),Ri(Yo,t)}function ns(){Ai(Yo),Ai($o),Ai(Zo)}function rs(e){es(Zo.current);var t=es(Yo.current),n=le(t,e.type);t!==n&&(Ri($o,e),Ri(Yo,n))}function is(e){$o.current===e&&(Ai(Yo),Ai($o))}var os=Ii(0);function ss(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var as=[];function ls(){for(var e=0;e<as.length;e++)as[e]._workInProgressVersionPrimary=null;as.length=0}var cs=w.ReactCurrentDispatcher,us=w.ReactCurrentBatchConfig,ds=0,hs=null,fs=null,ps=null,gs=!1,ms=!1,ys=0,vs=0;function bs(){throw Error(o(321))}function ws(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xs(e,t,n,r,i,s){if(ds=s,hs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=null===e||null===e.memoizedState?ia:oa,e=n(r,i),ms){s=0;do{if(ms=!1,ys=0,25<=s)throw Error(o(301));s+=1,ps=fs=null,t.updateQueue=null,cs.current=sa,e=n(r,i)}while(ms)}if(cs.current=ra,t=null!==fs&&null!==fs.next,ds=0,ps=fs=hs=null,gs=!1,t)throw Error(o(300));return e}function ks(){var e=0!==ys;return ys=0,e}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ps?hs.memoizedState=ps=e:ps=ps.next=e,ps}function Es(){if(null===fs){var e=hs.alternate;e=null!==e?e.memoizedState:null}else e=fs.next;var t=null===ps?hs.memoizedState:ps.next;if(null!==t)ps=t,fs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(fs=e).memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},null===ps?hs.memoizedState=ps=e:ps=ps.next=e}return ps}function _s(e,t){return"function"===typeof t?t(e):t}function Cs(e){var t=Es(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=fs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ds&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,hs.lanes|=d,Vl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(Ea=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,hs.lanes|=s,Vl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ts(e){var t=Es(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(Ea=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function As(e,t){var n=hs,r=Es(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,Ea=!0),r=r.queue,Bs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ps&&1&ps.memoizedState.tag){if(n.flags|=2048,Ls(9,Ns.bind(null,n,r,i,t),void 0,null),null===jl)throw Error(o(349));0!==(30&ds)||Rs(n,t,i)}return i}function Rs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=hs.updateQueue)?(t={lastEffect:null,stores:null},hs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Ps(t)&&Os(e)}function Ds(e,t,n){return n(function(){Ps(t)&&Os(e)})}function Ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Os(e){var t=Uo(e,1);null!==t&&lc(t,e,1,-1)}function js(e){var t=Ss();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Zs.bind(null,hs,e),[t.memoizedState,e]}function Ls(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=hs.updateQueue)?(t={lastEffect:null,stores:null},hs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ms(){return Es().memoizedState}function Fs(e,t,n,r){var i=Ss();hs.flags|=e,i.memoizedState=Ls(1|t,n,void 0,void 0===r?null:r)}function Us(e,t,n,r){var i=Es();r=void 0===r?null:r;var o=void 0;if(null!==fs){var s=fs.memoizedState;if(o=s.destroy,null!==r&&ws(r,s.deps))return void(i.memoizedState=Ls(t,n,o,r))}hs.flags|=e,i.memoizedState=Ls(1|t,n,o,r)}function zs(e,t){return Fs(8390656,8,e,t)}function Bs(e,t){return Us(2048,8,e,t)}function Vs(e,t){return Us(4,2,e,t)}function Hs(e,t){return Us(4,4,e,t)}function qs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ws(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,qs.bind(null,t,e),n)}function Ks(){}function Gs(e,t){var n=Es();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=Es();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&ds)?(e.baseState&&(e.baseState=!1,Ea=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),hs.lanes|=n,Vl|=n,e.baseState=!0),t)}function Js(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=us.transition;us.transition={};try{e(!1),t()}finally{bt=n,us.transition=r}}function Ys(){return Es().memoizedState}function $s(e,t,n){var r=ac(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(null!==(n=Fo(e,t,n,r))){lc(n,e,r,sc()),na(n,t,r)}}function Zs(e,t,n){var r=ac(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Mo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(hi){}null!==(n=Fo(e,t,i,r))&&(lc(n,e,r,i=sc()),na(n,t,r))}}function ea(e){var t=e.alternate;return e===hs||null!==t&&t===hs}function ta(e,t){ms=gs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ra={readContext:jo,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},ia={readContext:jo,useCallback:function(e,t){return Ss().memoizedState=[e,void 0===t?null:t],e},useContext:jo,useEffect:zs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fs(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var n=Ss();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ss();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$s.bind(null,hs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ss().memoizedState=e},useState:js,useDebugValue:Ks,useDeferredValue:function(e){return Ss().memoizedState=e},useTransition:function(){var e=js(!1),t=e[0];return e=Js.bind(null,e[1]),Ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=hs,i=Ss();if(lo){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===jl)throw Error(o(349));0!==(30&ds)||Rs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zs(Ds.bind(null,r,s,e),[e]),r.flags|=2048,Ls(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ss(),t=jl.identifierPrefix;if(lo){var n=to;t=":"+t+"R"+(n=(eo&~(1<<32-st(eo)-1)).toString(32)+n),0<(n=ys++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oa={readContext:jo,useCallback:Gs,useContext:jo,useEffect:Bs,useImperativeHandle:Ws,useInsertionEffect:Vs,useLayoutEffect:Hs,useMemo:Qs,useReducer:Cs,useRef:Ms,useState:function(){return Cs(_s)},useDebugValue:Ks,useDeferredValue:function(e){return Xs(Es(),fs.memoizedState,e)},useTransition:function(){return[Cs(_s)[0],Es().memoizedState]},useMutableSource:Is,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1},sa={readContext:jo,useCallback:Gs,useContext:jo,useEffect:Bs,useImperativeHandle:Ws,useInsertionEffect:Vs,useLayoutEffect:Hs,useMemo:Qs,useReducer:Ts,useRef:Ms,useState:function(){return Ts(_s)},useDebugValue:Ks,useDeferredValue:function(e){var t=Es();return null===fs?t.memoizedState=e:Xs(t,fs.memoizedState,e)},useTransition:function(){return[Ts(_s)[0],Es().memoizedState]},useMutableSource:Is,useSyncExternalStore:As,useId:Ys,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function la(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sc(),i=ac(e),o=Ho(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=qo(e,o,i))&&(lc(t,e,i,r),Wo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sc(),i=ac(e),o=Ho(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=qo(e,o,i))&&(lc(t,e,i,r),Wo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sc(),r=ac(e),i=Ho(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qo(e,i,r))&&(lc(t,e,r,n),Wo(t,e,r))}};function ua(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function da(e,t,n){var r=!1,i=Ni,o=t.contextType;return"object"===typeof o&&null!==o?o=jo(o):(i=Li(t)?Oi:Di.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ni),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Bo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=jo(o):(o=Li(t)?Oi:Di.current,i.context=ji(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(la(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),Go(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ga(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ma(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=Ho(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jl||(Jl=!0,Yl=r),ma(0,t)},n}function ba(e,t,n){(n=Ho(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ma(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ma(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ya;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function xa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ka(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ho(-1,1)).tag=2,qo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Sa=w.ReactCurrentOwner,Ea=!1;function _a(e,t,n,r){t.child=null===e?Co(t,null,n,r):_o(t,e.child,n,r)}function Ca(e,t,n,r,i){n=n.render;var o=t.ref;return Oo(t,i),r=xs(e,t,n,r,o,i),n=ks(),null===e||Ea?(lo&&n&&io(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xa(e,t,i))}function Ta(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Fc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ia(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Xa(e,t,i)}return t.flags|=1,(e=Uc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Xa(e,t,i);0!==(131072&e.flags)&&(Ea=!0)}}return Na(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Ul,Fl),Fl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Ul,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ri(Ul,Fl),Fl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ri(Ul,Fl),Fl|=r;return _a(e,t,i,n),t.child}function Ra(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,i){var o=Li(n)?Oi:Di.current;return o=ji(t,o),Oo(t,i),n=xs(e,t,n,r,o,i),r=ks(),null===e||Ea?(lo&&r&&io(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xa(e,t,i))}function Da(e,t,n,r,i){if(Li(n)){var o=!0;zi(t)}else o=!1;if(Oo(t,i),null===t.stateNode)Qa(e,t),da(t,n,r),fa(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=jo(c):c=ji(t,c=Li(n)?Oi:Di.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&ha(t,s,r,c),zo=!1;var h=t.memoizedState;s.state=h,Go(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Pi.current||zo?("function"===typeof u&&(la(t,n,u,r),l=t.memoizedState),(a=zo||ua(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Vo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:aa(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=jo(l):l=ji(t,l=Li(n)?Oi:Di.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&ha(t,s,r,l),zo=!1,h=t.memoizedState,s.state=h,Go(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Pi.current||zo?("function"===typeof f&&(la(t,n,f,r),p=t.memoizedState),(c=zo||ua(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,o,i)}function Pa(e,t,n,r,i,o){Ra(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Bi(t,n,!1),Xa(e,t,o);r=t.stateNode,Sa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(0,t.context,!1),ts(e,t.containerInfo)}function ja(e,t,n,r,i){return vo(),bo(i),t.flags|=256,_a(e,t,n,r),t.child}var La,Ma,Fa,Ua,za={dehydrated:null,treeContext:null,retryLane:0};function Ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,s=os.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ri(os,1&s),null===e)return po(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Vc(l,i,0,null),e=Bc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ba(n),t.memoizedState=za,e):Ha(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=ga(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Vc({mode:"visible",children:r.children},i,0,null),(s=Bc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Ba(a),t.memoizedState=za,s);if(0===(1&t.mode))return qa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=ga(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),Ea||l){if(null!==(r=jl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Uo(e,i),lc(r,e,i,-1))}return xc(),qa(e,t,a,r=ga(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ao=ui(i.nextSibling),so=t,lo=!0,co=null,null!==e&&(Yi[$i++]=eo,Yi[$i++]=to,Yi[$i++]=Zi,eo=e.id,to=e.overflow,Zi=t),t=Ha(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Uc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Uc(r,a):(a=Bc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ba(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,i}return e=(a=e.child).sibling,i=Uc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ha(e,t){return(t=Vc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,r){return null!==r&&bo(r),_o(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Po(e.return,t,n)}function Ka(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ri(os,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ss(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ss(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,o);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ja(e,t){if(!lo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $a(e,t,n){var r=t.pendingProps;switch(oo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Li(t.type)&&Mi(),Ya(t),null;case 3:return r=t.stateNode,ns(),Ai(Pi),Ai(Di),ls(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(mo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==co&&(hc(co),co=null))),Ma(e,t),Ya(t),null;case 5:is(t);var i=es(Zo.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ya(t),null}if(e=es(Yo.current),mo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[pi]=t,r[gi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[gi]=r,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=X(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=es(Zo.current),es(Yo.current),mo(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(s=r.nodeValue!==n)&&null!==(e=so))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ya(t),null;case 13:if(Ai(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(lo&&null!==ao&&0!==(1&t.mode)&&0===(128&t.flags))yo(),vo(),t.flags|=98560,s=!1;else if(s=mo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[pi]=t}else vo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),s=!1}else null!==co&&(hc(co),co=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===zl&&(zl=3):xc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return ns(),Ma(e,t),null===e&&Vr(t.stateNode.containerInfo),Ya(t),null;case 10:return Do(t.type._context),Ya(t),null;case 19:if(Ai(os),null===(s=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ja(s,!1);else{if(0!==zl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ss(e))){for(t.flags|=128,Ja(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ri(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Ql&&(t.flags|=128,r=!0,Ja(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ss(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ja(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!lo)return Ya(t),null}else 2*Ye()-s.renderingStartTime>Ql&&1073741824!==n&&(t.flags|=128,r=!0,Ja(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=os.current,Ri(os,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return yc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Fl)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Za(e,t){switch(oo(t),t.tag){case 1:return Li(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ns(),Ai(Pi),Ai(Di),ls(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return is(t),null;case 13:if(Ai(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(os),null;case 4:return ns(),null;case 10:return Do(t.type._context),null;case 22:case 23:return yc(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Fa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,es(Yo.current);var o,s=null;switch(n){case"input":i=X(e,i),r=X(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Rc(e,t,r)}else n.current=null}function ol(e,t,n){try{n()}catch(r){Rc(e,t,r)}}var sl=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ol(t,n,o)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[gi],delete t[yi],delete t[vi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var gl=null,ml=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=gl,i=ml;gl=null,yl(e,t,n),ml=i,null!==(gl=r)&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):gl.removeChild(n.stateNode));break;case 18:null!==gl&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Vt(e)):ci(gl,n.stateNode));break;case 4:r=gl,i=ml,gl=n.stateNode.containerInfo,ml=!0,yl(e,t,n),gl=r,ml=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ol(n,t,s),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Rc(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Oc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:gl=l.stateNode,ml=!1;break e;case 3:case 4:gl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===gl)throw Error(o(160));vl(s,a,i),gl=null,ml=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(hi){Rc(i,t,hi)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),kl(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(m){Rc(e,e.return,m)}try{al(5,e,e.return)}catch(m){Rc(e,e.return,m)}}break;case 1:wl(t,e),kl(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),kl(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Rc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Y(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[gi]=s}catch(m){Rc(e,e.return,m)}}break;case 6:if(wl(t,e),kl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Rc(e,e.return,m)}}break;case 3:if(wl(t,e),kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Rc(e,e.return,m)}break;case 4:default:wl(t,e),kl(e);break;case 13:wl(t,e),kl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Gl=Ye())),4&r&&bl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||d,wl(t,e),tl=u):wl(t,e),kl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(rl=e,d=e.child;null!==d;){for(h=rl=d;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Rc(r,n,m)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==p?(p.return=f,rl=p):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Rc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Rc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wl(t,e),kl(e),4&r&&bl(e);case 21:}}function kl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(dl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),pl(e,hl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;fl(e,hl(e),s);break;default:throw Error(o(161))}}catch(li){Rc(e,e.return,li)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){rl=e,El(e,t,n)}function El(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||el;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=s,(tl=l)&&!c)for(rl=i;null!==rl;)l=(s=rl).child,22===s.tag&&null!==s.memoizedState?Tl(i):null!==l?(l.return=s,rl=l):Tl(i);for(;null!==o;)rl=o,El(o,t,n),o=o.sibling;rl=i,el=a,tl=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,rl=o):_l(e)}}function _l(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Qo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Qo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}tl||512&t.flags&&cl(t)}catch(xi){Rc(t,t.return,xi)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function Cl(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Tl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(li){Rc(t,n,li)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(li){Rc(t,i,li)}}var o=t.return;try{cl(t)}catch(li){Rc(t,o,li)}break;case 5:var s=t.return;try{cl(t)}catch(li){Rc(t,s,li)}}}catch(li){Rc(t,t.return,li)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Al,Rl=Math.ceil,Nl=w.ReactCurrentDispatcher,Dl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Ol=0,jl=null,Ll=null,Ml=0,Fl=0,Ul=Ii(0),zl=0,Bl=null,Vl=0,Hl=0,ql=0,Wl=null,Kl=null,Gl=0,Ql=1/0,Xl=null,Jl=!1,Yl=null,$l=null,Zl=!1,ec=null,tc=0,nc=0,rc=null,ic=-1,oc=0;function sc(){return 0!==(6&Ol)?Ye():-1!==ic?ic:ic=Ye()}function ac(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Ml?Ml&-Ml:null!==wo.transition?(0===oc&&(oc=gt()),oc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function lc(e,t,n,r){if(50<nc)throw nc=0,rc=null,Error(o(185));yt(e,n,r),0!==(2&Ol)&&e===jl||(e===jl&&(0===(2&Ol)&&(Hl|=n),4===zl&&fc(e,Ml)),cc(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(Ql=Ye()+500,Hi&&Ki()))}function cc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===jl?Ml:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Hi=!0,Wi(e)}(pc.bind(null,e)):Wi(pc.bind(null,e)),si(function(){0===(6&Ol)&&Ki()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=jc(n,uc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uc(e,t){if(ic=-1,oc=0,0!==(6&Ol))throw Error(o(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=ht(e,e===jl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=kc(e,r);else{t=r;var i=Ol;Ol|=2;var s=wc();for(jl===e&&Ml===t||(Xl=null,Ql=Ye()+500,vc(e,t));;)try{Ec();break}catch(l){bc(e,l)}No(),Nl.current=s,Ol=i,null!==Ll?t=0:(jl=null,Ml=0,t=zl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=dc(e,i))),1===t)throw n=Bl,vc(e,0),fc(e,r),cc(e,Ye()),n;if(6===t)fc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=kc(e,r))&&(0!==(s=pt(e))&&(r=s,t=dc(e,s))),1===t))throw n=Bl,vc(e,0),fc(e,r),cc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Tc(e,Kl,Xl);break;case 3:if(fc(e,r),(130023424&r)===r&&10<(t=Gl+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){sc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Tc.bind(null,e,Kl,Xl),t);break}Tc(e,Kl,Xl);break;case 4:if(fc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rl(r/1960))-r)){e.timeoutHandle=ri(Tc.bind(null,e,Kl,Xl),r);break}Tc(e,Kl,Xl);break;default:throw Error(o(329))}}}return cc(e,Ye()),e.callbackNode===n?uc.bind(null,e):null}function dc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),2!==(e=kc(e,t))&&(t=Kl,Kl=n,null!==t&&hc(t)),e}function hc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function fc(e,t){for(t&=~ql,t&=~Hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function pc(e){if(0!==(6&Ol))throw Error(o(327));Ic();var t=ht(e,0);if(0===(1&t))return cc(e,Ye()),null;var n=kc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=dc(e,r))}if(1===n)throw n=Bl,vc(e,0),fc(e,t),cc(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Kl,Xl),cc(e,Ye()),null}function gc(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(Ql=Ye()+500,Hi&&Ki())}}function mc(e){null!==ec&&0===ec.tag&&0===(6&Ol)&&Ic();var t=Ol;Ol|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Ol=t))&&Ki()}}function yc(){Fl=Ul.current,Ai(Ul)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ll)for(n=Ll.return;null!==n;){var r=n;switch(oo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:ns(),Ai(Pi),Ai(Di),ls();break;case 5:is(r);break;case 4:ns();break;case 13:case 19:Ai(os);break;case 10:Do(r.type._context);break;case 22:case 23:yc()}n=n.return}if(jl=e,Ll=e=Uc(e.current,null),Ml=Fl=t,zl=0,Bl=null,ql=Hl=Vl=0,Kl=Wl=null,null!==Lo){for(t=0;t<Lo.length;t++)if(null!==(r=(n=Lo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Lo=null}return e}function bc(e,t){for(;;){var n=Ll;try{if(No(),cs.current=ra,gs){for(var r=hs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}gs=!1}if(ds=0,ps=fs=hs=null,ms=!1,ys=0,Dl.current=null,null===n||null===n.return){zl=1,Bl=t,Ll=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=xa(a);if(null!==p){p.flags&=-257,ka(p,a,l,0,t),1&p.mode&&wa(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){wa(s,u,t),xc();break e}c=Error(o(426))}else if(lo&&1&l.mode){var y=xa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ka(y,a,l,0,t),bo(pa(c,l));break e}}s=c=pa(c,l),4!==zl&&(zl=2),null===Wl?Wl=[s]:Wl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ko(s,va(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$l||!$l.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ko(s,ba(s,l,t));break e}}s=s.return}while(null!==s)}Cc(n)}catch(_i){t=_i,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function wc(){var e=Nl.current;return Nl.current=ra,null===e?ra:e}function xc(){0!==zl&&3!==zl&&2!==zl||(zl=4),null===jl||0===(268435455&Vl)&&0===(268435455&Hl)||fc(jl,Ml)}function kc(e,t){var n=Ol;Ol|=2;var r=wc();for(jl===e&&Ml===t||(Xl=null,vc(e,t));;)try{Sc();break}catch(i){bc(e,i)}if(No(),Ol=n,Nl.current=r,null!==Ll)throw Error(o(261));return jl=null,Ml=0,zl}function Sc(){for(;null!==Ll;)_c(Ll)}function Ec(){for(;null!==Ll&&!Xe();)_c(Ll)}function _c(e){var t=Al(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?Cc(e):Ll=t,Dl.current=null}function Cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$a(n,t,Fl)))return void(Ll=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return zl=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===zl&&(zl=5)}function Tc(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{Ic()}while(null!==ec);if(0!==(6&Ol))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===jl&&(Ll=jl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,jc(tt,function(){return Ic(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Ol;Ol|=4,Dl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(Xo){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:aa(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(Xo){Rc(t,t.return,Xo)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}g=sl,sl=!1}(e,n),xl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,Sl(n,e,i),Je(),Ol=l,bt=a,Pl.transition=s}else e.current=n;if(Zl&&(Zl=!1,ec=e,tc=i),s=e.pendingLanes,0===s&&($l=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),cc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jl)throw Jl=!1,e=Yl,Yl=null,e;0!==(1&tc)&&0!==e.tag&&Ic(),s=e.pendingLanes,0!==(1&s)?e===rc?nc++:(nc=0,rc=e):nc=0,Ki()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function Ic(){if(null!==ec){var e=wt(tc),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===ec)var r=!1;else{if(e=ec,ec=null,tc=0,0!==(6&Ol))throw Error(o(331));var i=Ol;for(Ol|=4,rl=e.current;null!==rl;){var s=rl,a=s.child;if(0!==(16&rl.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var d=rl;switch(d.tag){case 0:case 11:case 15:al(8,d,s)}var h=d.child;if(null!==h)h.return=d,rl=h;else for(;null!==rl;){var f=(d=rl).sibling,p=d.return;if(ul(d),d===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}rl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,rl=a;else e:for(;null!==rl;){if(0!==(2048&(s=rl).flags))switch(s.tag){case 0:case 11:case 15:al(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,rl=v;break e}rl=s.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(_i){Rc(l,l.return,_i)}if(l===a){rl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,rl=x;break e}rl=l.return}}if(Ol=i,Ki(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_i){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Ac(e,t,n){e=qo(e,t=va(0,t=pa(n,t),1),1),t=sc(),null!==e&&(yt(e,1,t),cc(e,t))}function Rc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=qo(t,e=ba(t,e=pa(n,e),1),1),e=sc(),null!==t&&(yt(t,1,e),cc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sc(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Ml&n)===n&&(4===zl||3===zl&&(130023424&Ml)===Ml&&500>Ye()-Gl?vc(e,0):ql|=n),cc(e,t)}function Dc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=sc();null!==(e=Uo(e,t))&&(yt(e,t,n),cc(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Dc(e,n)}function Oc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Dc(e,n)}function jc(e,t){return Ge(e,t)}function Lc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Lc(e,t,n,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Fc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Bc(n.children,i,s,t);case E:a=8,i|=8;break;case _:return(e=Mc(12,n,t,2|i)).elementType=_,e.lanes=s,e;case A:return(e=Mc(13,n,t,i)).elementType=A,e.lanes=s,e;case R:return(e=Mc(19,n,t,i)).elementType=R,e.lanes=s,e;case P:return Vc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case I:a=11;break e;case N:a=14;break e;case D:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Bc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Vc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Hc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,i,o,s,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),e}function Gc(e){if(!e)return Ni;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ui(e,n,t)}return t}function Qc(e,t,n,r,i,o,s,a,l){return(e=Kc(n,r,!0,e,0,o,0,a,l)).context=Gc(null),n=e.current,(o=Ho(r=sc(),i=ac(n))).callback=void 0!==t&&null!==t?t:null,qo(n,o,i),e.current.lanes=i,yt(e,i,r),cc(e,r),e}function Xc(e,t,n,r){var i=t.current,o=sc(),s=ac(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ho(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qo(i,t,s))&&(lc(e,i,s,o),Wo(e,i,s)),s}function Jc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)Ea=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),vo();break;case 5:rs(t);break;case 1:Li(t.type)&&zi(t);break;case 4:ts(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ri(To,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ri(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ri(os,1&os.current),null!==(e=Xa(e,t,n))?e.sibling:null);Ri(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ri(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Xa(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,lo&&0!==(1048576&t.flags)&&ro(t,Ji,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qa(e,t),e=t.pendingProps;var i=ji(t,Di.current);Oo(t,n),i=xs(null,t,r,e,i,n);var s=ks();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(s=!0,zi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Bo(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,fa(t,r,e,n),t=Pa(null,t,r,!0,s,n)):(t.tag=0,lo&&s&&io(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=aa(r,e),i){case 0:t=Na(null,t,r,e,n);break e;case 1:t=Da(null,t,r,e,n);break e;case 11:t=Ca(null,t,r,e,n);break e;case 14:t=Ta(null,t,r,aa(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Da(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Vo(e,t),Go(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ja(e,t,r,n,i=pa(Error(o(423)),t));break e}if(r!==i){t=ja(e,t,r,n,i=pa(Error(o(424)),t));break e}for(ao=ui(t.stateNode.containerInfo.firstChild),so=t,lo=!0,co=null,n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(vo(),r===i){t=Xa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return rs(t),null===e&&po(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ra(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&po(t),null;case 13:return Va(e,t,n);case 4:return ts(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ri(To,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Pi.current){t=Xa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ho(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Po(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Po(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Oo(t,n),r=r(i=jo(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=aa(r=t.type,t.pendingProps),Ta(e,t,r,i=aa(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),Qa(e,t),t.tag=1,Li(r)?(e=!0,zi(t)):e=!1,Oo(t,n),da(t,r,i),fa(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Ga(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}function tu(e){this._internalRoot=e}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(){}function ou(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Jc(s);a.call(e)}}Xc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Jc(s);o.call(e)}}var s=Qc(t,r,e,0,null,!1,0,"",iu);return e._reactRootContainer=s,e[mi]=s.current,Vr(8===e.nodeType?e.parentNode:e),mc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Jc(l);a.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",iu);return e._reactRootContainer=l,e[mi]=l.current,Vr(8===e.nodeType?e.parentNode:e),mc(function(){Xc(t,l,n,r)}),l}(n,t,e,i,r);return Jc(s)}tu.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Xc(e,t,null,null)},tu.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mc(function(){Xc(null,e,null,null)}),t[mi]=null}},tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),cc(t,Ye()),0===(6&Ol)&&(Ql=Ye()+500,Ki()))}break;case 13:mc(function(){var t=Uo(e,1);if(null!==t){var n=sc();lc(t,e,1,n)}}),$c(e,1)}},kt=function(e){if(13===e.tag){var t=Uo(e,134217728);if(null!==t)lc(t,e,134217728,sc());$c(e,134217728)}},St=function(e){if(13===e.tag){var t=ac(e),n=Uo(e,t);if(null!==n)lc(n,e,t,sc());$c(e,t)}},Et=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=gc,Ae=mc;var su={usingClientEntryPoint:!1,Events:[ki,Si,Ei,Ce,Te,gc]},au={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{it=cu.inject(lu),ot=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nu(e))throw Error(o(299));var n=!1,r="",i=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Kc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new eu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return mc(e)},t.hydrate=function(e,t,n){if(!ru(t))throw Error(o(200));return ou(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[mi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tu(t)},t.render=function(e,t,n){if(!ru(t))throw Error(o(200));return ou(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(o(40));return!!e._reactRootContainer&&(mc(function(){ou(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=gc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ru(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ou(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},948:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,P(k);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(C),C=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(x,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,_=null,C=-1,T=5,I=-1;function A(){return!(t.unstable_now()-I<T)}function R(){if(null!==_){var e=t.unstable_now();I=e;var n=!0;try{n=_(!0,e)}finally{n?S():(E=!1,_=null)}}else E=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=R,S=function(){D.postMessage(null)}}else S=function(){y(R,0)};function P(e){_=e,E||(E=!0,S())}function O(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(v(C),C=-1):m=!0,O(x,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,P(k))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},957:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>a})},963:(e,t,n)=>{e.exports=n(948)},981:(e,t,n)=>{var r=n(452);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(205),i=n(981),o=n(957),s=n(763);const a="build-".concat((new Date).toISOString()),l=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new u;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d=function(e){return function(e){const t=l(e);return c.encodeByteArray(t,!0)}(e).replace(/\./g,"")},h=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const f=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,p=()=>{try{return f()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/community-library-project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"",REACT_APP_APP_NAME:"Community Library",REACT_APP_FB_API_KEY:"AIzaSyDqmFOW2daTZL4CQO321Ae6C8jxvfuVlz0",REACT_APP_FB_APP_ID:"1:1072674193479:web:9e41e976a5f083e8eb7162",REACT_APP_FB_AUTH_DOMAIN:"comlib-6e6c4.firebaseapp.com",REACT_APP_FB_MSG_SENDER:"1072674193479",REACT_APP_FB_PROJECT_ID:"comlib-6e6c4",REACT_APP_FB_STORAGE:"comlib-6e6c4.appspot.com",REACT_APP_SOCKET_URL:"http://localhost:5000",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_your-stripe-publishable-key",REACT_APP_USE_FIREBASE:"1",REACT_APP_VAPID_PUBLIC_KEY:"BAIdonnIzQEPH2BWFcQdzqh0vKHxbRIMilgS0bsl3RUcyjBp_EKauQuOr7DXfAFT06_QREeOY-n7PhblqpjFAQo"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&h(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},g=e=>{var t,n;return null===(n=null===(t=p())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},m=()=>{var e;return null===(e=p())||void 0===e?void 0:e.config},y=e=>{var t;return null===(t=p())||void 0===t?void 0:t["_".concat(e)]};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function b(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){try{return"object"===typeof indexedDB}catch(e){return!1}}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(S,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new x(n,o,t)}}const S=/\{\$([^}]+)}/g;function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(_(n)&&_(o)){if(!E(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _(e){return null!==e&&"object"===typeof e}function C(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function T(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function I(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class A{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=R),void 0===r.error&&(r.error=R),void 0===r.complete&&(r.complete=R);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R(){}function N(e){return e&&e._delegate?e._delegate:e}class D{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const P="[DEFAULT]";class O{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new v;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:P})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===P?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.component?this.component.multipleInstances?e:P:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class j{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new O(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const L=[];var M;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));const F={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},U=M.INFO,z={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},B=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=z[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class V{constructor(e){this.name=e,this._logLevel=U,this._logHandler=B,this._userLogHandler=null,L.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...t),this._logHandler(this,M.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...t),this._logHandler(this,M.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.INFO,...t),this._logHandler(this,M.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.WARN,...t),this._logHandler(this,M.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.ERROR,...t),this._logHandler(this,M.ERROR,...t)}}let H,q;const W=new WeakMap,K=new WeakMap,G=new WeakMap,Q=new WeakMap,X=new WeakMap;let J={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return K.get(e);if("objectStoreNames"===t)return e.objectStoreNames||G.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ee(this),n),Z(W.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Z(e.apply(ee(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(ee(this),t,...r);return G.set(o,t.sort?t.sort():[t]),Z(o)}}function $(e){return"function"===typeof e?Y(e):(e instanceof IDBTransaction&&function(e){if(K.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});K.set(e,t)}(e),t=e,(H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,J):e);var t}function Z(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Z(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&W.set(t,e)}).catch(()=>{}),X.set(t,e),t}(e);if(Q.has(e))return Q.get(e);const t=$(e);return t!==e&&(Q.set(e,t),X.set(t,e)),t}const ee=e=>X.get(e);const te=["get","getKey","getAll","getAllKeys","count"],ne=["put","add","delete","clear"],re=new Map;function ie(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(re.get(t))return re.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ne.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!te.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return re.set(t,o),o}J=(e=>(0,o.A)((0,o.A)({},e),{},{get:(t,n,r)=>ie(t,n)||e.get(t,n,r),has:(t,n)=>!!ie(t,n)||e.has(t,n)}))(J);class oe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const se="@firebase/app",ae="0.9.13",le=new V("@firebase/app"),ce="@firebase/app-compat",ue="@firebase/analytics-compat",de="@firebase/analytics",he="@firebase/app-check-compat",fe="@firebase/app-check",pe="@firebase/auth",ge="@firebase/auth-compat",me="@firebase/database",ye="@firebase/database-compat",ve="@firebase/functions",be="@firebase/functions-compat",we="@firebase/installations",xe="@firebase/installations-compat",ke="@firebase/messaging",Se="@firebase/messaging-compat",Ee="@firebase/performance",_e="@firebase/performance-compat",Ce="@firebase/remote-config",Te="@firebase/remote-config-compat",Ie="@firebase/storage",Ae="@firebase/storage-compat",Re="@firebase/firestore",Ne="@firebase/firestore-compat",De="firebase",Pe="[DEFAULT]",Oe={[se]:"fire-core",[ce]:"fire-core-compat",[de]:"fire-analytics",[ue]:"fire-analytics-compat",[fe]:"fire-app-check",[he]:"fire-app-check-compat",[pe]:"fire-auth",[ge]:"fire-auth-compat",[me]:"fire-rtdb",[ye]:"fire-rtdb-compat",[ve]:"fire-fn",[be]:"fire-fn-compat",[we]:"fire-iid",[xe]:"fire-iid-compat",[ke]:"fire-fcm",[Se]:"fire-fcm-compat",[Ee]:"fire-perf",[_e]:"fire-perf-compat",[Ce]:"fire-rc",[Te]:"fire-rc-compat",[Ie]:"fire-gcs",[Ae]:"fire-gcs-compat",[Re]:"fire-fst",[Ne]:"fire-fst-compat","fire-js":"fire-js",[De]:"fire-js-all"},je=new Map,Le=new Map;function Me(e,t){try{e.container.addComponent(t)}catch(n){le.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Fe(e){const t=e.name;if(Le.has(t))return le.debug("There were multiple attempts to register component ".concat(t,".")),!1;Le.set(t,e);for(const n of je.values())Me(n,e);return!0}function Ue(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ze=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Be{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ze.create("app-deleted",{appName:this._name})}}const Ve="9.23.0";function He(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ze.create("bad-app-name",{appName:String(i)});if(n||(n=m()),!n)throw ze.create("no-options");const o=je.get(i);if(o){if(E(n,o.options)&&E(r,o.config))return o;throw ze.create("duplicate-app",{appName:i})}const s=new j(i);for(const l of Le.values())s.addComponent(l);const a=new Be(n,r,s);return je.set(i,a),a}function qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;const t=je.get(e);if(!t&&e===Pe&&m())return He();if(!t)throw ze.create("no-app",{appName:e});return t}function We(e,t,n){var r;let i=null!==(r=Oe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void le.warn(e.join(" "))}Fe(new D("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Ke="firebase-heartbeat-store";let Ge=null;function Qe(){return Ge||(Ge=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Z(s);return r&&s.addEventListener("upgradeneeded",e=>{r(Z(s.result),e.oldVersion,e.newVersion,Z(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ke)}}).catch(e=>{throw ze.create("idb-open",{originalErrorMessage:e.message})})),Ge}async function Xe(e,t){try{const n=(await Qe()).transaction(Ke,"readwrite"),r=n.objectStore(Ke);await r.put(t,Je(e)),await n.done}catch(n){if(n instanceof x)le.warn(n.message);else{const e=ze.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});le.warn(e.message)}}}function Je(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ye{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ze(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=$e();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=$e(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),et(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),et(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=d(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function $e(){return(new Date).toISOString().substring(0,10)}class Ze{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Qe();return await t.transaction(Ke).objectStore(Ke).get(Je(e))}catch(t){if(t instanceof x)le.warn(t.message);else{const e=ze.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});le.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function et(e){return d(JSON.stringify({version:2,heartbeats:e})).length}var tt;tt="",Fe(new D("platform-logger",e=>new oe(e),"PRIVATE")),Fe(new D("heartbeat",e=>new Ye(e),"PRIVATE")),We(se,ae,tt),We(se,ae,"esm2017"),We("fire-js","");We("firebase","9.23.0","app");function nt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const it=rt,ot=new k("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new V("@firebase/auth");function at(e){if(st.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];st.error("Auth (".concat(Ve,"): ").concat(e),...n)}}function lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw dt(e,...n)}function ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dt(e,...n)}function ut(e,t,n){const r=Object.assign(Object.assign({},it()),{[t]:n});return new k("auth","Firebase",r).create(t,{appName:e.name})}function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ot.create(e,...n)}function ht(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw dt(t,...r)}}function ft(e){const t="INTERNAL ASSERTION FAILED: "+e;throw at(t),new Error(t)}function pt(e,t){e||ft(t)}function gt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function mt(){return"http:"===yt()||"https:"===yt()}function yt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function vt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(mt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class bt{constructor(e,t){this.shortDelay=e,this.longDelay=t,pt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return vt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wt(e,t){pt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class xt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},St=new bt(3e4,6e4);function Et(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _t(e,t,n,r){return Ct(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=C(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),xt.fetch()(It(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function Ct(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},kt),t);try{const t=new At(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Rt(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rt(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Rt(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Rt(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw ut(e,a,s);lt(e,a)}}catch(i){if(i instanceof x)throw i;lt(e,"network-request-failed",{message:String(i)})}}async function Tt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await _t(e,t,n,r,i);return"mfaPendingCredential"in o&&lt(e,"multi-factor-auth-required",{_serverResponse:o}),o}function It(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?wt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class At{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ct(this.auth,"network-request-failed")),St.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ct(e,t,r);return i.customData._tokenResponse=n,i}function Nt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Dt(e){return 1e3*Number(e)}function Pt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return at("JWT malformed, contained fewer than 3 sections"),null;try{const e=h(n);return e?JSON.parse(e):(at("Failed to decode base64 JWT payload"),null)}catch(i){return at("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Ot(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof x&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class jt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Lt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nt(this.lastLoginAt),this.creationTime=Nt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ot(e,async function(e,t){return _t(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ht(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=nt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Lt(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class Ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ht(e.idToken,"internal-error"),ht("undefined"!==typeof e.idToken,"internal-error"),ht("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Pt(e);return ht(t,"internal-error"),ht("undefined"!==typeof t.exp,"internal-error"),ht("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ht(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ct(e,{},async()=>{const n=C({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=It(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",xt.fetch()(o,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Ft;return n&&(ht("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(ht("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(ht("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ft,this.toJSON())}_performRefresh(){return ft("not implemented")}}function Ut(e,t){ht("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class zt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=nt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ot(this,this.stsTokenManager.getToken(this.auth,e));return ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=N(e),r=await n.getIdToken(t),i=Pt(r);ht(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Nt(Dt(i.auth_time)),issuedAtTime:Nt(Dt(i.iat)),expirationTime:Nt(Dt(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=N(e);await Mt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Mt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ot(this,async function(e,t){return _t(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;ht(v&&k,e,"internal-error");const S=Ft.fromJSON(this.name,k);ht("string"===typeof v,e,"internal-error"),Ut(u,e.name),Ut(d,e.name),ht("boolean"===typeof b,e,"internal-error"),ht("boolean"===typeof w,e,"internal-error"),Ut(h,e.name),Ut(f,e.name),Ut(p,e.name),Ut(g,e.name),Ut(m,e.name),Ut(y,e.name);const E=new zt({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ft;r.updateFromServerResponse(t);const i=new zt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Mt(i),i}}const Bt=new Map;function Vt(e){pt(e instanceof Function,"Expected a class definition");let t=Bt.get(e);return t?(pt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bt.set(e,t),t)}class Ht{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ht.type="NONE";const qt=Ht;function Wt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Kt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Wt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Wt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Kt(Vt(qt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Vt(qt);const o=Wt(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=zt._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new Kt(i,e,n)):new Kt(i,e,n)}}function Gt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Yt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zt(t))return"Blackberry";if(en(t))return"Webos";if(Xt(t))return"Safari";if((t.includes("chrome/")||Jt(t))&&!t.includes("edge/"))return"Chrome";if($t(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/firefox\//i.test(e)}function Xt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:b()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/crios\//i.test(e)}function Yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/iemobile/i.test(e)}function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/android/i.test(e)}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/blackberry/i.test(e)}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/webos/i.test(e)}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nn(){return function(){const e=b();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return tn(e)||$t(e)||en(e)||Zt(e)||/windows phone/i.test(e)||Yt(e)}function on(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gt(b());break;case"Worker":t="".concat(Gt(b()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ve,"/").concat(r)}async function sn(e,t){return _t(e,"GET","/v2/recaptchaConfig",Et(e,t))}function an(e){return void 0!==e&&void 0!==e.enterprise}class ln{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function cn(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ct("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function un(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class dn{constructor(e){this.type="recaptcha-enterprise",this.auth=gn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;an(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{sn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ln(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&an(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));cn("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function hn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new dn(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}class fn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class pn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mn(this),this.idTokenSubscription=new mn(this),this.beforeStateQueue=new fn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Kt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?N(e):null;return t&&ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Vt(e))})}async initializeRecaptchaConfig(){const e=await sn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new ln(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new dn(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vt(e)||this._popupRedirectResolver;ht(t,this,"argument-error"),this.redirectPersistenceManager=await Kt.create(this,[Vt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ht(o,this,"internal-error"),o.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=on(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(st.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];st.warn("Auth (".concat(Ve,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function gn(e){return N(e)}class mn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new A(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yn(e,t,n){const r=gn(e);ht(r._canInitEmulator,r,"emulator-config-failed"),ht(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=vn(t),{host:s,port:a}=function(e){const t=vn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:bn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:bn(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function vn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class wn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ft("not implemented")}_getIdTokenResponse(e){return ft("not implemented")}_linkToIdToken(e,t){return ft("not implemented")}_getReauthenticationResolver(e){return ft("not implemented")}}async function xn(e,t){return _t(e,"POST","/v1/accounts:update",t)}async function kn(e,t){return Tt(e,"POST","/v1/accounts:signInWithPassword",Et(e,t))}async function Sn(e,t){return _t(e,"POST","/v1/accounts:sendOobCode",Et(e,t))}class En extends wn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new En(e,t,"password")}static _fromEmailAndCode(e,t){return new En(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await hn(e,n,"signInWithPassword");return kn(e,t)}return kn(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await hn(e,n,"signInWithPassword");return kn(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",Et(e,t))}(e,{email:this._email,oobCode:this._password});default:lt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return xn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",Et(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _n(e,t){return Tt(e,"POST","/v1/accounts:signInWithIdp",Et(e,t))}class Cn extends wn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=nt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Cn(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return _n(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_n(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_n(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=C(t)}return e}}const Tn={USER_NOT_FOUND:"user-not-found"};class In extends wn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new In({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new In({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Et(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Et(e,t));if(n.temporaryProof)throw Rt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Et(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Tn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new In({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class An{constructor(e){var t,n,r,i,o,s;const a=T(I(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ht(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=T(I(e)).link,n=t?T(I(t)).deep_link_id:null,r=T(I(e)).deep_link_id;return(r?T(I(r)).link:null)||r||n||t||e}(e);try{return new An(t)}catch(n){return null}}}class Rn{constructor(){this.providerId=Rn.PROVIDER_ID}static credential(e,t){return En._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=An.parseLink(t);return ht(n,"argument-error"),En._fromEmailAndCode(e,n.code,n.tenantId)}}Rn.PROVIDER_ID="password",Rn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Nn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Dn extends Nn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pn extends Dn{constructor(){super("facebook.com")}static credential(e){return Cn._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pn.credential(t.oauthAccessToken)}catch(n){return null}}}Pn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pn.PROVIDER_ID="facebook.com";class On extends Dn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cn._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return On.credential(n,r)}catch(i){return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com",On.PROVIDER_ID="google.com";class jn extends Dn{constructor(){super("github.com")}static credential(e){return Cn._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return jn.credential(t.oauthAccessToken)}catch(n){return null}}}jn.GITHUB_SIGN_IN_METHOD="github.com",jn.PROVIDER_ID="github.com";class Ln extends Dn{constructor(){super("twitter.com")}static credential(e,t){return Cn._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ln.credential(n,r)}catch(i){return null}}}async function Mn(e,t){return Tt(e,"POST","/v1/accounts:signUp",Et(e,t))}Ln.TWITTER_SIGN_IN_METHOD="twitter.com",Ln.PROVIDER_ID="twitter.com";class Fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await zt._fromIdTokenResponse(e,n,r),o=Un(n);return new Fn({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Un(n);return new Fn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Un(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zn extends x{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zn(e,t,n,r)}}function Bn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw zn._fromErrorAndOperation(e,n,t,r);throw n})}async function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ot(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fn._forOperation(e,"link",r)}async function Hn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await Ot(e,Bn(r,i,t,e),n);ht(o.idToken,r,"internal-error");const s=Pt(o.idToken);ht(s,r,"internal-error");const{sub:a}=s;return ht(e.uid===a,r,"user-mismatch"),Fn._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&lt(r,"user-mismatch"),o}}async function qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Bn(e,r,t),o=await Fn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function Wn(e,t,n){var r;ht((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ht("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ht(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ht(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Kn(e,t){const n=N(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Wn(n.auth,r,t);const{email:i}=await async function(e,t){return Sn(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Gn(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=N(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Ot(i,async function(e,t){return _t(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}new WeakMap;const Qn="__sak";class Xn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qn,"1"),this.storage.removeItem(Qn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Jn extends Xn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=b();return Xt(e)||tn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=rn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);nn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jn.type="LOCAL";const Yn=Jn;class $n extends Xn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$n.type="SESSION";const Zn=$n;class er{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new er(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}er.receivers=[];class nr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=tr("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function rr(){return window}function ir(){return"undefined"!==typeof rr().WorkerGlobalScope&&"function"===typeof rr().importScripts}const or="firebaseLocalStorageDb",sr="firebaseLocalStorage",ar="fbase_key";class lr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cr(e,t){return e.transaction([sr],t?"readwrite":"readonly").objectStore(sr)}function ur(){const e=indexedDB.open(or,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(sr,{keyPath:ar})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(sr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(or);return new lr(e).toPromise()}(),t(await ur()))})})}async function dr(e,t,n){const r=cr(e,!0).put({[ar]:t,value:n});return new lr(r).toPromise()}function hr(e,t){const n=cr(e,!0).delete(t);return new lr(n).toPromise()}class fr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ur()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ir()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=er._getInstance(ir()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new nr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ur();return await dr(e,Qn,"1"),await hr(e,Qn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>dr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=cr(e,!1).get(t),r=await new lr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=cr(e,!1).getAll();return new lr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}fr.type="LOCAL";const pr=fr;un("rcb"),new bt(3e4,6e4);const gr="recaptcha";async function mr(e,t,n){var r;const i=await n.verify();try{let o;if(ht("string"===typeof i,e,"argument-error"),ht(n.type===gr,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){ht("enroll"===t.type,e,"internal-error");const n=await function(e,t){return _t(e,"POST","/v2/accounts/mfaEnrollment:start",Et(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ht("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;ht(n,e,"missing-multi-factor-info");const s=await function(e,t){return _t(e,"POST","/v2/accounts/mfaSignIn:start",Et(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return _t(e,"POST","/v1/accounts:sendVerificationCode",Et(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class yr{constructor(e){this.providerId=yr.PROVIDER_ID,this.auth=gn(e)}verifyPhoneNumber(e,t){return mr(this.auth,e,N(t))}static credential(e,t){return In._fromVerification(e,t)}static credentialFromResult(e){const t=e;return yr.credentialFromTaggedObject(t)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?In._fromTokenResponse(n,r):null}}function vr(e,t){return t?Vt(t):(ht(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}yr.PROVIDER_ID="phone",yr.PHONE_SIGN_IN_METHOD="phone";class br extends wn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _n(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _n(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _n(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wr(e){return qn(e.auth,new br(e),e.bypassAuthState)}function xr(e){const{auth:t,user:n}=e;return ht(n,t,"internal-error"),Hn(n,new br(e),e.bypassAuthState)}async function kr(e){const{auth:t,user:n}=e;return ht(n,t,"internal-error"),Vn(n,new br(e),e.bypassAuthState)}class Sr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wr;case"linkViaPopup":case"linkViaRedirect":return kr;case"reauthViaPopup":case"reauthViaRedirect":return xr;default:lt(this.auth,"internal-error")}}resolve(e){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Er=new bt(2e3,1e4);class _r extends Sr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,_r.currentPopupAction&&_r.currentPopupAction.cancel(),_r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ht(e,this.auth,"internal-error"),e}async onExecution(){pt(1===this.filter.length,"Popup operations only handle one event");const e=tr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ct(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Er.get())};e()}}_r.currentPopupAction=null;const Cr=new Map;class Tr extends Sr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Cr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Rr(t),r=Ar(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Cr.set(this.auth._key(),e)}return this.bypassAuthState||Cr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ir(e,t){Cr.set(e._key(),t)}function Ar(e){return Vt(e._redirectPersistence)}function Rr(e){return Wt("pendingRedirect",e.config.apiKey,e.name)}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=gn(e),i=vr(r,t),o=new Tr(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Dr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Or(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Or(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ct(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pr(e))}saveEventToCache(e){this.cachedEventUids.add(Pr(e)),this.lastProcessedEventTime=Date.now()}}function Pr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Or(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const jr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lr=/^https?/;async function Mr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return _t(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Fr(r))return}catch(n){}lt(e,"unauthorized-domain")}function Fr(e){const t=gt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Lr.test(n))return!1;if(jr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ur=new bt(3e4,6e4);function zr(){const e=rr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Br=null;function Vr(e){return Br=Br||function(e){return new Promise((t,n)=>{var r,i,o;function s(){zr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zr(),n(ct(e,"network-request-failed"))},timeout:Ur.get()})}if(null===(i=null===(r=rr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=rr().gapi)||void 0===o?void 0:o.load)){const t=un("iframefcb");return rr()[t]=()=>{gapi.load?s():n(ct(e,"network-request-failed"))},cn("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Br=null,e})}(e),Br}const Hr=new bt(5e3,15e3),qr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kr(e){const t=e.config;ht(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?wt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ve},i=Wr.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(C(r).slice(1))}const Gr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Xr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Gr),{width:r.toString(),height:i.toString(),top:o,left:s}),c=b().toLowerCase();n&&(a=Jt(c)?"_blank":n),Qt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return tn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:b())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Qr(null);const d=window.open(t||"",a,u);ht(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Qr(d)}const Jr="__/auth/handler",Yr="emulator/auth/handler",$r=encodeURIComponent("fac");async function Zr(e,t,n,r,i,o){ht(e.config.authDomain,e,"auth-domain-config-required"),ht(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ve,eventId:i};if(t instanceof Nn){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Dn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat($r,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Jr);return wt(t,Yr)}(e),"?").concat(C(a).slice(1)).concat(c)}const ei="webStorageSupport";const ti=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zn,this._completeRedirectFn=Nr,this._overrideRedirectResult=Ir}async _openPopup(e,t,n,r){var i;pt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Xr(e,await Zr(e,t,n,gt(),r),tr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){rr().location.href=e}(await Zr(e,t,n,gt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(pt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Vr(e),n=rr().gapi;return ht(n,e,"internal-error"),t.open({where:document.body,url:Kr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ct(e,"network-request-failed"),o=rr().setTimeout(()=>{r(i)},Hr.get());function s(){rr().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}(e),n=new Dr(e);return t.register("authEvent",t=>{ht(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ei,{type:ei},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ei];void 0!==i&&t(!!i),lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Mr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rn()||Xt()||tn()}};var ni="@firebase/auth",ri="0.23.2";class ii{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const oi=y("authIdTokenMaxAge")||300;let si=null;var ai;ai="Browser",Fe(new D("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ht(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:ai,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:on(ai)},c=new pn(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Fe(new D("auth-internal",e=>(e=>new ii(e))(gn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),We(ni,ri,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ai)),We(ni,ri,"esm2017");var li,ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ui={},di=di||{},hi=ci||self;function fi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function pi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var gi="closure_uid_"+(1e9*Math.random()>>>0),mi=0;function yi(e,t,n){return e.call.apply(e.bind,arguments)}function vi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function bi(e,t,n){return(bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yi:vi).apply(null,arguments)}function wi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function xi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function ki(){this.s=this.s,this.o=this.o}ki.prototype.s=!1,ki.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,gi)&&e[gi]||(e[gi]=++mi))},ki.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Si=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ei(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function _i(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(fi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ci(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ci.prototype.h=function(){this.defaultPrevented=!0};var Ti=function(){if(!hi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{hi.addEventListener("test",()=>{},t),hi.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Ii(e){return/^[\s\xa0]*$/.test(e)}function Ai(){var e=hi.navigator;return e&&(e=e.userAgent)?e:""}function Ri(e){return-1!=Ai().indexOf(e)}function Ni(e){return Ni[" "](e),e}Ni[" "]=function(){};var Di,Pi,Oi=Ri("Opera"),ji=Ri("Trident")||Ri("MSIE"),Li=Ri("Edge"),Mi=Li||ji,Fi=Ri("Gecko")&&!(-1!=Ai().toLowerCase().indexOf("webkit")&&!Ri("Edge"))&&!(Ri("Trident")||Ri("MSIE"))&&!Ri("Edge"),Ui=-1!=Ai().toLowerCase().indexOf("webkit")&&!Ri("Edge");function zi(){var e=hi.document;return e?e.documentMode:void 0}e:{var Bi="",Vi=function(){var e=Ai();return Fi?/rv:([^\);]+)(\)|;)/.exec(e):Li?/Edge\/([\d\.]+)/.exec(e):ji?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ui?/WebKit\/(\S+)/.exec(e):Oi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vi&&(Bi=Vi?Vi[1]:""),ji){var Hi=zi();if(null!=Hi&&Hi>parseFloat(Bi)){Di=String(Hi);break e}}Di=Bi}if(hi.document&&ji){var qi=zi();Pi=qi||(parseInt(Di,10)||void 0)}else Pi=void 0;var Wi=Pi;function Ki(e,t){if(Ci.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fi){e:{try{Ni(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ki.$.h.call(this)}}xi(Ki,Ci);var Gi={2:"touch",3:"pen",4:"mouse"};Ki.prototype.h=function(){Ki.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Qi="closure_listenable_"+(1e6*Math.random()|0),Xi=0;function Ji(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Xi,this.fa=this.ia=!1}function Yi(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function $i(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Zi(e){const t={};for(const n in e)t[n]=e[n];return t}const eo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function to(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<eo.length;t++)n=eo[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function no(e){this.src=e,this.g={},this.h=0}function ro(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Si(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Yi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function io(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}no.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=io(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Ji(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var oo="closure_lm_"+(1e6*Math.random()|0),so={};function ao(e,t,n,r,i){if(r&&r.once)return co(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ao(e,t[o],n,r,i);return null}return n=yo(n),e&&e[Qi]?e.O(t,n,pi(r)?!!r.capture:!!r,i):lo(e,t,n,!1,r,i)}function lo(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=pi(i)?!!i.capture:!!i,a=go(e);if(a||(e[oo]=a=new no(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=po;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ti||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function co(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)co(e,t[o],n,r,i);return null}return n=yo(n),e&&e[Qi]?e.P(t,n,pi(r)?!!r.capture:!!r,i):lo(e,t,n,!0,r,i)}function uo(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)uo(e,t[o],n,r,i);else r=pi(r)?!!r.capture:!!r,n=yo(n),e&&e[Qi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=io(o=e.g[t],n,r,i))&&(Yi(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=go(e))&&(t=e.g[t.toString()],e=-1,t&&(e=io(t,n,r,i)),(n=-1<e?t[e]:null)&&ho(n))}function ho(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Qi])ro(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=go(t))?(ro(n,e),0==n.h&&(n.src=null,t[oo]=null)):Yi(e)}}}function fo(e){return e in so?so[e]:so[e]="on"+e}function po(e,t){if(e.fa)e=!0;else{t=new Ki(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ho(e),e=n.call(r,t)}return e}function go(e){return(e=e[oo])instanceof no?e:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function yo(e){return"function"===typeof e?e:(e[mo]||(e[mo]=function(t){return e.handleEvent(t)}),e[mo])}function vo(){ki.call(this),this.i=new no(this),this.S=this,this.J=null}function bo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ci(t,e);else if(t instanceof Ci)t.target=t.target||e;else{var i=t;to(t=new Ci(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=wo(s,r,!0,t)&&i}if(i=wo(s=t.g=e,r,!0,t)&&i,i=wo(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=wo(s=t.g=n[o],r,!1,t)&&i}function wo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&ro(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}xi(vo,ki),vo.prototype[Qi]=!0,vo.prototype.removeEventListener=function(e,t,n,r){uo(this,e,t,n,r)},vo.prototype.N=function(){if(vo.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yi(n[r]);delete t.g[e],t.h--}}this.J=null},vo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},vo.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var xo=hi.JSON.stringify;function ko(){var e=Ao;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var So=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Eo,e=>e.reset());class Eo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _o(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Co(e){hi.setTimeout(()=>{throw e},0)}let To,Io=!1,Ao=new class{constructor(){this.h=this.g=null}add(e,t){const n=So.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ro=()=>{const e=hi.Promise.resolve(void 0);To=()=>{e.then(No)}};var No=()=>{for(var e;e=ko();){try{e.h.call(e.g)}catch(n){Co(n)}var t=So;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Io=!1};function Do(e,t){vo.call(this),this.h=e||1,this.g=t||hi,this.j=bi(this.qb,this),this.l=Date.now()}function Po(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Oo(e,t,n){if("function"===typeof e)n&&(e=bi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=bi(e.handleEvent,e)}return 2147483647<Number(t)?-1:hi.setTimeout(e,t||0)}function jo(e){e.g=Oo(()=>{e.g=null,e.i&&(e.i=!1,jo(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}xi(Do,vo),(li=Do.prototype).ga=!1,li.T=null,li.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bo(this,"tick"),this.ga&&(Po(this),this.start()))}},li.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},li.N=function(){Do.$.N.call(this),Po(this),delete this.g};class Lo extends ki{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jo(this)}N(){super.N(),this.g&&(hi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(e){ki.call(this),this.h=e,this.g={}}xi(Mo,ki);var Fo=[];function Uo(e,t,n,r){Array.isArray(n)||(n&&(Fo[0]=n.toString()),n=Fo);for(var i=0;i<n.length;i++){var o=ao(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function zo(e){$i(e.g,function(e,t){this.g.hasOwnProperty(t)&&ho(e)},e),e.g={}}function Bo(){this.g=!0}function Vo(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return xo(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Mo.prototype.N=function(){Mo.$.N.call(this),zo(this)},Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bo.prototype.Ea=function(){this.g=!1},Bo.prototype.info=function(){};var Ho={},qo=null;function Wo(){return qo=qo||new vo}function Ko(e){Ci.call(this,Ho.Ta,e)}function Go(e){const t=Wo();bo(t,new Ko(t))}function Qo(e,t){Ci.call(this,Ho.STAT_EVENT,e),this.stat=t}function Xo(e){const t=Wo();bo(t,new Qo(t,e))}function Jo(e,t){Ci.call(this,Ho.Ua,e),this.size=t}function Yo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return hi.setTimeout(function(){e()},t)}Ho.Ta="serverreachability",xi(Ko,Ci),Ho.STAT_EVENT="statevent",xi(Qo,Ci),Ho.Ua="timingevent",xi(Jo,Ci);var $o={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function es(){}function ts(e){return e.h||(e.h=e.i())}function ns(){}es.prototype.h=null;var rs,is={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function os(){Ci.call(this,"d")}function ss(){Ci.call(this,"c")}function as(){}function ls(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Mo(this),this.P=us,e=Mi?125:void 0,this.V=new Do(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cs}function cs(){this.i=null,this.g="",this.h=!1}xi(os,Ci),xi(ss,Ci),xi(as,es),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},rs=new as;var us=45e3,ds={},hs={};function fs(e,t,n){e.L=1,e.v=Ds(Ts(t)),e.s=n,e.S=!0,ps(e,null)}function ps(e,t){e.G=Date.now(),vs(e),e.A=Ts(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ws(n.i,"t",r),e.C=0,n=e.l.J,e.h=new cs,e.g=Ka(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Lo(bi(e.Pa,e,e.g),e.O)),Uo(e.U,e.g,"readystatechange",e.nb),t=e.I?Zi(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Go(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.W,e.s)}function gs(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function ms(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ys(e,n),r==hs){4==t&&(e.o=4,Xo(14),i=!1),Vo(e.j,e.m,null,"[Incomplete Response]");break}if(r==ds){e.o=4,Xo(15),Vo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Vo(e.j,e.m,r,null),Ss(e,r)}gs(e)&&r!=hs&&r!=ds&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Xo(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fa(t),t.M=!0,Xo(11))):(Vo(e.j,e.m,n,"[Invalid Chunked Response]"),ks(e),xs(e))}function ys(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?hs:(n=Number(t.substring(n,r)),isNaN(n)?ds:(r+=1)+n>t.length?hs:(t=t.slice(r,r+n),e.C=r+n,t))}function vs(e){e.Y=Date.now()+e.P,bs(e,e.P)}function bs(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Yo(bi(e.lb,e),t)}function ws(e){e.B&&(hi.clearTimeout(e.B),e.B=null)}function xs(e){0==e.l.H||e.J||Ba(e.l,e)}function ks(e){ws(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Po(e.V),zo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ss(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$s(n.i,e)))if(!e.K&&$s(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;za(n),Ra(n)}Ma(n),Xo(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Yo(bi(n.ib,n),6e3));if(1>=Ys(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ha(n,11)}else if((e.K||n.g==e)&&za(n),!Ii(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Zs(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ns(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Wa(r,r.J?r.pa:null,r.Y),s.K){ea(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(ws(a),vs(a)),r.g=s}else La(r);0<n.j.length&&Da(n)}else"stop"!=c[0]&&"close"!=c[0]||Ha(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ha(n,7):Aa(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Go()}catch(c){}}function Es(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(fi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(fi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(fi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(li=ls.prototype).setTimeout=function(e){this.P=e},li.nb=function(e){e=e.target;const t=this.M;t&&3==Sa(e)?t.l():this.Pa(e)},li.Pa=function(e){try{if(e==this.g)e:{const u=Sa(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Mi||this.g&&(this.h.h||this.g.ja()||Ea(this.g)))){this.J||4!=u||7==t||Go(),ws(this);var n=this.g.da();this.ca=n;t:if(gs(this)){var r=Ea(this.g);e="";var i=r.length,o=4==Sa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ks(this),xs(this);var s="";break t}this.h.i=new hi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ii(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Xo(12),ks(this),xs(this);break e}Vo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ss(this,n)}this.S?(ms(this,u,s),Mi&&this.i&&3==u&&(Uo(this.U,this.V,"tick",this.mb),this.V.start())):(Vo(this.j,this.m,s,null),Ss(this,s)),4==u&&ks(this),this.i&&!this.J&&(4==u?Ba(this.l,this):(this.i=!1,vs(this)))}else(function(e){const t={};e=(e.g&&2<=Sa(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ii(e[r]))continue;var n=_o(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,Xo(12)):(this.o=0,Xo(13)),ks(this),xs(this)}}}catch(u){}},li.mb=function(){if(this.g){var e=Sa(this.g),t=this.g.ja();this.C<t.length&&(ws(this),ms(this,e,t),this.i&&4!=e&&vs(this))}},li.cancel=function(){this.J=!0,ks(this)},li.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Go(),Xo(17)),ks(this),this.o=2,xs(this)):bs(this,this.Y-e)};var _s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cs(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Cs){this.h=e.h,Is(this,e.j),this.s=e.s,this.g=e.g,As(this,e.m),this.l=e.l;var t=e.i,n=new Bs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Rs(this,n),this.o=e.o}else e&&(t=String(e).match(_s))?(this.h=!1,Is(this,t[1]||"",!0),this.s=Ps(t[2]||""),this.g=Ps(t[3]||"",!0),As(this,t[4]),this.l=Ps(t[5]||"",!0),Rs(this,t[6]||"",!0),this.o=Ps(t[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}function Ts(e){return new Cs(e)}function Is(e,t,n){e.j=n?Ps(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function As(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Rs(e,t,n){t instanceof Bs?(e.i=t,function(e,t){t&&!e.j&&(Vs(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Hs(this,t),Ws(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Os(t,Us)),e.i=new Bs(t,e.h))}function Ns(e,t,n){e.i.set(t,n)}function Ds(e){return Ns(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ps(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Os(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,js),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function js(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Cs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Os(t,Ls,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Os(t,Ls,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Os(n,"/"==n.charAt(0)?Fs:Ms,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Os(n,zs)),e.join("")};var Ls=/[#\/\?@]/g,Ms=/[#\?:]/g,Fs=/[#\?]/g,Us=/[#\?@]/g,zs=/#/g;function Bs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Hs(e,t){Vs(e),t=Ks(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function qs(e,t){return Vs(e),t=Ks(e,t),e.g.has(t)}function Ws(e,t,n){Hs(e,t),0<n.length&&(e.i=null,e.g.set(Ks(e,t),Ei(n)),e.h+=n.length)}function Ks(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(li=Bs.prototype).add=function(e,t){Vs(this),this.i=null,e=Ks(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},li.forEach=function(e,t){Vs(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},li.ta=function(){Vs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},li.Z=function(e){Vs(this);let t=[];if("string"===typeof e)qs(this,e)&&(t=t.concat(this.g.get(Ks(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},li.set=function(e,t){return Vs(this),this.i=null,qs(this,e=Ks(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},li.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},li.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Gs=class{constructor(e,t){this.g=e,this.map=t}};function Qs(e){this.l=e||Xs,hi.PerformanceNavigationTiming?e=0<(e=hi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(hi.g&&hi.g.Ka&&hi.g.Ka()&&hi.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xs=10;function Js(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ys(e){return e.h?1:e.g?e.g.size:0}function $s(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zs(e,t){e.g?e.g.add(t):e.h=t}function ea(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ta(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ei(e.i)}Qs.prototype.cancel=function(){if(this.i=ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var na,ra=class{stringify(e){return hi.JSON.stringify(e,void 0)}parse(e){return hi.JSON.parse(e,void 0)}};function ia(){this.g=new ra}function oa(e,t,n){const r=n||"";try{Es(e,function(e,n){let i=e;pi(e)&&(i=xo(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function aa(e){this.l=e.fc||null,this.j=e.ob||!1}function la(e,t){vo.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ca,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xi(aa,es),aa.prototype.g=function(){return new la(this.l,this.j)},aa.prototype.i=(na={},function(){return na}),xi(la,vo);var ca=0;function ua(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function da(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ha(e)}function ha(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(li=la.prototype).open=function(e,t){if(this.readyState!=ca)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ha(this)},li.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||hi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},li.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,da(this)),this.readyState=ca},li.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof hi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ua(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},li.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?da(this):ha(this),3==this.readyState&&ua(this)}},li.Za=function(e){this.g&&(this.response=this.responseText=e,da(this))},li.Ya=function(e){this.g&&(this.response=e,da(this))},li.ka=function(){this.g&&da(this)},li.setRequestHeader=function(e,t){this.v.append(e,t)},li.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},li.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(la.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fa=hi.JSON.parse;function pa(e){vo.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ga,this.L=this.M=!1}xi(pa,vo);var ga="",ma=/^https?$/i,ya=["POST","PUT"];function va(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ba(e),xa(e)}function ba(e){e.F||(e.F=!0,bo(e,"complete"),bo(e,"error"))}function wa(e){if(e.h&&"undefined"!=typeof di&&(!e.C[1]||4!=Sa(e)||2!=e.da()))if(e.v&&4==Sa(e))Oo(e.La,0,e);else if(bo(e,"readystatechange"),4==Sa(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(_s)[1]||null;!i&&hi.self&&hi.self.location&&(i=hi.self.location.protocol.slice(0,-1)),r=!ma.test(i?i.toLowerCase():"")}n=r}if(n)bo(e,"complete"),bo(e,"success");else{e.m=6;try{var o=2<Sa(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",ba(e)}}finally{xa(e)}}}function xa(e,t){if(e.g){ka(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||bo(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ka(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(hi.clearTimeout(e.A),e.A=null)}function Sa(e){return e.g?e.g.readyState:0}function Ea(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ga:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Il){return null}}function _a(e){let t="";return $i(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ca(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_a(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ns(e,t,n))}function Ta(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ia(e){this.Ga=0,this.j=[],this.l=new Bo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ta("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ta("baseRetryDelayMs",5e3,e),this.hb=Ta("retryDelaySeedMs",1e4,e),this.eb=Ta("forwardChannelMaxRetries",2,e),this.xa=Ta("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Qs(e&&e.concurrentRequestLimit),this.Ja=new ia,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Aa(e){if(Na(e),3==e.H){var t=e.W++,n=Ts(e.I);if(Ns(n,"SID",e.K),Ns(n,"RID",t),Ns(n,"TYPE","terminate"),Oa(e,n),(t=new ls(e,e.l,t)).L=2,t.v=Ds(Ts(n)),n=!1,hi.navigator&&hi.navigator.sendBeacon)try{n=hi.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&hi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ka(t.l,null),t.g.ha(t.v)),t.G=Date.now(),vs(t)}qa(e)}function Ra(e){e.g&&(Fa(e),e.g.cancel(),e.g=null)}function Na(e){Ra(e),e.u&&(hi.clearTimeout(e.u),e.u=null),za(e),e.i.cancel(),e.m&&("number"===typeof e.m&&hi.clearTimeout(e.m),e.m=null)}function Da(e){if(!Js(e.i)&&!e.m){e.m=!0;var t=e.Na;To||Ro(),Io||(To(),Io=!0),Ao.add(t,e),e.C=0}}function Pa(e,t){var n;n=t?t.m:e.W++;const r=Ts(e.I);Ns(r,"SID",e.K),Ns(r,"RID",n),Ns(r,"AID",e.V),Oa(e,r),e.o&&e.s&&Ca(r,e.o,e.s),n=new ls(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ja(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Zs(e.i,n),fs(n,r,t)}function Oa(e,t){e.na&&$i(e.na,function(e,n){Ns(t,n,e)}),e.h&&Es({},function(e,n){Ns(t,n,e)})}function ja(e,t,n){n=Math.min(e.j.length,n);var r=e.h?bi(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{oa(a,e,"req"+n+"_")}catch(Ul){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function La(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;To||Ro(),Io||(To(),Io=!0),Ao.add(t,e),e.A=0}}function Ma(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Yo(bi(e.Ma,e),Va(e,e.A)),e.A++,!0)}function Fa(e){null!=e.B&&(hi.clearTimeout(e.B),e.B=null)}function Ua(e){e.g=new ls(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ts(e.wa);Ns(t,"RID","rpc"),Ns(t,"SID",e.K),Ns(t,"AID",e.V),Ns(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ns(t,"TO",e.qa),Ns(t,"TYPE","xmlhttp"),Oa(e,t),e.o&&e.s&&Ca(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ds(Ts(t)),n.s=null,n.S=!0,ps(n,e)}function za(e){null!=e.v&&(hi.clearTimeout(e.v),e.v=null)}function Ba(e,t){var n=null;if(e.g==t){za(e),Fa(e),e.g=null;var r=2}else{if(!$s(e.i,t))return;n=t.F,ea(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;bo(r=Wo(),new Jo(r,n)),Da(e)}else La(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ys(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Yo(bi(e.Na,e,t),Va(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ma(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ha(e,5);break;case 4:Ha(e,10);break;case 3:Ha(e,6);break;default:Ha(e,2)}}function Va(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ha(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=bi(e.pb,e);n||(n=new Cs("//www.google.com/images/cleardot.gif"),hi.location&&"http"==hi.location.protocol||Is(n,"https"),Ds(n)),function(e,t){const n=new Bo;if(hi.Image){const r=new Image;r.onload=wi(sa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=wi(sa,n,r,"TestLoadImage: error",!1,t),r.onabort=wi(sa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=wi(sa,n,r,"TestLoadImage: timeout",!1,t),hi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Xo(2);e.H=0,e.h&&e.h.za(t),qa(e),Na(e)}function qa(e){if(e.H=0,e.ma=[],e.h){const t=ta(e.i);0==t.length&&0==e.j.length||(_i(e.ma,t),_i(e.ma,e.j),e.i.i.length=0,Ei(e.j),e.j.length=0),e.h.ya()}}function Wa(e,t,n){var r=n instanceof Cs?Ts(n):new Cs(n);if(""!=r.g)t&&(r.g=t+"."+r.g),As(r,r.m);else{var i=hi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Cs(null);r&&Is(o,r),t&&(o.g=t),i&&As(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Ns(r,n,t),Ns(r,"VER",e.ra),Oa(e,r),r}function Ka(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new pa(new aa({ob:!0})):new pa(e.va)).Oa(e.J),t}function Ga(){}function Qa(){if(ji&&!(10<=Number(Wi)))throw Error("Environmental error: no available transport.")}function Xa(e,t){vo.call(this),this.g=new Ia(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ii(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ii(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $a(this)}function Ja(e){os.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ya(){ss.call(this),this.status=1}function $a(e){this.g=e}function Za(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function el(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function tl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(li=pa.prototype).Oa=function(e){this.M=e},li.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rs.g(),this.C=this.u?ts(this.u):ts(rs),this.g.onreadystatechange=bi(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void va(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=hi.FormData&&e instanceof hi.FormData,!(0<=Si(ya,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ka(this),0<this.B&&((this.L=function(e){return ji&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bi(this.ua,this)):this.A=Oo(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){va(this,o)}},li.ua=function(){"undefined"!=typeof di&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bo(this,"timeout"),this.abort(8))},li.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,bo(this,"complete"),bo(this,"abort"),xa(this))},li.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xa(this,!0)),pa.$.N.call(this)},li.La=function(){this.s||(this.G||this.v||this.l?wa(this):this.kb())},li.kb=function(){wa(this)},li.isActive=function(){return!!this.g},li.da=function(){try{return 2<Sa(this)?this.g.status:-1}catch(na){return-1}},li.ja=function(){try{return this.g?this.g.responseText:""}catch(na){return""}},li.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fa(t)}},li.Ia=function(){return this.m},li.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(li=Ia.prototype).ra=8,li.H=1,li.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ls(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Zi(o),to(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ja(this,i,t),Ns(n=Ts(this.I),"RID",e),Ns(n,"CVER",22),this.F&&Ns(n,"X-HTTP-Session-Id",this.F),Oa(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(_a(o)))+"&"+t:this.o&&Ca(n,this.o,o)),Zs(this.i,i),this.bb&&Ns(n,"TYPE","init"),this.P?(Ns(n,"$req",t),Ns(n,"SID","null"),i.aa=!0,fs(i,n,null)):fs(i,n,t),this.H=2}}else 3==this.H&&(e?Pa(this,e):0==this.j.length||Js(this.i)||Pa(this))},li.Ma=function(){if(this.u=null,Ua(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Yo(bi(this.jb,this),e)}},li.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xo(10),Ra(this),Ua(this))},li.ib=function(){null!=this.v&&(this.v=null,Ra(this),Ma(this),Xo(19))},li.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Xo(2)):(this.l.info("Failed to ping google.com"),Xo(1))},li.isActive=function(){return!!this.h&&this.h.isActive(this)},(li=Ga.prototype).Ba=function(){},li.Aa=function(){},li.za=function(){},li.ya=function(){},li.isActive=function(){return!0},li.Va=function(){},Qa.prototype.g=function(e,t){return new Xa(e,t)},xi(Xa,vo),Xa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Xo(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Wa(e,null,e.Y),Da(e)},Xa.prototype.close=function(){Aa(this.g)},Xa.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=xo(e),e=n);t.j.push(new Gs(t.fb++,e)),3==t.H&&Da(t)},Xa.prototype.N=function(){this.g.h=null,delete this.j,Aa(this.g),delete this.g,Xa.$.N.call(this)},xi(Ja,os),xi(Ya,ss),xi($a,Ga),$a.prototype.Ba=function(){bo(this.g,"a")},$a.prototype.Aa=function(e){bo(this.g,new Ja(e))},$a.prototype.za=function(e){bo(this.g,new Ya)},$a.prototype.ya=function(){bo(this.g,"b")},xi(Za,function(){this.blockSize=-1}),Za.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Za.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)el(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){el(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){el(this,r),i=0;break}}this.h=i,this.i+=t},Za.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var nl={};function rl(e){return-128<=e&&128>e?function(e,t){var n=nl;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new tl([0|e],0>e?-1:0)}):new tl([0|e],0>e?-1:0)}function il(e){if(isNaN(e)||!isFinite(e))return sl;if(0>e)return dl(il(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ol;return new tl(t,0)}var ol=4294967296,sl=rl(0),al=rl(1),ll=rl(16777216);function cl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ul(e){return-1==e.h}function dl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new tl(n,~e.h).add(al)}function hl(e,t){return e.add(dl(t))}function fl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function pl(e,t){this.g=e,this.h=t}function gl(e,t){if(cl(t))throw Error("division by zero");if(cl(e))return new pl(sl,sl);if(ul(e))return t=gl(dl(e),t),new pl(dl(t.g),dl(t.h));if(ul(t))return t=gl(e,dl(t)),new pl(dl(t.g),t.h);if(30<e.g.length){if(ul(e)||ul(t))throw Error("slowDivide_ only works with positive integers.");for(var n=al,r=t;0>=r.X(e);)n=ml(n),r=ml(r);var i=yl(n,1),o=yl(r,1);for(r=yl(r,2),n=yl(n,2);!cl(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=yl(r,1),n=yl(n,1)}return t=hl(e,i.R(t)),new pl(i,t)}for(i=sl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=il(n)).R(t);ul(s)||0<s.X(e);)s=(o=il(n-=r)).R(t);cl(o)&&(o=al),i=i.add(o),e=hl(e,s)}return new pl(i,e)}function ml(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new tl(n,e.h)}function yl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new tl(i,e.h)}(li=tl.prototype).ea=function(){if(ul(this))return-dl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ol+r)*t,t*=ol}return e},li.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(cl(this))return"0";if(ul(this))return"-"+dl(this).toString(e);for(var t=il(Math.pow(e,6)),n=this,r="";;){var i=gl(n,t).g,o=((0<(n=hl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(cl(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},li.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},li.X=function(e){return ul(e=hl(this,e))?-1:cl(e)?0:1},li.abs=function(){return ul(this)?dl(this):this},li.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new tl(n,-2147483648&n[n.length-1]?-1:0)},li.R=function(e){if(cl(this)||cl(e))return sl;if(ul(this))return ul(e)?dl(this).R(dl(e)):dl(dl(this).R(e));if(ul(e))return dl(this.R(dl(e)));if(0>this.X(ll)&&0>e.X(ll))return il(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,fl(n,2*r+2*i),n[2*r+2*i+1]+=o*l,fl(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,fl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,fl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new tl(n,0)},li.gb=function(e){return gl(this,e).h},li.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new tl(n,this.h&e.h)},li.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new tl(n,this.h|e.h)},li.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new tl(n,this.h^e.h)},Qa.prototype.createWebChannel=Qa.prototype.g,Xa.prototype.send=Xa.prototype.u,Xa.prototype.open=Xa.prototype.m,Xa.prototype.close=Xa.prototype.close,$o.NO_ERROR=0,$o.TIMEOUT=8,$o.HTTP_ERROR=6,Zo.COMPLETE="complete",ns.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",vo.prototype.listen=vo.prototype.O,pa.prototype.listenOnce=pa.prototype.P,pa.prototype.getLastError=pa.prototype.Sa,pa.prototype.getLastErrorCode=pa.prototype.Ia,pa.prototype.getStatus=pa.prototype.da,pa.prototype.getResponseJson=pa.prototype.Wa,pa.prototype.getResponseText=pa.prototype.ja,pa.prototype.send=pa.prototype.ha,pa.prototype.setWithCredentials=pa.prototype.Oa,Za.prototype.digest=Za.prototype.l,Za.prototype.reset=Za.prototype.reset,Za.prototype.update=Za.prototype.j,tl.prototype.add=tl.prototype.add,tl.prototype.multiply=tl.prototype.R,tl.prototype.modulo=tl.prototype.gb,tl.prototype.compare=tl.prototype.X,tl.prototype.toNumber=tl.prototype.ea,tl.prototype.toString=tl.prototype.toString,tl.prototype.getBits=tl.prototype.D,tl.fromNumber=il,tl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return dl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=il(Math.pow(n,8)),i=sl,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=il(Math.pow(n,s)),i=i.R(s).add(il(a))):i=(i=i.R(r)).add(il(a))}return i};var vl=ui.createWebChannelTransport=function(){return new Qa},bl=ui.getStatEventTarget=function(){return Wo()},wl=ui.ErrorCode=$o,xl=ui.EventType=Zo,kl=ui.Event=Ho,Sl=ui.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},El=ui.FetchXmlHttpFactory=aa,_l=ui.WebChannel=ns,Cl=ui.XhrIo=pa,Tl=(ui.Md5=Za,ui.Integer=tl);const Il="@firebase/firestore";class Al{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Al.UNAUTHENTICATED=new Al(null),Al.GOOGLE_CREDENTIALS=new Al("google-credentials-uid"),Al.FIRST_PARTY=new Al("first-party-uid"),Al.MOCK_USER=new Al("mock-user");let Rl="9.23.0";const Nl=new V("@firebase/firestore");function Dl(){return Nl.logLevel}function Pl(e){if(Nl.logLevel<=M.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ll);Nl.debug("Firestore (".concat(Rl,"): ").concat(e),...i)}}function Ol(e){if(Nl.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ll);Nl.error("Firestore (".concat(Rl,"): ").concat(e),...i)}}function jl(e){if(Nl.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ll);Nl.warn("Firestore (".concat(Rl,"): ").concat(e),...i)}}function Ll(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Rl,") INTERNAL ASSERTION FAILED: ")+e;throw Ol(t),new Error(t)}function Fl(e,t){e||Ml()}function Ul(e,t){return e}const zl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bl extends x{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ql{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Al.UNAUTHENTICATED))}shutdown(){}}class Wl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kl{constructor(e){this.t=e,this.currentUser=Al.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vl,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{Pl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Pl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Pl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Fl("string"==typeof t.accessToken),new Hl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Fl(null===e||"string"==typeof e),new Al(e)}}class Gl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Al.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ql{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Gl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Al.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jl{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Pl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Pl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Pl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Pl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Fl("string"==typeof e.token),this.T=e.token,new Xl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class $l{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Yl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Zl(e,t){return e<t?-1:e>t?1:0}function ec(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class tc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tc.fromMillis(Date.now())}static fromDate(e){return tc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new tc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zl(this.nanoseconds,e.nanoseconds):Zl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nc(e)}static min(){return new nc(new tc(0,0))}static max(){return new nc(new tc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ml(),void 0===n?n=e.length-t:n>e.length-t&&Ml(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===rc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ic extends rc{construct(e,t,n){return new ic(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Bl(zl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ic(e)}static emptyPath(){return new ic([])}}const oc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sc extends rc{construct(e,t,n){return new sc(e,t,n)}static isValidIdentifier(e){return oc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new sc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Bl(zl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Bl(zl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Bl(zl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Bl(zl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sc(t)}static emptyPath(){return new sc([])}}class ac{constructor(e){this.path=e}static fromPath(e){return new ac(ic.fromString(e))}static fromName(e){return new ac(ic.fromString(e).popFirst(5))}static empty(){return new ac(ic.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ic.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ic.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ac(new ic(e.slice()))}}class lc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}lc.UNKNOWN_ID=-1;function cc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=nc.fromTimestamp(1e9===r?new tc(n+1,0):new tc(n,r));return new dc(i,ac.empty(),t)}function uc(e){return new dc(e.readTime,e.key,-1)}class dc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new dc(nc.min(),ac.empty(),-1)}static max(){return new dc(nc.max(),ac.empty(),-1)}}function hc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ac.comparator(e.documentKey,t.documentKey),0!==n?n:Zl(e.largestBatchId,t.largestBatchId))}const fc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function gc(e){if(e.code!==zl.FAILED_PRECONDITION||e.message!==fc)throw e;Pl("LocalStore","Unexpectedly lost primary lease")}class mc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ml(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof mc?t:mc.resolve(t)}catch(e){return mc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):mc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):mc.reject(t)}static resolve(e){return new mc((t,n)=>{t(e)})}static reject(e){return new mc((t,n)=>{n(e)})}static waitFor(e){return new mc((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=mc.resolve(!1);for(const n of e)t=t.next(e=>e?mc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new mc((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new mc((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function yc(e){return"IndexedDbTransactionError"===e.name}class vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function bc(e){return null==e}function wc(e){return 0===e&&1/e==-1/0}function xc(e){return"number"==typeof e&&Number.isInteger(e)&&!wc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}vc.ct=-1;const kc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ec=Sc;function _c(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ic{constructor(e,t){this.comparator=e,this.root=t||Rc.EMPTY}insert(e,t){return new Ic(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rc.BLACK,null,null))}remove(e){return new Ic(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ac(this.root,e,this.comparator,!0)}}class Ac{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Rc.RED,this.left=null!=r?r:Rc.EMPTY,this.right=null!=i?i:Rc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Rc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Rc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Rc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ml();if(this.right.isRed())throw Ml();const e=this.left.check();if(e!==this.right.check())throw Ml();return e+(this.isRed()?0:1)}}Rc.EMPTY=null,Rc.RED=!0,Rc.BLACK=!1,Rc.EMPTY=new class{constructor(){this.size=0}get key(){throw Ml()}get value(){throw Ml()}get color(){throw Ml()}get left(){throw Ml()}get right(){throw Ml()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Rc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nc{constructor(e){this.comparator=e,this.data=new Ic(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dc(this.data.getIterator())}getIteratorFrom(e){return new Dc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Nc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nc(this.comparator);return t.data=e,t}}class Dc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pc{constructor(e){this.fields=e,e.sort(sc.comparator)}static empty(){return new Pc([])}unionWith(e){let t=new Nc(sc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Oc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Oc("Invalid base64 string: "+e):e}}(e);return new jc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new jc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jc.EMPTY_BYTE_STRING=new jc("");const Lc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(e){if(Fl(!!e),"string"==typeof e){let t=0;const n=Lc.exec(e);if(Fl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fc(e.seconds),nanos:Fc(e.nanos)}}function Fc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Uc(e){return"string"==typeof e?jc.fromBase64String(e):jc.fromUint8Array(e)}function zc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bc(e){const t=e.mapValue.fields.__previous_value__;return zc(t)?Bc(t):t}function Vc(e){const t=Mc(e.mapValue.fields.__local_write_time__.timestampValue);return new tc(t.seconds,t.nanos)}class Hc{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class qc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}const Wc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zc(e)?4:ru(e)?9007199254740991:10:Ml()}function Gc(e,t){if(e===t)return!0;const n=Kc(e);if(n!==Kc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vc(e).isEqual(Vc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Mc(e.timestampValue),r=Mc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Uc(e.bytesValue).isEqual(Uc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fc(e.geoPointValue.latitude)===Fc(t.geoPointValue.latitude)&&Fc(e.geoPointValue.longitude)===Fc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fc(e.integerValue)===Fc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fc(e.doubleValue),r=Fc(t.doubleValue);return n===r?wc(n)===wc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ec(e.arrayValue.values||[],t.arrayValue.values||[],Gc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_c(n)!==_c(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gc(n[i],r[i])))return!1;return!0}(e,t);default:return Ml()}}function Qc(e,t){return void 0!==(e.values||[]).find(e=>Gc(e,t))}function Xc(e,t){if(e===t)return 0;const n=Kc(e),r=Kc(t);if(n!==r)return Zl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fc(e.integerValue||e.doubleValue),r=Fc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jc(e.timestampValue,t.timestampValue);case 4:return Jc(Vc(e),Vc(t));case 5:return Zl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Uc(e),r=Uc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Zl(n[i],r[i]);if(0!==e)return e}return Zl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zl(Fc(e.latitude),Fc(t.latitude));return 0!==n?n:Zl(Fc(e.longitude),Fc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Xc(n[i],r[i]);if(e)return e}return Zl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Wc.mapValue&&t===Wc.mapValue)return 0;if(e===Wc.mapValue)return 1;if(t===Wc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Zl(r[s],o[s]);if(0!==e)return e;const t=Xc(n[r[s]],i[o[s]]);if(0!==t)return t}return Zl(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ml()}}function Jc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zl(e,t);const n=Mc(e),r=Mc(t),i=Zl(n.seconds,r.seconds);return 0!==i?i:Zl(n.nanos,r.nanos)}function Yc(e){return $c(e)}function $c(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Mc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Uc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ac.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$c(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat($c(e.fields[i]));return n+"}"}(e.mapValue):Ml();var t,n}function Zc(e){return!!e&&"integerValue"in e}function eu(e){return!!e&&"arrayValue"in e}function tu(e){return!!e&&"mapValue"in e}function nu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=nu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ru(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class iu{constructor(e){this.value=e}static empty(){return new iu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!tu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(t)}setAll(e){let t=sc.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=nu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];tu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Cc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new iu(nu(this.value))}}function ou(e){const t=[];return Cc(e.fields,(e,n)=>{const r=new sc([e]);if(tu(n)){const e=ou(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Pc(t)}class su{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new su(e,0,nc.min(),nc.min(),nc.min(),iu.empty(),0)}static newFoundDocument(e,t,n,r){return new su(e,1,t,nc.min(),n,r,0)}static newNoDocument(e,t){return new su(e,2,t,nc.min(),nc.min(),iu.empty(),0)}static newUnknownDocument(e,t){return new su(e,3,t,nc.min(),nc.min(),iu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=iu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=iu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof su&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new su(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class au{constructor(e,t){this.position=e,this.inclusive=t}}function lu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?ac.comparator(ac.fromName(s.referenceValue),n.key):Xc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function cu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gc(e.position[n],t.position[n]))return!1;return!0}class uu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function du(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hu{}class fu extends hu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xu(e,t,n):"array-contains"===t?new _u(e,n):"in"===t?new Cu(e,n):"not-in"===t?new Tu(e,n):"array-contains-any"===t?new Iu(e,n):new fu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ku(e,n):new Su(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xc(t,this.value)):null!==t&&Kc(this.value)===Kc(t)&&this.matchesComparison(Xc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ml()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pu extends hu{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new pu(e,t)}matches(e){return gu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function gu(e){return"and"===e.op}function mu(e){return yu(e)&&gu(e)}function yu(e){for(const t of e.filters)if(t instanceof pu)return!1;return!0}function vu(e){if(e instanceof fu)return e.field.canonicalString()+e.op.toString()+Yc(e.value);if(mu(e))return e.filters.map(e=>vu(e)).join(",");{const t=e.filters.map(e=>vu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function bu(e,t){return e instanceof fu?function(e,t){return t instanceof fu&&e.op===t.op&&e.field.isEqual(t.field)&&Gc(e.value,t.value)}(e,t):e instanceof pu?function(e,t){return t instanceof pu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bu(n,t.filters[r]),!0)}(e,t):void Ml()}function wu(e){return e instanceof fu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Yc(e.value))}(e):e instanceof pu?function(e){return e.op.toString()+" {"+e.getFilters().map(wu).join(" ,")+"}"}(e):"Filter"}class xu extends fu{constructor(e,t,n){super(e,t,n),this.key=ac.fromName(n.referenceValue)}matches(e){const t=ac.comparator(e.key,this.key);return this.matchesComparison(t)}}class ku extends fu{constructor(e,t){super(e,"in",t),this.keys=Eu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Su extends fu{constructor(e,t){super(e,"not-in",t),this.keys=Eu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Eu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ac.fromName(e.referenceValue))}class _u extends fu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eu(t)&&Qc(t.arrayValue,this.value)}}class Cu extends fu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qc(this.value.arrayValue,t)}}class Tu extends fu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qc(this.value.arrayValue,t)}}class Iu extends fu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Qc(this.value.arrayValue,e))}}class Au{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.dt=null}}function Ru(e){return new Au(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nu(e){const t=Ul(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>vu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),bc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Yc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Yc(e)).join(",")),t.dt=e}return t.dt}function Du(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!du(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cu(e.startAt,t.startAt)&&cu(e.endAt,t.endAt)}class Pu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ou(e,t,n,r,i,o,s,a){return new Pu(e,t,n,r,i,o,s,a)}function ju(e){return new Pu(e)}function Lu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fu(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Uu(e){return null!==e.collectionGroup}function zu(e){const t=Ul(e);if(null===t.wt){t.wt=[];const e=Fu(t),n=Mu(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new uu(e)),t.wt.push(new uu(sc.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new uu(sc.keyField(),e))}}}return t.wt}function Bu(e){const t=Ul(e);if(!t._t)if("F"===t.limitType)t._t=Ru(t.path,t.collectionGroup,zu(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of zu(t)){const t="desc"===i.dir?"asc":"desc";e.push(new uu(i.field,t))}const n=t.endAt?new au(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new au(t.startAt.position,t.startAt.inclusive):null;t._t=Ru(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Vu(e,t,n){return new Pu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hu(e,t){return Du(Bu(e),Bu(t))&&e.limitType===t.limitType}function qu(e){return"".concat(Nu(Bu(e)),"|lt:").concat(e.limitType)}function Wu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>wu(e)).join(", "),"]")),bc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Yc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Yc(e)).join(",")),"Target(".concat(t,")")}(Bu(e)),"; limitType=").concat(e.limitType,")")}function Ku(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ac.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=lu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zu(e),t))&&!(e.endAt&&!function(e,t,n){const r=lu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zu(e),t))}(e,t)}function Gu(e){return(t,n)=>{let r=!1;for(const i of zu(e)){const e=Qu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qu(e,t,n){const r=e.field.isKeyField()?ac.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xc(r,i):Ml()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ml()}}class Xu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Tc(this.inner)}size(){return this.innerSize}}const Ju=new Ic(ac.comparator);function Yu(){return Ju}const $u=new Ic(ac.comparator);function Zu(){let e=$u;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ed(e){let t=$u;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function td(){return rd()}function nd(){return rd()}function rd(){return new Xu(e=>e.toString(),(e,t)=>e.isEqual(t))}const id=new Ic(ac.comparator),od=new Nc(ac.comparator);function sd(){let e=od;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ad=new Nc(Zl);function ld(){return ad}function cd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(t)?"-0":t}}function ud(e){return{integerValue:""+e}}function dd(e,t){return xc(t)?ud(t):cd(e,t)}class hd{constructor(){this._=void 0}}function fd(e,t,n){return e instanceof md?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zc(t)&&(t=Bc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yd?vd(e,t):e instanceof bd?wd(e,t):function(e,t){const n=gd(e,t),r=kd(n)+kd(e.gt);return Zc(n)&&Zc(e.gt)?ud(r):cd(e.serializer,r)}(e,t)}function pd(e,t,n){return e instanceof yd?vd(e,t):e instanceof bd?wd(e,t):n}function gd(e,t){return e instanceof xd?Zc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class md extends hd{}class yd extends hd{constructor(e){super(),this.elements=e}}function vd(e,t){const n=Sd(t);for(const r of e.elements)n.some(e=>Gc(e,r))||n.push(r);return{arrayValue:{values:n}}}class bd extends hd{constructor(e){super(),this.elements=e}}function wd(e,t){let n=Sd(t);for(const r of e.elements)n=n.filter(e=>!Gc(e,r));return{arrayValue:{values:n}}}class xd extends hd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function kd(e){return Fc(e.integerValue||e.doubleValue)}function Sd(e){return eu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ed{constructor(e,t){this.field=e,this.transform=t}}class _d{constructor(e,t){this.version=e,this.transformResults=t}}class Cd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cd}static exists(e){return new Cd(void 0,e)}static updateTime(e){return new Cd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Td(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Id{}function Ad(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ud(e.key,Cd.none()):new Od(e.key,e.data,Cd.none());{const n=e.data,r=iu.empty();let i=new Nc(sc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new jd(e.key,r,new Pc(i.toArray()),Cd.none())}}function Rd(e,t,n){e instanceof Od?function(e,t,n){const r=e.value.clone(),i=Md(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jd?function(e,t,n){if(!Td(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Md(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ld(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nd(e,t,n,r){return e instanceof Od?function(e,t,n,r){if(!Td(e.precondition,t))return n;const i=e.value.clone(),o=Fd(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof jd?function(e,t,n,r){if(!Td(e.precondition,t))return n;const i=Fd(e.fieldTransforms,r,t),o=t.data;return o.setAll(Ld(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Td(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Dd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gd(r.transform,e||null);null!=i&&(null===n&&(n=iu.empty()),n.set(r.field,i))}return n||null}function Pd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ec(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yd&&t instanceof yd||e instanceof bd&&t instanceof bd?ec(e.elements,t.elements,Gc):e instanceof xd&&t instanceof xd?Gc(e.gt,t.gt):e instanceof md&&t instanceof md}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Od extends Id{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jd extends Id{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ld(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Md(e,t,n){const r=new Map;Fl(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,pd(s,a,n[i]))}return r}function Fd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,fd(e,o,t))}return r}class Ud extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zd extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nd();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Ad(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(nc.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sd())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(e,t)=>Pd(e,t))&&ec(this.baseMutations,e.baseMutations,(e,t)=>Pd(e,t))}}class Vd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Fl(e.mutations.length===n.length);let r=id;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Vd(e,t,n,r)}}class Hd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var qd,Wd;function Kd(e){switch(e){default:return Ml();case zl.CANCELLED:case zl.UNKNOWN:case zl.DEADLINE_EXCEEDED:case zl.RESOURCE_EXHAUSTED:case zl.INTERNAL:case zl.UNAVAILABLE:case zl.UNAUTHENTICATED:return!1;case zl.INVALID_ARGUMENT:case zl.NOT_FOUND:case zl.ALREADY_EXISTS:case zl.PERMISSION_DENIED:case zl.FAILED_PRECONDITION:case zl.ABORTED:case zl.OUT_OF_RANGE:case zl.UNIMPLEMENTED:case zl.DATA_LOSS:return!0}}function Gd(e){if(void 0===e)return Ol("GRPC error has no .code"),zl.UNKNOWN;switch(e){case qd.OK:return zl.OK;case qd.CANCELLED:return zl.CANCELLED;case qd.UNKNOWN:return zl.UNKNOWN;case qd.DEADLINE_EXCEEDED:return zl.DEADLINE_EXCEEDED;case qd.RESOURCE_EXHAUSTED:return zl.RESOURCE_EXHAUSTED;case qd.INTERNAL:return zl.INTERNAL;case qd.UNAVAILABLE:return zl.UNAVAILABLE;case qd.UNAUTHENTICATED:return zl.UNAUTHENTICATED;case qd.INVALID_ARGUMENT:return zl.INVALID_ARGUMENT;case qd.NOT_FOUND:return zl.NOT_FOUND;case qd.ALREADY_EXISTS:return zl.ALREADY_EXISTS;case qd.PERMISSION_DENIED:return zl.PERMISSION_DENIED;case qd.FAILED_PRECONDITION:return zl.FAILED_PRECONDITION;case qd.ABORTED:return zl.ABORTED;case qd.OUT_OF_RANGE:return zl.OUT_OF_RANGE;case qd.UNIMPLEMENTED:return zl.UNIMPLEMENTED;case qd.DATA_LOSS:return zl.DATA_LOSS;default:return Ml()}}(Wd=qd||(qd={}))[Wd.OK=0]="OK",Wd[Wd.CANCELLED=1]="CANCELLED",Wd[Wd.UNKNOWN=2]="UNKNOWN",Wd[Wd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wd[Wd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wd[Wd.NOT_FOUND=5]="NOT_FOUND",Wd[Wd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wd[Wd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wd[Wd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wd[Wd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wd[Wd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wd[Wd.ABORTED=10]="ABORTED",Wd[Wd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wd[Wd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wd[Wd.INTERNAL=13]="INTERNAL",Wd[Wd.UNAVAILABLE=14]="UNAVAILABLE",Wd[Wd.DATA_LOSS=15]="DATA_LOSS";new Tl([4294967295,4294967295],0);Error;class Qd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yd(e,t){return Xd(e,t.toTimestamp())}function $d(e){return Fl(!!e),nc.fromTimestamp(function(e){const t=Mc(e);return new tc(t.seconds,t.nanos)}(e))}function Zd(e,t){return function(e){return new ic(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function eh(e){const t=ic.fromString(e);return Fl(dh(t)),t}function th(e,t){return Zd(e.databaseId,t.path)}function nh(e){const t=eh(e);return 4===t.length?ic.emptyPath():ih(t)}function rh(e){return new ic(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ih(e){return Fl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function oh(e,t,n){return{name:th(e,t),fields:n.value.mapValue.fields}}function sh(e,t){let n;if(t instanceof Od)n={update:oh(e,t.key,t.value)};else if(t instanceof Ud)n={delete:th(e,t.key)};else if(t instanceof jd)n={update:oh(e,t.key,t.data),updateMask:uh(t.fieldMask)};else{if(!(t instanceof zd))return Ml();n={verify:th(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof md)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xd)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ml()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ml()}(e,t.precondition)),n}function ah(e){let t=nh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=lh(e);return t instanceof pu&&mu(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(e=>function(e){return new uu(ch(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,bc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new au(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new au(n,t)}(n.endAt)),Ou(t,i,s,o,a,"F",l,c)}function lh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ch(e.unaryFilter.field);return fu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ch(e.unaryFilter.field);return fu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ch(e.unaryFilter.field);return fu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ch(e.unaryFilter.field);return fu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ml()}}(e):void 0!==e.fieldFilter?function(e){return fu.create(ch(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ml()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pu.create(e.compositeFilter.filters.map(e=>lh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ml()}}(e.compositeFilter.op))}(e):Ml()}function ch(e){return sc.fromServerFormat(e.fieldPath)}function uh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function dh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class hh{constructor(e){this.fe=e}}function fh(e){const t=ah({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vu(t,t.limit,"L"):t}class ph{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Fc(e.integerValue));else if("doubleValue"in e){const n=Fc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),wc(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Uc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?ru(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ml()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),ac.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}ph.Ve=new ph;class gh{constructor(){this.rn=new mh}addToCollectionParentIndex(e,t){return this.rn.add(t),mc.resolve()}getCollectionParents(e,t){return mc.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return mc.resolve()}deleteFieldIndex(e,t){return mc.resolve()}getDocumentsMatchingTarget(e,t){return mc.resolve(null)}getIndexType(e,t){return mc.resolve(0)}getFieldIndexes(e,t){return mc.resolve([])}getNextCollectionGroupToUpdate(e){return mc.resolve(null)}getMinOffset(e,t){return mc.resolve(dc.min())}getMinOffsetFromCollectionGroup(e,t){return mc.resolve(dc.min())}updateCollectionGroup(e,t,n){return mc.resolve()}updateIndexEntries(e,t){return mc.resolve()}}class mh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Nc(ic.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Nc(ic.comparator)).toArray()}}new Uint8Array(0);class yh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new yh(e,yh.DEFAULT_COLLECTION_PERCENTILE,yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}yh.DEFAULT_COLLECTION_PERCENTILE=10,yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yh.DEFAULT=new yh(41943040,yh.DEFAULT_COLLECTION_PERCENTILE,yh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yh.DISABLED=new yh(-1,0,0);class vh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vh(0)}static Mn(){return new vh(-1)}}class bh{constructor(){this.changes=new Xu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,su.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?mc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Nd(n.mutation,e,Pc.empty(),tc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,sd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sd();const r=td();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Zu();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=td();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,sd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Yu();const o=rd(),s=rd();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof jd)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Nd(s.mutation,t,s.mutation.getFieldMask(),tc.now())):o.set(t.key,Pc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new wh(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=rd();let r=new Ic((e,t)=>e-t),i=sd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Pc.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||sd()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=nd();l.forEach(e=>{if(!i.has(e)){const r=Ad(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return mc.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return ac.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Uu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):mc.resolve(td());let s=-1,a=i;return o.next(t=>mc.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?mc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,sd())).next(e=>({batchId:s,changes:ed(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ac(t)).next(e=>{let t=Zu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Zu();return this.indexManager.getCollectionParents(e,r).next(o=>mc.forEach(o,o=>{const s=function(e,t){return new Pu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,su.newInvalidDocument(r)))});let n=Zu();return e.forEach((e,i)=>{const o=r.get(e);void 0!==o&&Nd(o.mutation,i,Pc.empty(),tc.now()),Ku(t,i)&&(n=n.insert(e,i))}),n})}}class kh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return mc.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:$d(n.createTime)}),mc.resolve()}getNamedQuery(e,t){return mc.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:fh(e.bundledQuery),readTime:$d(e.readTime)}}(t)),mc.resolve()}}class Sh{constructor(){this.overlays=new Ic(ac.comparator),this.ls=new Map}getOverlay(e,t){return mc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=td();return mc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),mc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),mc.resolve()}getOverlaysForCollection(e,t,n){const r=td(),i=t.length+1,o=new ac(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return mc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ic((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=td(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=td(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return mc.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Hd(t,n));let i=this.ls.get(t);void 0===i&&(i=sd(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class Eh{constructor(){this.fs=new Nc(_h.ds),this.ws=new Nc(_h._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new _h(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new _h(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new ac(new ic([])),n=new _h(t,e),r=new _h(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ac(new ic([])),n=new _h(t,e),r=new _h(t,e+1);let i=sd();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new _h(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _h{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ac.comparator(e.key,t.key)||Zl(e.As,t.As)}static _s(e,t){return Zl(e.As,t.As)||ac.comparator(e.key,t.key)}}class Ch{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Nc(_h.ds)}checkEmpty(e){return mc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Bd(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Rs=this.Rs.add(new _h(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return mc.resolve(o)}lookupMutationBatch(e,t){return mc.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return mc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return mc.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return mc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _h(t,0),r=new _h(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),mc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Nc(Zl);return t.forEach(e=>{const t=new _h(e,0),r=new _h(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),mc.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ac.isDocumentKey(i)||(i=i.child(""));const o=new _h(new ac(i),0);let s=new Nc(Zl);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)},o),mc.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Fl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return mc.forEach(t.mutations,r=>{const i=new _h(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new _h(t,0),r=this.Rs.firstAfterOrEqual(n);return mc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,mc.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Th{constructor(e){this.Ds=e,this.docs=new Ic(ac.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return mc.resolve(n?n.document.mutableCopy():su.newInvalidDocument(t))}getEntries(e,t){let n=Yu();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():su.newInvalidDocument(e))}),mc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Yu();const o=t.path,s=new ac(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||hc(uc(s),n)<=0||(r.has(s.key)||Ku(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return mc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ml()}Cs(e,t){return mc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ih(this)}getSize(e){return mc.resolve(this.size)}}class Ih extends bh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),mc.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Ah{constructor(e){this.persistence=e,this.xs=new Xu(e=>Nu(e),Du),this.lastRemoteSnapshotVersion=nc.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Eh,this.targetCount=0,this.Ms=vh.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),mc.resolve()}getLastRemoteSnapshotVersion(e){return mc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mc.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),mc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),mc.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new vh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,mc.resolve()}updateTargetData(e,t){return this.Fn(t),mc.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,mc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),mc.waitFor(i).next(()=>r)}getTargetCount(e){return mc.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return mc.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),mc.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),mc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),mc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return mc.resolve(n)}containsKey(e,t){return mc.resolve(this.ks.containsKey(t))}}class Rh{constructor(e,t){this.$s={},this.overlays={},this.Os=new vc(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Ah(this),this.indexManager=new gh,this.remoteDocumentCache=function(e){return new Th(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new hh(t),this.qs=new kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Ch(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Pl("MemoryPersistence","Starting transaction:",e);const r=new Nh(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return mc.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Nh extends pc{constructor(e){super(),this.currentSequenceNumber=e}}class Dh{constructor(e){this.persistence=e,this.Qs=new Eh,this.js=null}static zs(e){return new Dh(e)}get Ws(){if(this.js)return this.js;throw Ml()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),mc.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),mc.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),mc.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mc.forEach(this.Ws,n=>{const r=ac.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,nc.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return mc.or([()=>mc.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Ph{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=sd(),r=sd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ph(e,t.fromCache,n,r)}}class Oh{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Lu(t))return mc.resolve(null);let n=Bu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Vu(t,null,"F"),n=Bu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=sd(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,Vu(t,null,"F")):this.Wi(e,o,t,n)}))})))}Gi(e,t,n,r){return Lu(t)||r.isEqual(nc.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(Dl()<=M.DEBUG&&Pl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wu(t)),this.Wi(e,o,t,cc(r,-1)))})}ji(e,t){let n=new Nc(Gu(e));return t.forEach((t,r)=>{Ku(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Dl()<=M.DEBUG&&Pl("QueryEngine","Using full collection scan to execute query:",Wu(t)),this.Ui.getDocumentsMatchingQuery(e,t,dc.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class jh{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Ic(Zl),this.Yi=new Xu(e=>Nu(e),Du),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xh(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Lh(e,t,n,r){return new jh(e,t,n,r)}async function Mh(e,t){const n=Ul(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=sd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({er:e,removedBatchIds:i,addedBatchIds:o}))})})}function Fh(e){const t=Ul(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Uh(e,t){const n=Ul(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}class zh{constructor(){this.activeTargetIds=ld()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bh{constructor(){this.Hr=new zh,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new zh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vh{Yr(e){}shutdown(){}}class Hh{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qh=null;function Wh(){return null===qh?qh=268435456+Math.round(2147483648*Math.random()):qh++,"0x"+qh.toString(16)}const Kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gh{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Qh="WebChannelConnection";class Xh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=Wh(),s=this.To(e,t);Pl("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={};return this.Eo(a,r,i),this.Ao(e,s,a,n).then(t=>(Pl("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw jl("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Kh[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Wh();return new Promise((o,s)=>{const a=new Cl;a.setWithCredentials(!0),a.listenOnce(xl.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case wl.NO_ERROR:const t=a.getResponseJson();Pl(Qh,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case wl.TIMEOUT:Pl(Qh,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Bl(zl.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const n=a.getStatus();if(Pl(Qh,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zl).indexOf(t)>=0?t:zl.UNKNOWN}(t.status);s(new Bl(e,t.message))}else s(new Bl(zl.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Bl(zl.UNAVAILABLE,"Connection failed."));break;default:Ml()}}finally{Pl(Qh,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Pl(Qh,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Wh(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vl(),s=bl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new El({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Pl(Qh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const f=new Gh({ro:t=>{h?Pl(Qh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Pl(Qh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,_l.EventType.OPEN,()=>{h||Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,_l.EventType.CLOSE,()=>{h||(h=!0,Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,_l.EventType.ERROR,t=>{h||(h=!0,jl(Qh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Bl(zl.UNAVAILABLE,"The operation could not be completed")))}),p(u,_l.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Fl(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=qd[e];if(void 0!==t)return Gd(t)}(t),i=s.message;void 0===n&&(n=zl.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.wo(new Bl(n,i)),u.close()}else Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}}),p(s,kl.STAT_EVENT,t=>{t.stat===Sl.PROXY?Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Sl.NOPROXY&&Pl(Qh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function Jh(){return"undefined"!=typeof document?document:null}function Yh(e){return new Qd(e,!0)}class $h{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Pl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Zh{constructor(e,t,n,r,i,o,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new $h(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===zl.RESOURCE_EXHAUSTED?(Ol(t.toString()),Ol("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===zl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Bl(zl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Pl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ef extends Zh{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Fl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Fl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?$d(e.updateTime):$d(t);return n.isEqual(nc.min())&&(n=$d(t)),new _d(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=$d(e.commitTime);return this.listener.cu(n,t)}return Fl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=rh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>sh(this.serializer,e))};this.Wo(t)}}class tf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Bl(zl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bl(zl.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.vo(e,t,n,o,s,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===zl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bl(zl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class nf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ol(t),this.mu=!1):Pl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class rf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{af(this)&&(Pl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ul(e);t.vu.add(4),await sf(t),t.bu.set("Unknown"),t.vu.delete(4),await of(t)}(this))})}),this.bu=new nf(n,r)}}async function of(e){if(af(e))for(const t of e.Ru)await t(!0)}async function sf(e){for(const t of e.Ru)await t(!1)}function af(e){return 0===Ul(e).vu.size}async function lf(e,t,n){if(!yc(t))throw t;e.vu.add(1),await sf(e),e.bu.set("Offline"),n||(n=()=>Fh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Pl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await of(e)})}function cf(e,t){return t().catch(n=>lf(e,n,t))}async function uf(e){const t=Ul(e),n=xf(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;df(t);)try{const e=await Uh(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,hf(t,e)}catch(e){await lf(t,e)}ff(t)&&pf(t)}function df(e){return af(e)&&e.Eu.length<10}function hf(e,t){e.Eu.push(t);const n=xf(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function ff(e){return af(e)&&!xf(e).Uo()&&e.Eu.length>0}function pf(e){xf(e).start()}async function gf(e){xf(e).hu()}async function mf(e){const t=xf(e);for(const n of e.Eu)t.uu(n.mutations)}async function yf(e,t,n){const r=e.Eu.shift(),i=Vd.from(r,t,n);await cf(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await uf(e)}async function vf(e,t){t&&xf(e).ou&&await async function(e,t){if(Kd(n=t.code)&&n!==zl.ABORTED){const n=e.Eu.shift();xf(e).Qo(),await cf(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await uf(e)}var n}(e,t),ff(e)&&pf(e)}async function bf(e,t){const n=Ul(e);n.asyncQueue.verifyOperationInProgress(),Pl("RemoteStore","RemoteStore received new credentials");const r=af(n);n.vu.add(3),await sf(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await of(n)}async function wf(e,t){const n=Ul(e);t?(n.vu.delete(2),await of(n)):t||(n.vu.add(2),await sf(n),n.bu.set("Unknown"))}function xf(e){return e.Du||(e.Du=function(e,t,n){const r=Ul(e);return r.fu(),new ef(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:gf.bind(null,e),ao:vf.bind(null,e),au:mf.bind(null,e),cu:yf.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await uf(e)):(await e.Du.stop(),e.Eu.length>0&&(Pl("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class kf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new kf(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bl(zl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sf(e,t){if(Ol("AsyncQueue","".concat(t,": ").concat(e)),yc(e))return new Bl(zl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ef{constructor(){this.queries=new Xu(e=>qu(e),Hu),this.onlineState="Unknown",this.ku=new Set}}function _f(e){e.ku.forEach(e=>{e.next()})}class Cf{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Xu(e=>qu(e),Hu),this._c=new Map,this.mc=new Set,this.gc=new Ic(ac.comparator),this.yc=new Map,this.Ic=new Eh,this.Tc={},this.Ec=new Map,this.Ac=vh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Tf(e,t,n){const r=Ul(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ul(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&_f(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function If(e,t){const n=Ul(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ul(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=mc.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Fl(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=sd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Nf(n,r,null),Rf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Df(n,e)}catch(e){await gc(e)}}async function Af(e,t,n){const r=Ul(e);try{const e=await function(e,t){const n=Ul(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Fl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Nf(r,t,n),Rf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Df(r,e)}catch(n){await gc(n)}}function Rf(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Nf(e,t,n){const r=Ul(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}async function Df(e,t,n){const r=Ul(e),i=[],o=[],s=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{s.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ph.Li(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=Ul(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>mc.forEach(t,t=>mc.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>mc.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!yc(e))throw e;Pl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function Pf(e,t){const n=Ul(e);if(!n.currentUser.isEqual(t)){Pl("SyncEngine","User change. New user:",t.toKey());const e=await Mh(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Bl(zl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Df(n,e.er)}}function Of(e){const t=Ul(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=If.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Af.bind(null,t),t}class jf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Lh(this.persistence,new Oh,e.initialUser,this.serializer)}createPersistence(e){return new Rh(Dh.zs,this.serializer)}createSharedClientState(e){return new Bh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Tf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pf.bind(null,this.syncEngine),await wf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ef}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Xh(r));var r;return function(e,t,n,r){return new tf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Tf(this.syncEngine,e,0),o=Hh.D()?new Hh:new Vh,new rf(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Cf(e,t,n,r,i,o);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ul(e);Pl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await sf(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Mf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Al.UNAUTHENTICATED,this.clientId=$l.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Pl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Pl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bl(zl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Sf(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ff(e,t){e.asyncQueue.verifyOperationInProgress(),Pl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Uf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bf(e);Pl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>bf(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bf(t.remoteStore,n)),e._onlineComponents=t}function zf(e){return"FirebaseError"===e.name?e.code===zl.FAILED_PRECONDITION||e.code===zl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Bf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Pl("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ff(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!zf(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await Ff(e,new jf)}}else Pl("FirestoreClient","Using default OfflineComponentProvider"),await Ff(e,new jf);return e._offlineComponents}async function Vf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Pl("FirestoreClient","Using user provided OnlineComponentProvider"),await Uf(e,e._uninitializedComponentsProvider._online)):(Pl("FirestoreClient","Using default OnlineComponentProvider"),await Uf(e,new Lf))),e._onlineComponents}function Hf(e){return Vf(e).then(e=>e.syncEngine)}function qf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wf=new Map;function Kf(e,t,n){if(!n)throw new Bl(zl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gf(e){if(!ac.isDocumentKey(e))throw new Bl(zl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ml()}function Xf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bl(zl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qf(e);throw new Bl(zl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Jf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Bl(zl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bl(zl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Bl(zl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Bl(zl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Bl(zl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Bl(zl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Yf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Bl(zl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bl(zl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ql;switch(e.type){case"firstParty":return new Ql(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bl(zl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wf.get(e);t&&(Pl("ComponentProvider","Removing Datastore"),Wf.delete(e),t.terminate())}(this),Promise.resolve()}}function $f(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Xf(e,Yf))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Al.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Bl(zl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Al(o)}e._authCredentials=new Wl(new Hl(t,n))}}class Zf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zf(this.firestore,e,this._key)}}class ep{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ep(this.firestore,e,this._query)}}class tp extends ep{constructor(e,t,n){super(e,t,ju(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zf(this.firestore,null,new ac(e))}withConverter(e){return new tp(this.firestore,e,this._path)}}function np(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=N(e),1===arguments.length&&(t=$l.A()),Kf("doc","path",t),e instanceof Yf){const n=ic.fromString(t,...r);return Gf(n),new Zf(e,null,new ac(n))}{if(!(e instanceof Zf||e instanceof tp))throw new Bl(zl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ic.fromString(t,...r));return Gf(n),new Zf(e.firestore,e instanceof tp?e.converter:null,new ac(n))}}class rp{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new $h(this,"async_queue_retry"),this.Xc=()=>{const e=Jh();e&&Pl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Jh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Jh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Vl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!yc(e))throw e;Pl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ol("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=kf.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Ml()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class ip extends Yf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new rp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||sp(this),this._firestoreClient.terminate()}}function op(e){return e._firestoreClient||sp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function sp(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Hc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Mf(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class ap{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ap(jc.fromBase64String(e))}catch(e){throw new Bl(zl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ap(jc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Bl(zl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cp{constructor(e){this._methodName=e}}class up{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Bl(zl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bl(zl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zl(this._lat,e._lat)||Zl(this._long,e._long)}}const dp=/^__.*__$/;class hp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Od(e,this.data,t,this.fieldTransforms)}}function fp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ml()}}class pp{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Cp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(fp(this.ca)&&dp.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class gp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Yh(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pp({ca:e,methodName:t,ga:n,path:sc.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mp(e){const t=e._freezeSettings(),n=Yh(e._databaseId);return new gp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yp(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(o.merge||o.mergeFields?2:0,t,n,i);kp("Data must be an object, but it was:",s,r);const a=wp(r,s);let l,c;if(o.merge)l=new Pc(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Sp(t,r,n);if(!s.contains(i))throw new Bl(zl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Tp(e,i)||e.push(i)}l=new Pc(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new hp(new iu(a),l,c)}class vp extends cp{_toFieldTransform(e){return new Ed(e.path,new md)}isEqual(e){return e instanceof vp}}function bp(e,t){if(xp(e=N(e)))return kp("Unsupported field value:",t,e),wp(e,t);if(e instanceof cp)return function(e,t){if(!fp(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=bp(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=N(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=tc.fromDate(e);return{timestampValue:Xd(t.serializer,n)}}if(e instanceof tc){const n=new tc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xd(t.serializer,n)}}if(e instanceof up)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ap)return{bytesValue:Jd(t.serializer,e._byteString)};if(e instanceof Zf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Zd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Qf(e)))}(e,t)}function wp(e,t){const n={};return Tc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cc(e,(e,r)=>{const i=bp(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function xp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof tc||e instanceof up||e instanceof ap||e instanceof Zf||e instanceof cp)}function kp(e,t,n){if(!xp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Qf(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Sp(e,t,n){if((t=N(t))instanceof lp)return t._internalPath;if("string"==typeof t)return _p(e,t);throw Cp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ep=new RegExp("[~\\*/\\[\\]]");function _p(e,t,n){if(t.search(Ep)>=0)throw Cp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new lp(...t.split("."))._internalPath}catch(r){throw Cp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cp(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Bl(zl.INVALID_ARGUMENT,a+e+l)}function Tp(e,t){return e.some(e=>e.isEqual(t))}function Ip(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}function Ap(e,t){return function(e,t){const n=new Vl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Of(e);try{const e=await function(e,t){const n=Ul(e),r=tc.now(),i=t.reduce((e,t)=>e.add(t.key),sd());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Yu(),l=sd();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=Dd(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new jd(e.key,t,ou(t.value.mapValue),Cd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:ed(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Ic(Zl)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Df(r,e.changes),await uf(r.remoteStore)}catch(e){const t=Sf(e,"Failed to persist write");n.reject(t)}}(await Hf(e),t,n)),n.promise}(op(e),t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Rl=e}(Ve),Fe(new D("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new ip(new Kl(e.getProvider("auth-internal")),new Jl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bl(zl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),We(Il,"3.13.0",e),We(Il,"3.13.0","esm2017")}();let Rp=null,Np=null,Dp=null;Rp=He({apiKey:"AIzaSyDqmFOW2daTZL4CQO321Ae6C8jxvfuVlz0",authDomain:"comlib-6e6c4.firebaseapp.com",projectId:"comlib-6e6c4",storageBucket:"comlib-6e6c4.appspot.com",messagingSenderId:"1072674193479",appId:"1:1072674193479:web:9e41e976a5f083e8eb7162"}),Np=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();const t=Ue(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ue(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(E(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;lt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ti,persistence:[pr,Yn,Zn]}),r=y("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>oi)return;const r=null===t||void 0===t?void 0:t.token;si!==r&&(si=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){N(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){N(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const o=g("auth");return o&&yn(n,"http://".concat(o)),n}(Rp),Dp=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ue("object"==typeof e?e:qe(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(()=>{const e=g("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&$f(r,...e)}return r}(Rp);async function Pp(){if(!Np)throw new Error("Firebase disabled");if(!Np.currentUser)throw new Error("No user");return Np.currentUser.emailVerified?{skipped:!0}:(await Kn(Np.currentUser),{sent:!0})}var Op=n(713);function jp(e){let{user:t}=e;const[n,i]=(0,r.useState)("");if(!t||t.emailVerified)return null;return(0,Op.jsxs)("div",{style:{background:"#fff3cd",border:"1px solid #ffe58f",padding:"8px 12px",borderRadius:4,marginBottom:12,fontSize:14},children:[(0,Op.jsx)("strong",{children:"Email not verified."})," Please click the link sent to ",t.email,".",(0,Op.jsx)("button",{onClick:async()=>{i("Sending...");try{await Pp(),i("Verification email sent. Check your inbox.")}catch(e){i(e.message)}},style:{marginLeft:10},className:"btn btn-sm btn-outline-secondary",children:"Resend"}),n&&(0,Op.jsx)("div",{style:{marginTop:4,fontSize:12},children:n})]})}function Lp(e){let{user:t}=e;const[n,i]=(0,r.useState)("");if(!t)return null;if(t.emailVerified)return(0,Op.jsx)("div",{style:{background:"#e6ffed",border:"1px solid #b2f2c2",padding:"4px 8px",borderRadius:4,fontSize:12,margin:"8px 0"},children:"Email verified \u2713"});return(0,Op.jsxs)("div",{style:{background:"#fff3cd",border:"1px solid #ffe58f",padding:"6px 10px",borderRadius:4,fontSize:13,margin:"8px 0"},children:[(0,Op.jsx)("strong",{children:"Email not verified."})," Please verify.",(0,Op.jsx)("button",{onClick:async()=>{i("Sending...");try{await Pp(),i("Verification email sent. Check your inbox.")}catch(e){i(e.message)}},className:"btn btn-sm btn-outline-secondary",style:{marginLeft:10},disabled:n.startsWith("Sending"),children:"Resend"}),n&&(0,Op.jsx)("div",{style:{marginTop:4,fontSize:11},children:n})]})}const Mp=()=>{const[e,t]=(0,r.useState)("home"),[i,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({}),[f,p]=(0,r.useState)({}),[g,m]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[x,k]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[_,C]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),[N,D]=(0,r.useState)(!1),[P,O]=(0,r.useState)(!1),[j,L]=(0,r.useState)(0),[M,F]=(0,r.useState)(null),[U,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{localStorage.removeItem("communityLibraryUsers")}catch(n){}const e=localStorage.getItem("communityLibraryCurrentUser");if(e){const t=JSON.parse(e);l(t),u(t.community)}const t=localStorage.getItem("communityLibraryRequests")||localStorage.getItem("communityLibraryBookRequests");t&&p(JSON.parse(t))},[]),(0,r.useEffect)(()=>{console.log("[ComLib] Build version:",a,"API_BASE:","http://localhost:5000/api")},[]),(0,r.useEffect)(()=>{},[d]),(0,r.useEffect)(()=>{localStorage.setItem("communityLibraryRequests",JSON.stringify(f)),localStorage.setItem("communityLibraryBookRequests",JSON.stringify(f))},[f]),(0,r.useEffect)(()=>{const e=setInterval(()=>L(e=>e+1),6e4);return()=>clearInterval(e)},[]);const B={padding:"12px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:4,boxSizing:"border-box"},V={background:"#2E7D32",color:"#fff",border:"none",padding:"12px",fontSize:"1rem",borderRadius:4,cursor:"pointer"},H={padding:"12px",border:"1px solid #ddd",textAlign:"left",fontSize:13},q={padding:"12px",border:"1px solid #ddd",fontSize:13};(0,r.useEffect)(()=>{(async()=>{try{const e=await(0,s.zy)();m(e)}catch(e){w(e.message)}finally{v(!0)}})()},[]);const W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:14;if(!e)return 0;const r=new Date(e),i=new Date,o=Math.ceil((i-r)/864e5),s=Math.min(o,n)*t,a=Math.max(0,o-n);if(0===a)return s;let l=0;l+=Math.min(a,5)*t*.25;l+=Math.min(Math.max(a-5,0),5)*t*.5;return l+=Math.max(a-10,0)*t*1,Math.round(100*(s+l))/100},K=async e=>{if(i){k(!0),E(null);try{console.log("[AddBook] starting backend create");const n={title:e.title,author:e.author||"Unknown",barcode:e.barcode||e.isbn||"TEMP-".concat(Date.now()),isbn:e.isbn||"",genre:e.genre||"General",description:e.description||"",rental:{pricePerDay:Number(e.price)||0,maxRentalDays:e.maxRentalDays||14},location:{community:c,address:""}},r=await(0,s.iC)(n);console.log("[AddBook] backend created",null===r||void 0===r?void 0:r._id);try{m(await(0,s.zy)())}catch(t){}return r}catch(n){E(n.message),console.warn("[AddBook] backend create failed",n.message);const t=(0,o.A)((0,o.A)({},e),{},{id:Date.now()+Math.random(),owner:i.name,ownerEmail:i.email,community:c,dateAdded:(new Date).toLocaleDateString(),earnings:"\u20b90",available:!0,dailyRate:Number(e.price)||0,maxRentalDays:e.maxRentalDays||14,price:e.price||"\u20b910/day"});return h(e=>{var n;return(0,o.A)((0,o.A)({},e),{},{[i.email]:(0,o.A)((0,o.A)({},e[i.email]||{}),{},{books:[...(null===(n=e[i.email])||void 0===n?void 0:n.books)||[],t]})})}),t}finally{k(!1)}}},G=e=>{t(e)},Q=()=>{const e=(()=>{if(!i||!i.email)return 0;const e=i.email,t=f[e]||{};let n=0;return Object.values(t).forEach(e=>{"pending"===e.status&&n++}),n})();let t=0;try{if(null!==i&&void 0!==i&&i.email){const e=localStorage.getItem("communityLibraryNotifications");if(e){t=(JSON.parse(e)[i.email]||[]).filter(e=>!e.read).length}}}catch(n){}return(0,Op.jsxs)("header",{style:{backgroundColor:"#2E7D32",color:"white",padding:"1rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Op.jsxs)("h1",{style:{margin:0,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontFamily:"Segoe UI, sans-serif",letterSpacing:"0.5px"},onClick:()=>G("home"),children:[(0,Op.jsx)("span",{style:{display:"inline-flex",width:40,height:40,justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg,#2E7D32,#66BB6A)",borderRadius:"8px",fontSize:"1.2rem",fontWeight:"bold"},children:"CL"}),(0,Op.jsx)("span",{style:{fontWeight:"600"},children:"ComLib"})]}),(0,Op.jsxs)("nav",{style:{display:"flex",gap:"2rem",alignItems:"center"},children:[(0,Op.jsx)("button",{onClick:()=>G("home"),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"1rem"},children:"Home"}),(0,Op.jsx)("button",{onClick:()=>G("books"),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"1rem"},children:"Books"}),(0,Op.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center",gap:"12px"},children:[(0,Op.jsx)("button",{onClick:()=>G("dashboard"),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"1rem"},children:"Dashboard"}),i&&e>0&&(0,Op.jsx)("span",{style:{position:"absolute",top:"-8px",right:"-12px",backgroundColor:"#FF9800",color:"white",borderRadius:"50%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"0.8rem",fontWeight:"bold"},children:e}),i&&t>0&&(0,Op.jsxs)("span",{title:"New updates",style:{backgroundColor:"#1976D2",color:"white",borderRadius:"12px",padding:"2px 8px",fontSize:"0.7rem",fontWeight:"bold"},children:[t," \ud83d\udd14"]})]}),i?(0,Op.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,Op.jsxs)("span",{children:["Welcome, ",i.name,"!"]}),(0,Op.jsx)("button",{onClick:()=>{l(null),u(null),localStorage.removeItem("communityLibraryCurrentUser"),G("home")},style:{backgroundColor:"rgba(255,255,255,0.2)",border:"1px solid white",color:"white",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"Logout"})]}):(0,Op.jsx)("button",{onClick:()=>G("login"),style:{backgroundColor:"rgba(255,255,255,0.2)",border:"1px solid white",color:"white",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"Login"})]})]})},X=()=>(0,Op.jsxs)("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[(0,Op.jsxs)("section",{style:{textAlign:"center",marginBottom:"60px"},children:[(0,Op.jsx)("h2",{style:{fontSize:"2.5rem",marginBottom:"20px",color:"#333"},children:"Welcome to ComLib"}),(0,Op.jsx)("p",{style:{fontSize:"1.2rem",color:"#666",marginBottom:"30px"},children:"Share books, build connections, and discover your next great read in your local community."}),(0,Op.jsxs)("div",{children:[(0,Op.jsx)("button",{onClick:()=>G("register"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"12px 24px",fontSize:"1rem",borderRadius:"4px",marginRight:"10px",cursor:"pointer"},children:"Join Now"}),(0,Op.jsx)("button",{onClick:()=>G("books"),style:{backgroundColor:"transparent",color:"#2E7D32",border:"2px solid #2E7D32",padding:"12px 24px",fontSize:"1rem",borderRadius:"4px",cursor:"pointer"},children:"Browse Books"})]})]}),(0,Op.jsxs)("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px",marginBottom:"60px"},children:[(0,Op.jsxs)("div",{style:{padding:"30px",backgroundColor:"white",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,Op.jsx)("h3",{style:{color:"#2E7D32",marginBottom:"15px"},children:"\ud83d\udcd6 Discover Books"}),(0,Op.jsx)("p",{children:"Browse thousands of books available in your community"}),(0,Op.jsx)("button",{onClick:()=>G("books"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Explore Now"})]}),(0,Op.jsxs)("div",{style:{padding:"30px",backgroundColor:"white",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,Op.jsx)("h3",{style:{color:"#2E7D32",marginBottom:"15px"},children:"\ud83e\udd1d Share & Lend"}),(0,Op.jsx)("p",{children:"List your books and help others discover great reads"}),(0,Op.jsx)("button",{onClick:()=>G(i?"dashboard":"login"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Get Started"})]}),(0,Op.jsxs)("div",{style:{padding:"30px",backgroundColor:"white",borderRadius:"8px",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,Op.jsx)("h3",{style:{color:"#2E7D32",marginBottom:"15px"},children:"\ud83d\udcb1 Digital Wallet"}),(0,Op.jsx)("p",{children:"Secure transactions with our built-in wallet system"}),(0,Op.jsx)("button",{onClick:()=>G(i?"dashboard":"login"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Learn More"})]})]}),(0,Op.jsxs)("section",{style:{textAlign:"center",padding:"40px",backgroundColor:"#f0f7f0",borderRadius:"8px"},children:[(0,Op.jsx)("h3",{style:{marginBottom:"20px",color:"#333"},children:"Ready to Start Your Library Journey?"}),(0,Op.jsx)("p",{style:{marginBottom:"30px",color:"#666"},children:"Join thousands of book lovers in your community. Share your books, discover new titles."}),(0,Op.jsx)("button",{onClick:()=>G("register"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"15px 30px",fontSize:"1.1rem",borderRadius:"4px",cursor:"pointer"},children:"Get Started Today"})]})]}),J=()=>{const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1),h=(()=>{if(!c)return[];const e=[];Object.values(d).forEach(t=>{t.community===c&&t.books&&e.push(...t.books)});const t=g.filter(e=>{var t;return((null===(t=e.location)||void 0===t?void 0:t.community)||e.community)===c}),n=new Set,r=[];return[...t,...e].forEach(e=>{const t=e.barcode||e.id;n.has(t)||(n.add(t),r.push(e))}),r})(),m=h.filter(e=>!c||e.community===c).filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.author.toLowerCase().includes(e.toLowerCase())),v=y?b?(0,Op.jsxs)("div",{style:{padding:"6px 12px",background:"#fdecea",border:"1px solid #f5c2c7",borderRadius:4,marginBottom:12,fontSize:12},children:["Server books unavailable (",b,"). Showing local only."]}):null:(0,Op.jsx)("div",{style:{padding:"6px 12px",background:"#fff3cd",border:"1px solid #ffe58f",borderRadius:4,marginBottom:12,fontSize:12},children:"Loading books from server..."}),w=()=>{const[e,t]=(0,r.useState)({title:"",author:"",isbn:"",condition:"good",price:"",maxRentalDays:14,description:"",imageUrl:""}),[n,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),c=async e=>{try{l(!0);const n=await fetch("https://www.googleapis.com/books/v1/volumes?q=isbn:".concat(e)),r=await n.json();if(r.items&&r.items.length>0){const e=r.items[0].volumeInfo;t(t=>(0,o.A)((0,o.A)({},t),{},{title:e.title||"",author:e.authors?e.authors.join(", "):"",description:e.description||"",imageUrl:e.imageLinks?e.imageLinks.thumbnail:""})),alert("Book information loaded successfully!")}else alert("Book not found in Google Books database. Please enter details manually.")}catch(n){console.error("Error fetching book data:",n),alert("Error fetching book data. Please enter details manually.")}finally{l(!1)}};return(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"Add New Book"}),(0,Op.jsx)("button",{onClick:()=>a(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"\xd7"})]}),(0,Op.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),E(null);const r={title:e.title,author:e.author,isbn:e.isbn,condition:e.condition,price:"\u20b9".concat(e.price,"/day"),description:e.description,imageUrl:e.imageUrl},i=await K(r);S?alert("Backend create failed, stored locally. Error: "+S):alert('Book "'.concat(e.title,'" added').concat(i?"":" (local fallback)","!")),a(!1),t({title:"",author:"",isbn:"",condition:"good",price:"",description:"",imageUrl:""})},style:{display:"flex",flexDirection:"column",gap:"15px"},children:[S&&(0,Op.jsxs)("div",{style:{background:"#ffebee",color:"#c62828",padding:"8px 10px",borderRadius:4,fontSize:12},children:["Backend error: ",S]}),(0,Op.jsx)("input",{type:"text",placeholder:"Book Title *",value:e.title,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{title:e.target.value})),style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px"},required:!0}),(0,Op.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,Op.jsx)("label",{style:{fontWeight:"bold",color:"#333"},children:"ISBN & Book Information"}),(0,Op.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Op.jsx)("input",{type:"text",placeholder:"ISBN (10 or 13 digits)",value:e.isbn,onChange:e=>{const n=e.target.value;t(e=>(0,o.A)((0,o.A)({},e),{},{isbn:n})),10!==n.length&&13!==n.length||c(n)},style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px",flex:1}}),(0,Op.jsx)("button",{type:"button",onClick:()=>{i(!0),setTimeout(()=>{const e="9780134685991";t(t=>(0,o.A)((0,o.A)({},t),{},{isbn:e})),c(e),i(!1),alert("Barcode scanned successfully! ISBN: "+e)},2e3)},disabled:n,style:{padding:"12px 16px",backgroundColor:n?"#ccc":"#2E7D32",color:"white",border:"none",borderRadius:"4px",cursor:n?"not-allowed":"pointer",minWidth:"120px"},children:n?"\ud83d\udcf7 Scanning...":"\ud83d\udcf7 Scan ISBN"})]}),s&&(0,Op.jsx)("div",{style:{textAlign:"center",color:"#2E7D32",fontSize:"0.9rem",padding:"10px",backgroundColor:"#f0f8f0",borderRadius:"4px"},children:"\ud83d\udcda Loading book information from Google Books..."}),e.imageUrl&&(0,Op.jsx)("div",{style:{textAlign:"center",marginTop:"10px"},children:(0,Op.jsx)("img",{src:e.imageUrl,alt:e.title,style:{maxWidth:"120px",maxHeight:"180px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}})})]}),(0,Op.jsx)("input",{type:"text",placeholder:"Author *",value:e.author,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{author:e.target.value})),style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px"},required:!0}),(0,Op.jsxs)("select",{value:e.condition,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{condition:e.target.value})),style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px"},children:[(0,Op.jsx)("option",{value:"excellent",children:"Excellent"}),(0,Op.jsx)("option",{value:"good",children:"Good"}),(0,Op.jsx)("option",{value:"fair",children:"Fair"}),(0,Op.jsx)("option",{value:"poor",children:"Poor"})]}),(0,Op.jsx)("input",{type:"number",placeholder:"Daily Rent (\u20b9) *",value:e.price,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{price:e.target.value})),style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px"},required:!0,min:"1"}),(0,Op.jsx)("textarea",{placeholder:"Description (optional)",value:e.description,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{description:e.target.value})),style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px",minHeight:"80px",resize:"vertical"}}),(0,Op.jsx)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:(0,Op.jsx)("button",{type:"submit",disabled:x,style:{backgroundColor:x?"#999":"#2E7D32",color:"#fff",border:"none",padding:"12px 24px",borderRadius:4,cursor:x?"not-allowed":"pointer",fontSize:"1rem"},children:x?"Saving...":"Add Book"})})]})]})})},k=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)([]);return(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"Bulk Add Books"}),(0,Op.jsx)("button",{onClick:()=>u(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"\xd7"})]}),(0,Op.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Op.jsx)("h4",{style:{color:"#333",marginBottom:"10px"},children:"Instructions:"}),(0,Op.jsxs)("p",{style:{color:"#666",fontSize:"0.9rem",lineHeight:"1.4"},children:["Enter one book per line in the following format:",(0,Op.jsx)("br",{}),(0,Op.jsx)("strong",{children:"Title, Author, ISBN (optional), Price per day (optional)"}),(0,Op.jsx)("br",{}),'Example: "The Great Gatsby, F. Scott Fitzgerald, 9780743273565, 45"']})]}),(0,Op.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Enter books (one per line):\nThe Great Gatsby, F. Scott Fitzgerald, 9780743273565, 45\nTo Kill a Mockingbird, Harper Lee, , 50\n1984, George Orwell, 9780451524935",style:{width:"100%",height:"200px",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.9rem",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box"}}),(0,Op.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"15px"},children:[(0,Op.jsx)("button",{onClick:async()=>{i(!0);const t=e.split("\n").filter(e=>e.trim()),n=[];for(let e of t){const t=e.split(",").map(e=>e.trim());if(t.length>=2){const[e,i,o="",s="50"]=t;let a={title:e,author:i,isbn:o,price:s.replace(/[\u20b9]/g,""),imageUrl:"",condition:"good",description:""};if(o&&(10===o.length||13===o.length))try{const e=await fetch("https://www.googleapis.com/books/v1/volumes?q=isbn:".concat(o)),t=await e.json();if(t.items&&t.items.length>0){const e=t.items[0].volumeInfo;a.imageUrl=e.imageLinks?e.imageLinks.thumbnail:"",a.description=e.description||""}}catch(r){console.error("Error fetching book data for ISBN:",o,r)}n.push(a)}}a(n),i(!1)},disabled:!e.trim()||n,style:{backgroundColor:n?"#ccc":"#1976D2",color:"white",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:n?"not-allowed":"pointer",fontSize:"1rem"},children:n?"\ud83d\udd04 Processing...":"\ud83d\udcd6 Preview Books"}),s.length>0&&(0,Op.jsxs)("button",{onClick:()=>{s.forEach(e=>{const t=(0,o.A)((0,o.A)({},e),{},{price:"\u20b9".concat(e.price,"/day")});K(t)}),alert("Successfully added ".concat(s.length," books to your collection!")),u(!1),t(""),a([])},style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:["\u2705 Add All (",s.length,") Books"]})]}),s.length>0&&(0,Op.jsxs)("div",{style:{marginTop:"20px"},children:[(0,Op.jsxs)("h4",{style:{color:"#333"},children:["Preview (",s.length," books):"]}),(0,Op.jsx)("div",{style:{maxHeight:"300px",overflow:"auto",border:"1px solid #ddd",borderRadius:"4px",padding:"10px"},children:s.map((e,t)=>(0,Op.jsxs)("div",{style:{display:"flex",padding:"10px",borderBottom:t<s.length-1?"1px solid #eee":"none",alignItems:"center",gap:"15px"},children:[e.imageUrl&&(0,Op.jsx)("img",{src:e.imageUrl,alt:e.title,style:{width:"40px",height:"60px",objectFit:"cover",borderRadius:"2px"}}),(0,Op.jsxs)("div",{style:{flex:1},children:[(0,Op.jsx)("strong",{children:e.title})," by ",e.author,e.isbn&&(0,Op.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["ISBN: ",e.isbn]}),(0,Op.jsxs)("div",{style:{fontSize:"0.9rem",color:"#2E7D32"},children:["\u20b9",e.price,"/day"]})]})]},t))})]})]})})};return(0,Op.jsxs)("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[(0,Op.jsxs)("h2",{style:{fontSize:"2rem",margin:0,color:"#333"},children:["Available Books ",c&&"- ".concat(c)]}),i&&(0,Op.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Op.jsx)("button",{onClick:()=>a(!0),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"+ Add Book"}),(0,Op.jsx)("button",{onClick:()=>u(!0),style:{backgroundColor:"#1976D2",color:"white",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"\ud83d\udcda Bulk Add"})]})]}),(0,Op.jsx)("div",{style:{marginBottom:"12px"},children:(0,Op.jsx)("input",{type:"text",placeholder:"Search books or authors...",value:e,onChange:e=>t(e.target.value),style:{width:"100%",maxWidth:"500px",padding:"12px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"}})}),v,"undefined"!==typeof window&&"localhost"!==window.location.hostname&&/localhost/.test(window.__COMLIB_API_BASE||"")&&(0,Op.jsxs)("div",{style:{padding:"8px 12px",background:"#fff3cd",border:"1px solid #ffe58f",borderRadius:4,marginBottom:12,fontSize:12},children:["Backend not configured: site points to ",(0,Op.jsx)("code",{children:"localhost"}),". Deploy backend & rebuild with REACT_APP_API_URL."]}),!i&&(0,Op.jsx)("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",padding:"15px",marginBottom:"20px",textAlign:"center"},children:(0,Op.jsxs)("p",{style:{margin:0,color:"#856404"},children:["\ud83d\udcda Showing books from Aparna Sarovar Zenith (Demo). Please"," ",(0,Op.jsx)("button",{onClick:()=>G("login"),style:{background:"none",border:"none",color:"#2E7D32",textDecoration:"underline",cursor:"pointer"},children:"login"})," ","to see books from your community."]})}),(0,Op.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:m.map(e=>(0,Op.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:e.available?"white":"#f5f5f5",display:"flex",flexDirection:"column"},children:[e.imageUrl&&(0,Op.jsx)("div",{style:{textAlign:"center",marginBottom:"15px"},children:(0,Op.jsx)("img",{src:e.imageUrl,alt:e.title,style:{maxWidth:"120px",maxHeight:"180px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",objectFit:"cover"}})}),(0,Op.jsx)("h3",{style:{color:"#333",marginBottom:"10px"},children:e.title}),(0,Op.jsxs)("p",{style:{color:"#666",marginBottom:"8px"},children:["by ",e.author]}),(0,Op.jsxs)("p",{style:{color:"#666",marginBottom:"8px",fontSize:"0.9rem"},children:["Owner: ",e.owner]}),(0,Op.jsxs)("p",{style:{color:"#666",marginBottom:"8px",fontSize:"0.9rem"},children:["Community: ",e.community]}),e.isbn&&(0,Op.jsxs)("p",{style:{color:"#666",marginBottom:"10px",fontSize:"0.8rem"},children:["ISBN: ",e.isbn]}),(0,Op.jsx)("p",{style:{color:"#2E7D32",fontWeight:"bold",marginBottom:"15px"},children:e.price}),(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[(0,Op.jsx)("span",{style:{color:e.available?"#2E7D32":"#d32f2f",fontWeight:"bold"},children:e.available?"\u2705 Available":"\u274c Borrowed"}),(0,Op.jsx)("button",{onClick:()=>{if(i){var t;if(e.ownerEmail===i.email)return void alert("You can't request your own book. This is your book!");if(!e.available)return void alert("Sorry, this book is currently not available for borrowing.");const n=null===(t=f[e.ownerEmail])||void 0===t?void 0:t[e.id];if(n&&n.requesterEmail===i.email&&"pending"===n.status)return void alert("You already have a pending request for this book.");(async e=>{if(!i)return alert("Please log in to request books"),G("login"),!1;if(!e.available)return alert("Sorry, this book is not available for borrowing at the moment."),!1;if(e.ownerEmail===i.email)return alert("You cannot request your own book."),!1;if(f[e.ownerEmail]&&f[e.ownerEmail][e.id]&&f[e.ownerEmail][e.id].requesterEmail===i.email)return alert("You have already requested this book."),!1;let t=null;try{const n=new Date,r=new Date(Date.now()+6048e5);t=(await(0,s.WL)({bookId:e._id||e.id,startDate:n,endDate:r}))._id}catch(a){console.warn("Backend request create failed, falling back to local:",a.message)}const n={requesterName:i.name,requesterEmail:i.email,requestDate:(new Date).toISOString(),status:"pending",message:'Hello, I would like to borrow "'.concat(e.title,'" by ').concat(e.author,"."),requestId:t||"LOCAL-".concat(Date.now()),bookId:e._id||e.id},r=(0,o.A)({},f);r[e.ownerEmail]||(r[e.ownerEmail]={}),r[e.ownerEmail][e.id]=n,p(r),localStorage.setItem("communityLibraryRequests",JSON.stringify(r)),alert('Request sent for "'.concat(e.title,'"').concat(t?"":" (stored locally)","."))})(e)}else G("login")},style:{backgroundColor:e.available?"#2E7D32":"#ccc",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:e.available?"pointer":"not-allowed",fontSize:"0.9rem"},disabled:!e.available,children:e.available?"Request Book":"Not Available"})]})]},e.id))}),0===m.length&&(0,Op.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:(0,Op.jsx)("p",{children:"No books found matching your search criteria."})}),n&&(0,Op.jsx)(w,{}),l&&(0,Op.jsx)(k,{})]})},Y=()=>{const e=()=>{const e=null===i||void 0===i?void 0:i.email,t=[];return Object.values(d).forEach(n=>{n.books&&n.books.forEach(n=>{if(n.borrowerEmail===e){const e=W(n.borrowDate,n.dailyRate,n.maxRentalDays||14),r=new Date(n.borrowDate),i=new Date(r.getTime()+24*(n.maxRentalDays||14)*60*60*1e3),s=new Date,a=Math.ceil((i-s)/864e5),l=a<0?Math.abs(a):0;let c=0;l>0&&(c=l<=5?.25:l<=10?.5:1),t.push((0,o.A)((0,o.A)({},n),{},{currentRent:e,dueDate:i.toISOString(),daysLeft:a,overdueDays:l,penaltyMultiplier:c}))}})}),(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"Books I've Borrowed"}),(0,Op.jsx)("button",{onClick:()=>C(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"\xd7"})]}),t.length>0&&(0,Op.jsxs)("div",{style:{backgroundColor:"#FFF3E0",border:"1px solid #FF9800",padding:"15px",borderRadius:"8px",marginBottom:"20px",display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,Op.jsxs)("div",{style:{marginRight:"20px"},children:[(0,Op.jsx)("p",{style:{margin:"0 0 4px 0",fontSize:"0.8rem",color:"#666"},children:"TOTAL OWED NOW"}),(0,Op.jsxs)("p",{style:{margin:0,fontSize:"1.8rem",fontWeight:"bold",color:"#FF9800"},children:["\u20b9",t.reduce((e,t)=>e+(t.currentRent||0),0)]})]}),(0,Op.jsxs)("div",{style:{marginRight:"20px"},children:[(0,Op.jsx)("p",{style:{margin:"0 0 4px 0",fontSize:"0.8rem",color:"#666"},children:"ACTIVE RENTALS"}),(0,Op.jsx)("p",{style:{margin:0,fontSize:"1.4rem",fontWeight:"bold"},children:t.length})]}),(0,Op.jsx)("div",{style:{flex:"1 1 100%",marginTop:"10px",fontSize:"0.8rem",color:"#555"},children:"Rent accrues daily until the owner marks a return. Pay the owner directly when returning."})]}),0===t.length?(0,Op.jsxs)("div",{style:{padding:"30px",textAlign:"center",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:[(0,Op.jsx)("p",{style:{fontSize:"1.1rem",color:"#666"},children:"You haven't borrowed any books yet."}),(0,Op.jsx)("button",{onClick:()=>{C(!1),G("books")},style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginTop:"15px"},children:"Browse Books to Borrow"})]}):(0,Op.jsxs)("div",{style:{display:"grid",gap:"20px"},children:[t.map((e,t)=>(0,Op.jsx)("div",{style:{border:"1px solid #FF9800",borderRadius:"8px",padding:"20px",backgroundColor:"#FFF8E1"},children:(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#333"},children:e.title}),(0,Op.jsxs)("p",{style:{margin:"0 0 8px 0",color:"#666"},children:["by ",e.author]}),(0,Op.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"},children:[(0,Op.jsx)("span",{style:{color:"#666"},children:"Owner:"})," ",(0,Op.jsx)("span",{style:{fontWeight:"bold"},children:e.owner})]}),(0,Op.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"},children:[(0,Op.jsx)("span",{style:{color:"#666"},children:"Borrowed on:"})," ",(0,Op.jsx)("span",{style:{fontWeight:"bold"},children:new Date(e.borrowDate).toLocaleDateString()})]}),(0,Op.jsxs)("p",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"},children:[(0,Op.jsx)("span",{style:{color:"#666"},children:"Rate:"})," ",(0,Op.jsx)("span",{style:{fontWeight:"bold",color:"#2E7D32"},children:e.price})]})]}),(0,Op.jsxs)("div",{style:{textAlign:"right"},children:[(0,Op.jsxs)("div",{style:{backgroundColor:"#FF9800",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"10px"},children:[(0,Op.jsx)("p",{style:{margin:"0 0 5px 0",fontSize:"0.8rem"},children:"CURRENT DUE"}),(0,Op.jsxs)("p",{style:{margin:"0",fontSize:"1.5rem",fontWeight:"bold"},children:["\u20b9",e.currentRent]})]}),(0,Op.jsxs)("p",{style:{fontSize:"0.8rem",color:"#666",margin:"0"},children:[Math.ceil(e.currentRent/e.dailyRate)," days \xd7 \u20b9",e.dailyRate,"/day"]})]})]})},t)),(0,Op.jsxs)("div",{style:{backgroundColor:"#E8F5E9",padding:"15px",borderRadius:"8px",border:"1px solid #2E7D32",marginTop:"20px"},children:[(0,Op.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#2E7D32"},children:"Payment Instructions"}),(0,Op.jsx)("p",{style:{fontSize:"0.9rem",margin:"0 0 8px 0"},children:"Please pay the rent amount directly to the book owner when returning the book."}),(0,Op.jsxs)("p",{style:{fontSize:"0.9rem",margin:"0"},children:[(0,Op.jsx)("strong",{children:"Note:"})," The rent continues to accumulate until the book is marked as returned by the owner."]})]})]})]})})},[t,a]=(0,r.useState)(!1),[u,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(null),[k,S]=(0,r.useState)(""),[E,T]=(0,r.useState)(!1),[I,j]=(0,r.useState)({name:(null===i||void 0===i?void 0:i.name)||"",email:(null===i||void 0===i?void 0:i.email)||"",mobile:(null===i||void 0===i?void 0:i.mobile)||"",block:(null===i||void 0===i?void 0:i.block)||"",apartment:(null===i||void 0===i?void 0:i.apartment)||""}),L=Object.values(d).flatMap(e=>e.books||[]),M=["Aparna Sarovar Zenith","Aparna Sarovar","Aparna Cyberzon"];if(!i)return(0,Op.jsxs)("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[(0,Op.jsx)("h2",{children:"Access Restricted"}),(0,Op.jsx)("p",{children:"Please log in to view your dashboard."}),(0,Op.jsx)("button",{onClick:()=>G("login"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Go to Login"})]});const F=(()=>{var e;if(!i)return[];const t=g.filter(e=>{var t;return(e.ownerEmail||(null===(t=e.owner)||void 0===t?void 0:t.email))===i.email}),n=(null===(e=d[i.email])||void 0===e?void 0:e.books)||[];return t.length?t:n})(),U=F,z=()=>{if("1234"===k){if("delete"===v)h(e=>(0,o.A)((0,o.A)({},e),{},{[i.email]:(0,o.A)((0,o.A)({},e[i.email]),{},{books:e[i.email].books.filter(e=>e.id!==w.bookId)})})),alert("".concat(w.bookTitle," removed from collection"));else if("wallet"===v)alert("Wallet transaction completed successfully!");else if("function"===typeof v)return void v();y(!1),S(""),b(null),x(null)}else alert("Invalid OTP! Please try again. (Use 1234 for demo)")},B=(e,t)=>{b(e),x(t),y(!0),alert("OTP sent to your mobile number for security verification!")},V=()=>(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"400px",width:"90%"},children:[(0,Op.jsx)("h3",{style:{margin:"0 0 20px 0",color:"#333",textAlign:"center"},children:"Security Verification Required"}),(0,Op.jsxs)("p",{style:{textAlign:"center",marginBottom:"20px",color:"#666"},children:["OTP sent to ",i.mobile||"+91XXXXXXXXXX"]}),(0,Op.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,Op.jsx)("input",{type:"text",placeholder:"Enter 6-digit OTP",value:k,onChange:e=>S(e.target.value),style:{padding:"12px",fontSize:"1.5rem",border:"1px solid #ddd",borderRadius:"4px",textAlign:"center",letterSpacing:"2px"},maxLength:"6",autoFocus:!0,onFocus:e=>e.target.select()}),(0,Op.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,Op.jsx)("button",{onClick:()=>{y(!1),S(""),b(null),x(null)},style:{flex:1,padding:"12px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:"Cancel"}),(0,Op.jsx)("button",{onClick:z,style:{flex:1,padding:"12px",border:"none",borderRadius:"4px",backgroundColor:"#2E7D32",color:"white",cursor:"pointer"},children:"Verify"})]})]}),(0,Op.jsx)("div",{style:{backgroundColor:"#e8f5e8",border:"1px solid #2E7D32",borderRadius:"4px",padding:"10px",marginTop:"15px",textAlign:"center"},children:(0,Op.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#2E7D32"},children:[(0,Op.jsx)("strong",{children:"Demo:"})," Use OTP ",(0,Op.jsx)("strong",{children:"123456"})," to verify"]})})]})}),K=()=>{const e=null===i||void 0===i?void 0:i.email,t=f[e]||{},n=[];Object.entries(t).forEach(e=>{let[t,r]=e;if("pending"===r.status){const e=U.find(e=>e.id===t);e&&n.push((0,o.A)((0,o.A)({},r),{},{bookId:t,book:e}))}});const r=[];return Object.entries(t).forEach(e=>{let[t,n]=e;if("borrowed"===n.status){const e=U.find(e=>e.id===t);if(e){const i=W(e.borrowDate,e.dailyRate,e.maxRentalDays||14),s=new Date(e.borrowDate),a=new Date(s.getTime()+24*(e.maxRentalDays||14)*60*60*1e3),l=new Date,c=Math.ceil((a-l)/864e5),u=c<0?Math.abs(c):0;let d=0;u>0&&(d=u<=5?.25:u<=10?.5:1),r.push((0,o.A)((0,o.A)({},n),{},{bookId:t,book:e,currentRent:i,dueDate:a.toISOString(),daysLeft:c,overdueDays:u,penaltyMultiplier:d}))}}}),(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"My Books Collection"}),(0,Op.jsx)("button",{onClick:()=>a(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:"\xd7"})]}),n.length>0&&(0,Op.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,Op.jsxs)("h4",{style:{borderBottom:"2px solid #FF9800",paddingBottom:"8px",color:"#FF9800"},children:["Book Requests Received (",n.length,")"]}),(0,Op.jsx)("div",{style:{display:"grid",gap:"15px",marginTop:"15px"},children:n.map((t,n)=>{var r,a;return(0,Op.jsxs)("div",{style:{border:"1px solid #FF9800",borderRadius:"8px",padding:"15px",backgroundColor:"#FFF8E1"},children:[(0,Op.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h4",{style:{margin:"0 0 5px 0",color:"#333"},children:null===(r=t.book)||void 0===r?void 0:r.title}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#666"},children:["by ",null===(a=t.book)||void 0===a?void 0:a.author]}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#FF9800",fontWeight:"bold"},children:["Requested by: ",t.requesterName]}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",fontSize:"0.9rem",color:"#999"},children:["Requested on: ",new Date(t.requestDate).toLocaleDateString()]}),(0,Op.jsxs)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:["Message: ",t.message||"No message provided"]})]})}),(0,Op.jsxs)("div",{style:{marginTop:"15px",display:"flex",gap:"10px"},children:[(0,Op.jsx)("button",{onClick:()=>{(async e=>{var t;if(!i||!e)return!1;const n=i.email,r=null===(t=f[n])||void 0===t?void 0:t[e];if(!r)return alert("Request not found"),!1;if(!r.requestId||r.requestId.startsWith("LOCAL-"))return alert("Cannot approve locally stored request without backend id. Ask requester to re-initiate when backend is reachable."),!1;try{await(0,s.Jd)(r.requestId);const t=(0,o.A)({},f);t[n][e]=(0,o.A)((0,o.A)({},r),{},{status:"borrowed",approvalDate:(new Date).toISOString(),checkoutDate:(new Date).toISOString()}),p(t),localStorage.setItem("communityLibraryRequests",JSON.stringify(t)),alert("Checkout approved via backend.");try{m(await(0,s.zy)())}catch(a){}return!0}catch(l){return alert("Backend approve failed: "+l.message),!1}})(t.bookId,t.requesterEmail)?alert('Checkout complete! "'.concat(t.book.title,'" is now borrowed by ').concat(t.requesterName,".")):alert("Error processing checkout. Please try again.")},style:{backgroundColor:"#FF9800",color:"white",border:"none",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:"Complete Checkout"}),(0,Op.jsx)("button",{onClick:()=>{const n=(0,o.A)({},f);n[e][t.bookId]=(0,o.A)((0,o.A)({},t),{},{status:"rejected",responseDate:(new Date).toISOString()}),p(n),alert('Request for "'.concat(t.book.title,'" was rejected.'))},style:{backgroundColor:"#F44336",color:"white",border:"none",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Reject Request"})]})]},n)})})]}),r.length>0&&(0,Op.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,Op.jsxs)("h4",{style:{borderBottom:"2px solid #2E7D32",paddingBottom:"8px",color:"#2E7D32"},children:["Books Currently Borrowed (",r.length,")"]}),(0,Op.jsx)("div",{style:{display:"grid",gap:"15px",marginTop:"15px"},children:r.map((e,t)=>{var n,r;return(0,Op.jsxs)("div",{style:{border:"1px solid #2E7D32",borderRadius:"8px",padding:"15px",backgroundColor:"#E8F5E9"},children:[(0,Op.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h4",{style:{margin:"0 0 5px 0",color:"#333"},children:null===(n=e.book)||void 0===n?void 0:n.title}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#666"},children:["by ",null===(r=e.book)||void 0===r?void 0:r.author]}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#2E7D32",fontWeight:"bold"},children:["Borrowed by: ",e.requesterName]}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",fontSize:"0.9rem",color:"#555"},children:["Checkout: ",e.borrowDate?new Date(e.borrowDate).toLocaleDateString():"-"," | Due: ",e.dueDate?new Date(e.dueDate).toLocaleDateString():"-"]}),e.daysLeft>=0?(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",fontSize:"0.85rem",color:e.daysLeft<=2?"#FF9800":"#2E7D32",fontWeight:e.daysLeft<=2?"bold":"normal"},children:[e.daysLeft," day(s) left"]}):(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",fontSize:"0.85rem",color:"#D32F2F",fontWeight:"bold"},children:["Overdue by ",e.overdueDays," day(s) \u2022 Penalty rate ",Math.round(100*e.penaltyMultiplier),"%"]}),(0,Op.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",fontWeight:"bold",color:e.overdueDays>0?"#D32F2F":"#333"},children:["Current Rent: \u20b9",e.currentRent]})]})}),(0,Op.jsx)("div",{style:{marginTop:"15px",display:"flex",gap:"10px"},children:(0,Op.jsx)("button",{onClick:()=>{if(window.confirm('Mark "'.concat(e.book.title,'" as returned by ').concat(e.requesterName,"?\n\n")+"IMPORTANT: Only click 'OK' when:\n1. The borrower has physically returned the book\n2. You have verified the book's condition\n3. You have collected any applicable rent: \u20b9"+e.currentRent)){(async e=>{var t;if(!i||!e)return!1;const n=i.email,r=null===(t=f[n])||void 0===t?void 0:t[e];if(!r)return alert("No request record"),!1;if(!r.requestId||r.requestId.startsWith("LOCAL-"))return alert("Cannot finalize return for local-only request."),!1;try{await(0,s.od)(r.requestId);const t=(0,o.A)({},f);t[n][e]=(0,o.A)((0,o.A)({},r),{},{status:"completed",returnDate:(new Date).toISOString()}),p(t),localStorage.setItem("communityLibraryRequests",JSON.stringify(t)),alert("Return recorded via backend.");try{m(await(0,s.zy)())}catch(a){}return!0}catch(l){return alert("Backend return failed: "+l.message),!1}})(e.bookId)?alert('Return complete! "'.concat(e.book.title,'" is now available again. Earnings added to your account.')):alert("Error processing return. Please try again.")}},style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"bold"},children:"Complete Return"})})]},t)})})]}),(0,Op.jsx)("div",{style:{display:"grid",gap:"15px"},children:U.map(e=>(0,Op.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",backgroundColor:"available"===e.status?"#f8fff8":"#fff8f0"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h4",{style:{margin:"0 0 5px 0",color:"#333"},children:e.title}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",color:"#666"},children:["by ",e.author]}),(0,Op.jsx)("p",{style:{margin:"0 0 5px 0",color:"#2E7D32",fontWeight:"bold"},children:e.price}),(0,Op.jsxs)("p",{style:{margin:"0 0 5px 0",fontSize:"0.9rem",color:"#999"},children:["Added: ",e.dateAdded]}),(0,Op.jsx)("p",{style:{margin:"0",fontSize:"0.9rem",color:"available"===e.status?"#2E7D32":"#FF9800"},children:"available"===e.status?"\u2705 Available":"\ud83d\udcda Borrowed by ".concat(e.borrower)})]}),(0,Op.jsxs)("div",{style:{textAlign:"right"},children:[(0,Op.jsx)("p",{style:{margin:"0 0 10px 0",color:"#666",fontSize:"0.9rem"},children:"Total Earned"}),(0,Op.jsx)("p",{style:{margin:"0",color:"#2E7D32",fontWeight:"bold",fontSize:"1.1rem"},children:e.earnings})]})]}),(0,Op.jsxs)("div",{style:{marginTop:"15px",display:"flex",gap:"10px"},children:[(0,Op.jsx)("button",{onClick:()=>alert("Editing ".concat(e.title,"...")),style:{backgroundColor:"#2196F3",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Edit"}),(0,Op.jsx)("button",{onClick:()=>{const t="available"===e.status?"unavailable":"available";e.id.toString().startsWith("sample")?alert("".concat(e.title," marked as ").concat(t)):h(n=>(0,o.A)((0,o.A)({},n),{},{[i.email]:(0,o.A)((0,o.A)({},n[i.email]),{},{books:n[i.email].books.map(n=>n.id===e.id?(0,o.A)((0,o.A)({},n),{},{status:t}):n)})}))},style:{backgroundColor:"available"===e.status?"#FF9800":"#2E7D32",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"available"===e.status?"Mark Unavailable":"Mark Available"}),(0,Op.jsx)("button",{onClick:()=>{e.id.toString().startsWith("sample")?alert("Cannot delete sample books. Add your own books to manage them."):B("delete",{bookId:e.id,bookTitle:e.title})},style:{backgroundColor:"#d32f2f",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Remove"})]})]},e.id))})]})})},Q=()=>{const[e,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[s,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{a(""),o(!0);const e=await n(763).un();t(e)}catch(e){a(e.message)}finally{o(!1)}})()},[]),(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{background:"#fff",padding:30,borderRadius:8,maxWidth:1e3,width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,Op.jsx)("h3",{style:{margin:0},children:"\ud83d\udc65 User Management"}),(0,Op.jsx)("button",{onClick:()=>D(!1),style:{background:"none",border:"none",fontSize:24,cursor:"pointer"},children:"\xd7"})]}),s&&(0,Op.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:"8px 12px",borderRadius:4,fontSize:12},children:s}),(0,Op.jsx)("div",{style:{overflowX:"auto"},children:(0,Op.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:20},children:[(0,Op.jsx)("thead",{children:(0,Op.jsxs)("tr",{style:{background:"#f5f5f5"},children:[(0,Op.jsx)("th",{style:H,children:"Name"}),(0,Op.jsx)("th",{style:H,children:"Email"}),(0,Op.jsx)("th",{style:H,children:"Community"}),(0,Op.jsx)("th",{style:H,children:"Persona"}),(0,Op.jsx)("th",{style:H,children:"Books"}),(0,Op.jsx)("th",{style:H,children:"Status"})]})}),(0,Op.jsxs)("tbody",{children:[i&&(0,Op.jsx)("tr",{children:(0,Op.jsx)("td",{colSpan:6,style:{padding:20,textAlign:"center"},children:"Loading users..."})}),!i&&0===e.length&&(0,Op.jsx)("tr",{children:(0,Op.jsx)("td",{colSpan:6,style:{padding:20,textAlign:"center",fontSize:14},children:"No users found."})}),e.map(e=>{var t,n,r;return(0,Op.jsxs)("tr",{children:[(0,Op.jsx)("td",{style:q,children:e.name}),(0,Op.jsx)("td",{style:q,children:e.email}),(0,Op.jsx)("td",{style:q,children:e.community}),(0,Op.jsx)("td",{style:q,children:e.persona}),(0,Op.jsx)("td",{style:q,children:null!==(t=null===(n=e.stats)||void 0===n?void 0:n.booksOwned)&&void 0!==t?t:(null===(r=e.books)||void 0===r?void 0:r.length)||0}),(0,Op.jsx)("td",{style:q,children:(0,Op.jsx)("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:12,background:"suspended"!==e.status?"#e8f5e8":"#ffebee",color:"suspended"!==e.status?"#2e7d32":"#d32f2f"},children:e.status||"active"})})]},e._id)})]})]})})]})})},X=()=>(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"1000px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"\ud83d\udcda All Books Management"}),(0,Op.jsx)("button",{onClick:()=>R(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xd7"})]}),(0,Op.jsx)("div",{style:{marginBottom:"20px"},children:(0,Op.jsxs)("p",{style:{color:"#666",margin:0},children:["Total Books: ",L.length," | Available: ",L.filter(e=>e.available).length," | Borrowed: ",L.filter(e=>!e.available).length]})}),(0,Op.jsx)("div",{style:{overflowX:"auto"},children:(0,Op.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Op.jsx)("thead",{children:(0,Op.jsxs)("tr",{style:{backgroundColor:"#f5f5f5"},children:[(0,Op.jsx)("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Title"}),(0,Op.jsx)("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Author"}),(0,Op.jsx)("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Owner"}),(0,Op.jsx)("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Community"}),(0,Op.jsx)("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Status"}),(0,Op.jsx)("th",{style:{padding:"12px",border:"1px solid #ddd",textAlign:"left"},children:"Price"})]})}),(0,Op.jsx)("tbody",{children:L.map(e=>(0,Op.jsxs)("tr",{children:[(0,Op.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:e.title}),(0,Op.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:e.author}),(0,Op.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:e.owner}),(0,Op.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:e.community}),(0,Op.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:(0,Op.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"0.8rem",backgroundColor:e.available?"#e8f5e8":"#ffebee",color:e.available?"#2e7d32":"#d32f2f"},children:e.available?"Available":"Borrowed"})}),(0,Op.jsx)("td",{style:{padding:"12px",border:"1px solid #ddd"},children:e.price})]},e.id))})]})})]})}),J=()=>(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"800px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"\ud83c\udfd8\ufe0f Community Management"}),(0,Op.jsx)("button",{onClick:()=>O(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xd7"})]}),(0,Op.jsx)("div",{style:{display:"grid",gap:"20px"},children:M.map(e=>{const t=Object.values(d).filter(t=>t.community===e),n=L.filter(t=>t.community===e);return(0,Op.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:"#fafafa"},children:[(0,Op.jsx)("h4",{style:{margin:"0 0 15px 0",color:"#333"},children:e}),(0,Op.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"15px",fontSize:"0.9rem"},children:[(0,Op.jsxs)("div",{children:[(0,Op.jsx)("strong",{children:"\ud83d\udc65 Users:"})," ",t.length,(0,Op.jsx)("br",{}),(0,Op.jsxs)("span",{style:{color:"#666"},children:["Verified: ",t.filter(e=>!1!==e.verified).length]})]}),(0,Op.jsxs)("div",{children:[(0,Op.jsx)("strong",{children:"\ud83d\udcda Books:"})," ",n.length,(0,Op.jsx)("br",{}),(0,Op.jsxs)("span",{style:{color:"#666"},children:["Available: ",n.filter(e=>e.available).length]})]}),(0,Op.jsxs)("div",{children:[(0,Op.jsx)("strong",{children:"\ud83d\udcb0 Activity:"}),(0,Op.jsx)("br",{}),(0,Op.jsxs)("span",{style:{color:"#666"},children:["Total Earnings: \u20b9",n.reduce((e,t)=>{var n;return e+parseInt((null===(n=t.earnings)||void 0===n?void 0:n.replace("\u20b9",""))||"0")},0)]})]})]})]},e)})})]})}),Y=()=>{const e=()=>{if("1234"!==k)return void alert("Invalid OTP. Please enter 1234 for demo.");const e=(0,o.A)((0,o.A)({},i),{},{name:I.name,email:I.email,mobile:I.mobile,block:I.block,apartment:I.apartment}),t=(0,o.A)((0,o.A)({},d),{},{[i.email]:(0,o.A)((0,o.A)({},d[i.email]),e)});I.email!==i.email&&(delete t[i.email],t[I.email]=(0,o.A)((0,o.A)({},d[i.email]),e)),h(t),l(e),localStorage.setItem("communityLibraryAllUsers",JSON.stringify(t)),localStorage.setItem("communityLibraryCurrentUser",JSON.stringify(e)),alert("Profile updated successfully!"),T(!1),y(!1),S("")};return(0,Op.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,Op.jsxs)("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Op.jsx)("h3",{style:{margin:0,color:"#333"},children:"\u270f\ufe0f Edit Profile"}),(0,Op.jsx)("button",{onClick:()=>T(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer"},children:"\xd7"})]}),(0,Op.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Op.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"Name *"}),(0,Op.jsx)("input",{type:"text",value:I.name,onChange:e=>j((0,o.A)((0,o.A)({},I),{},{name:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},required:!0})]}),(0,Op.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Op.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"Email *"}),(0,Op.jsx)("input",{type:"email",value:I.email,onChange:e=>j((0,o.A)((0,o.A)({},I),{},{email:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},required:!0})]}),(0,Op.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,Op.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"Mobile Number"}),(0,Op.jsx)("input",{type:"tel",value:I.mobile,onChange:e=>j((0,o.A)((0,o.A)({},I),{},{mobile:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},placeholder:"Enter mobile number"})]}),(0,Op.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[(0,Op.jsxs)("div",{children:[(0,Op.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"Block"}),(0,Op.jsx)("input",{type:"text",value:I.block,onChange:e=>j((0,o.A)((0,o.A)({},I),{},{block:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},placeholder:"e.g., A, B, C"})]}),(0,Op.jsxs)("div",{children:[(0,Op.jsx)("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"Apartment"}),(0,Op.jsx)("input",{type:"text",value:I.apartment,onChange:e=>j((0,o.A)((0,o.A)({},I),{},{apartment:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},placeholder:"e.g., 101, 205"})]})]}),(0,Op.jsx)("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",padding:"10px",marginBottom:"20px"},children:(0,Op.jsxs)("p",{style:{margin:0,color:"#856404",fontSize:"0.9rem"},children:[(0,Op.jsx)("strong",{children:"\ud83d\udcf1 Note:"})," Profile changes require OTP verification. Use ",(0,Op.jsx)("strong",{children:"1234"})," for demo."]})}),(0,Op.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,Op.jsx)("button",{onClick:()=>T(!1),style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Cancel"}),(0,Op.jsx)("button",{onClick:()=>{I.name&&I.email?(b(e),x({action:"profile_update"}),y(!0)):alert("Name and email are required fields.")},style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Save Changes"})]})]})})};return(0,Op.jsxs)("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[(0,Op.jsxs)("h2",{style:{fontSize:"2rem",marginBottom:"30px",color:"#333"},children:["Dashboard - Welcome ",i.name,"!","superadmin"===i.role&&(0,Op.jsx)("span",{style:{color:"#d32f2f",fontSize:"1rem",marginLeft:"10px"},children:"(Super Admin)"})]}),(0,Op.jsx)("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",padding:"20px",marginBottom:"30px"},children:(0,Op.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h3",{style:{color:"#333",marginTop:0,marginBottom:"10px"},children:"\ud83d\udc64 Profile Information"}),(0,Op.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,Op.jsx)("strong",{children:"Email:"})," ",i.email]}),(0,Op.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,Op.jsx)("strong",{children:"Mobile:"})," ",i.mobile||"Not provided"]}),(0,Op.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,Op.jsx)("strong",{children:"Community:"})," ",i.community]}),i.block&&(0,Op.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,Op.jsx)("strong",{children:"Block:"})," ",i.block]}),i.apartment&&(0,Op.jsxs)("p",{style:{margin:"5px 0",color:"#666"},children:[(0,Op.jsx)("strong",{children:"Apartment:"})," ",i.apartment]})]}),(0,Op.jsx)("button",{onClick:()=>{j({name:(null===i||void 0===i?void 0:i.name)||"",email:(null===i||void 0===i?void 0:i.email)||"",mobile:(null===i||void 0===i?void 0:i.mobile)||"",block:(null===i||void 0===i?void 0:i.block)||"",apartment:(null===i||void 0===i?void 0:i.apartment)||""}),T(!0)},style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"\u270f\ufe0f Edit Profile"})]})}),"superadmin"===i.role&&(0,Op.jsxs)("div",{style:{backgroundColor:"#fff3e0",border:"2px solid #ff9800",borderRadius:"8px",padding:"20px",marginBottom:"30px"},children:[(0,Op.jsx)("h3",{style:{color:"#e65100",marginTop:0},children:"\ud83d\udd27 Super Admin Controls"}),(0,Op.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,Op.jsx)("button",{onClick:()=>D(!0),style:{backgroundColor:"#ff9800",color:"white",border:"none",padding:"12px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"\ud83d\udc65 Manage Users"}),(0,Op.jsx)("button",{onClick:()=>R(!0),style:{backgroundColor:"#ff9800",color:"white",border:"none",padding:"12px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"\ud83d\udcda All Books"}),(0,Op.jsx)("button",{onClick:()=>O(!0),style:{backgroundColor:"#ff9800",color:"white",border:"none",padding:"12px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"\ud83c\udfd8\ufe0f Communities"})]})]}),c&&(0,Op.jsx)("div",{style:{backgroundColor:"#e8f5e8",border:"1px solid #2E7D32",borderRadius:"8px",padding:"15px",marginBottom:"30px"},children:(0,Op.jsxs)("p",{style:{margin:0,color:"#2E7D32",fontWeight:"bold"},children:["\ud83c\udfd8\ufe0f Community: ",c]})}),(0,Op.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"40px"},children:[(0,Op.jsxs)("div",{style:{padding:"20px",backgroundColor:"#E8F5E8",borderRadius:"8px",border:"1px solid #2E7D32"},children:[(0,Op.jsx)("h3",{style:{color:"#2E7D32",marginBottom:"15px"},children:"\ud83d\udcda My Books"}),(0,Op.jsxs)("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#333"},children:[U.length," Listed"]}),(0,Op.jsxs)("p",{style:{color:"#666"},children:[U.filter(e=>"borrowed"===e.status).length," Currently Borrowed"]}),(0,Op.jsx)("button",{onClick:()=>a(!0),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",marginTop:"10px"},children:"Manage Books"}),(0,Op.jsx)("button",{onClick:()=>C(!0),style:{backgroundColor:"#FF9800",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",marginTop:"10px",marginLeft:"10px"},children:"View Borrowed"})]}),(0,Op.jsxs)("div",{style:{padding:"20px",backgroundColor:"#FFF3E0",borderRadius:"8px",border:"1px solid #FF9800"},children:[(0,Op.jsx)("h3",{style:{color:"#FF9800",marginBottom:"15px"},children:"\ud83d\udcd6 Borrowed"}),(()=>{const e=null===i||void 0===i?void 0:i.email,t=[];Object.values(d).forEach(n=>{n.books&&n.books.forEach(n=>{n.borrowerEmail===e&&t.push((0,o.A)((0,o.A)({},n),{},{currentRent:W(n.borrowDate,n.dailyRate||10,n.maxRentalDays||14),maxRentalDays:n.maxRentalDays||14}))})});const n=t.filter(e=>{if(!e.borrowDate)return!1;const t=new Date(e.borrowDate),n=new Date(t.getTime()+24*e.maxRentalDays*60*60*1e3),r=Math.ceil((n-new Date)/864e5);return r<=2&&r>=0}).length,r=t.reduce((e,t)=>e+(t.currentRent||0),0);return(0,Op.jsxs)(Op.Fragment,{children:[(0,Op.jsxs)("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#333",marginBottom:"6px"},children:[t.length," Books"]}),(0,Op.jsxs)("p",{style:{color:"#666",margin:"4px 0"},children:[n," Due Soon"]}),(0,Op.jsxs)("p",{style:{color:"#FF9800",fontWeight:"bold",margin:"4px 0"},children:["Owed Now: \u20b9",r]}),(0,Op.jsx)("button",{onClick:()=>C(!0),style:{backgroundColor:"#FF9800",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",marginTop:"8px"},children:"View Borrowed Books"})]})})()]}),(0,Op.jsxs)("div",{style:{padding:"20px",backgroundColor:"#E3F2FD",borderRadius:"8px",border:"1px solid #2196F3"},children:[(0,Op.jsx)("h3",{style:{color:"#2196F3",marginBottom:"15px"},children:"\ud83d\udcb0 Wallet (WIP)"}),(0,Op.jsx)("p",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#333",marginBottom:"6px"},children:"Offline Only"}),(0,Op.jsx)("p",{style:{color:"#666",fontSize:"0.9rem",margin:0},children:"Coming soon: deposits, payouts, history"})]})]}),(0,Op.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h3",{style:{marginBottom:"20px",color:"#333"},children:"Recent Activity"}),(0,Op.jsx)("div",{style:{backgroundColor:"white",border:"1px solid #ddd",borderRadius:"8px",padding:"20px"},children:(()=>{const e=[];Object.entries(f).forEach(t=>{let[n,r]=t;Object.entries(r||{}).forEach(t=>{var r;let[i,o]=t;const s=((null===(r=d[n])||void 0===r?void 0:r.books)||[]).find(e=>String(e.id)===String(i));if(!s)return;const a=s.title;e.push({time:o.requestDate,type:"Request",text:"".concat(o.requesterName,' requested "').concat(a,'"')}),o.checkoutDate&&e.push({time:o.checkoutDate,type:"Checkout",text:'Checkout: "'.concat(a,'" to ').concat(o.requesterName)}),o.returnDate&&e.push({time:o.returnDate,type:"Return",text:'Returned: "'.concat(a,'" by ').concat(o.requesterName)})})}),e.sort((e,t)=>new Date(t.time)-new Date(e.time));const t=e.slice(0,5);return 0===t.length?(0,Op.jsx)("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:"No activity yet."}):t.map((e,n)=>(0,Op.jsxs)("div",{style:{borderBottom:n<t.length-1?"1px solid #eee":"none",paddingBottom:n<t.length-1?"10px":"0",marginBottom:n<t.length-1?"10px":"0"},children:[(0,Op.jsxs)("p",{style:{margin:"0 0 4px 0",fontSize:"0.9rem"},children:[(0,Op.jsxs)("strong",{children:[e.type,":"]})," ",e.text]}),(0,Op.jsx)("p",{style:{margin:0,fontSize:"0.75rem",color:"#666"},children:new Date(e.time).toLocaleString()})]},n))})()})]}),(0,Op.jsxs)("div",{children:[(0,Op.jsx)("h3",{style:{marginBottom:"20px",color:"#333"},children:"Quick Actions"}),(0,Op.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,Op.jsx)("button",{onClick:()=>G("books"),style:{backgroundColor:"#2E7D32",color:"white",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer"},children:"Add New Book"}),(0,Op.jsx)("button",{onClick:()=>B("wallet",{action:"manage"}),style:{backgroundColor:"#2196F3",color:"white",border:"none",padding:"12px",borderRadius:"4px",cursor:"pointer"},children:"Manage Wallet (Requires OTP)"})]})]})]}),t&&(0,Op.jsx)(K,{}),_&&(0,Op.jsx)(e,{}),u&&(0,Op.jsx)(V,{}),E&&(0,Op.jsx)(Y,{}),N&&(0,Op.jsx)(Q,{}),A&&(0,Op.jsx)(X,{}),P&&(0,Op.jsx)(J,{})]})},$=()=>{const[e,t]=(0,r.useState)({emailOrUsername:"",password:"",mobile:""}),[n,i]=(0,r.useState)("standard"),[a,c]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1);return(0,Op.jsxs)("div",{style:{padding:"2rem",maxWidth:"400px",margin:"0 auto"},children:[(0,Op.jsx)("h2",{style:{textAlign:"center",marginBottom:"30px",color:"#333"},children:"Login"}),(0,Op.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:(0,Op.jsxs)("div",{style:{display:"inline-flex",backgroundColor:"#f0f0f0",borderRadius:"4px",padding:"2px"},children:[(0,Op.jsx)("button",{type:"button",onClick:()=>i("standard"),style:{padding:"8px 16px",border:"none",borderRadius:"4px",backgroundColor:"standard"===n?"#2E7D32":"transparent",color:"standard"===n?"white":"#666",cursor:"pointer",fontSize:"0.9rem"},children:"Username/Email"}),(0,Op.jsx)("button",{type:"button",onClick:()=>i("mobile"),style:{padding:"8px 16px",border:"none",borderRadius:"4px",backgroundColor:"mobile"===n?"#2E7D32":"transparent",color:"mobile"===n?"white":"#666",cursor:"pointer",fontSize:"0.9rem"},children:"Mobile + OTP"})]})}),(0,Op.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),c(null),p(!0);try{try{var n;const t=await(0,s.Lx)(e.emailOrUsername,e.password);if(null!==t&&void 0!==t&&null!==(n=t.tokens)&&void 0!==n&&n.accessToken){localStorage.setItem("communityLibraryJwt",t.tokens.accessToken);const e=t.user,n={name:e.fullName||e.email,email:e.email,community:e.communityName||e.community};return l(n),u(n.community),localStorage.setItem("communityLibraryCurrentUser",JSON.stringify(n)),alert("Backend login successful"),void G("dashboard")}}catch(ml){console.warn("Backend login failed, falling back to local/demo:",ml.message)}const t=d[e.emailOrUsername];if(t&&(!t.password||t.password===e.password))return l(t),u(t.community),localStorage.setItem("communityLibraryCurrentUser",JSON.stringify(t)),alert("Local login successful for ".concat(t.community)),void G("dashboard");const r={name:e.emailOrUsername.includes("@")?e.emailOrUsername.split("@")[0]:e.emailOrUsername,email:e.emailOrUsername.includes("@")?e.emailOrUsername:"".concat(e.emailOrUsername,"@example.com"),mobile:e.mobile};let i="Aparna Sarovar Zenith",a="resident";"admin@aparna.com"===e.emailOrUsername&&"admin123"===e.password?(i="All",a="superadmin"):e.emailOrUsername.includes("sarovar")||"sarovar_user"===e.emailOrUsername?i="Aparna Sarovar":(e.emailOrUsername.includes("cyberzon")||"cyberzon_user"===e.emailOrUsername)&&(i="Aparna Cyberzon"),r.community=i,r.role=a,h(e=>(0,o.A)((0,o.A)({},e),{},{[r.email]:(0,o.A)((0,o.A)({},r),{},{books:[]})})),l(r),u(i),localStorage.setItem("communityLibraryCurrentUser",JSON.stringify(r)),alert("Demo login: ".concat(i)),G("dashboard")}catch(r){c(r.message)}finally{p(!1)}},style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,Op.jsx)("input",{type:"text",placeholder:"standard"===n?"Username or Email":"Email",value:e.emailOrUsername,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{emailOrUsername:e.target.value})),style:{padding:"12px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"},required:!0}),"mobile"===n&&(0,Op.jsx)("input",{type:"tel",placeholder:"Mobile Number (+91XXXXXXXXXX)",value:e.mobile,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{mobile:e.target.value})),style:{padding:"12px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"},required:!0}),(0,Op.jsx)("input",{type:"password",placeholder:"Password",value:e.password,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{password:e.target.value})),style:{padding:"12px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:"4px",boxSizing:"border-box"},required:!0}),(0,Op.jsx)("button",{type:"submit",disabled:f,style:{backgroundColor:f?"#94c9a0":"#2E7D32",color:"white",border:"none",padding:"12px",fontSize:"1rem",borderRadius:"4px",cursor:f?"not-allowed":"pointer"},children:"standard"===n?f?"Logging in...":"Login (Backend/Local)":"Send OTP & Login"}),a&&(0,Op.jsx)("div",{style:{color:"#c62828",fontSize:"0.8rem"},children:a})]}),"standard"===n&&(0,Op.jsx)("div",{style:{backgroundColor:"#e8f5e8",border:"1px solid #2E7D32",borderRadius:"4px",padding:"10px",marginTop:"20px",textAlign:"center"},children:(0,Op.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"#2E7D32"},children:[(0,Op.jsx)("strong",{children:"Demo accounts:"}),(0,Op.jsx)("br",{}),"Username: ",(0,Op.jsx)("strong",{children:"john_doe"})," \u2192 Aparna Sarovar Zenith",(0,Op.jsx)("br",{}),"Username: ",(0,Op.jsx)("strong",{children:"sarovar_user"})," \u2192 Aparna Sarovar",(0,Op.jsx)("br",{}),"Username: ",(0,Op.jsx)("strong",{children:"cyberzon_user"})," \u2192 Aparna Cyberzon",(0,Op.jsx)("br",{}),"Username: ",(0,Op.jsx)("strong",{children:"admin@aparna.com"})," \u2192 Super Admin (All Communities)",(0,Op.jsx)("br",{}),"Password: ",(0,Op.jsx)("strong",{children:"any"})]})}),(0,Op.jsxs)("p",{style:{textAlign:"center",marginTop:"20px"},children:["Don't have an account?",(0,Op.jsx)("button",{onClick:()=>G("register"),style:{background:"none",border:"none",color:"#2E7D32",cursor:"pointer",textDecoration:"underline",marginLeft:"5px"},children:"Register here"})]})]})},Z=()=>{const[e,t]=(0,r.useState)({fullName:"",email:"",mobile:"",whatsappSame:!0,whatsappNumber:"",community:"",blockNumber:"",apartmentNumber:"",password:"",confirmPassword:""}),[i,s]=(0,r.useState)("form"),[a,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[g,m]=(0,r.useState)({email:"",phone:""});return(0,Op.jsxs)("div",{style:{padding:"2rem",maxWidth:400,margin:"0 auto"},children:[(0,Op.jsx)("h2",{style:{textAlign:"center",marginBottom:30,color:"#333"},children:"Join ComLib"}),"form"===i&&(0,Op.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(""),e.password!==e.confirmPassword)return h("Passwords do not match");c(!0);try{{const t=await async function(e,t,n){var r;const i=gn(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let s;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await hn(i,o,"signUpPassword");s=Mn(i,e)}else s=Mn(i,o).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await hn(i,o,"signUpPassword");return Mn(i,e)}return Promise.reject(e)});const a=await s.catch(e=>Promise.reject(e)),l=await Fn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(Np,e.email,e.password);try{await Gn(t.user,{displayName:e.fullName})}catch(n){}await function(e,t,n){e=Xf(e,Zf);const r=Xf(e.firestore,ip),i=Ip(e.converter,t,n);return Ap(r,[yp(mp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Cd.none())])}(np(Dp,"users",t.user.uid),{fullName:e.fullName,email:e.email,mobile:e.mobile,whatsapp:e.whatsappSame?e.mobile:e.whatsappNumber,community:e.community,blockNumber:e.blockNumber,apartmentNumber:e.apartmentNumber,createdAt:new vp("serverTimestamp"),role:"user"});try{await Kn(t.user)}catch(n){}const r={name:e.fullName,email:e.email,community:e.community,role:"user"};return localStorage.setItem("communityLibraryCurrentUser",JSON.stringify(r)),l(r),F(t.user),s("success"),void setTimeout(()=>G("dashboard"),1200)}}catch(r){let e=r.message;if(r.code)switch(r.code){case"auth/email-already-in-use":e="Email already registered. Try logging in.";break;case"auth/weak-password":e="Password too weak (min 6 characters).";break;case"auth/invalid-email":e="Email format invalid."}h(e)}finally{c(!1)}},style:{display:"flex",flexDirection:"column",gap:20},children:[d&&(0,Op.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:"8px 10px",borderRadius:4,fontSize:12},children:d}),(0,Op.jsx)("input",{placeholder:"Full Name",value:e.fullName,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{fullName:e.target.value})),required:!0,style:B}),(0,Op.jsx)("input",{type:"email",placeholder:"Email",value:e.email,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{email:e.target.value})),required:!0,style:B}),(0,Op.jsx)("input",{type:"tel",placeholder:"Mobile Number (+91XXXXXXXXXX)",value:e.mobile,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{mobile:e.target.value})),required:!0,style:B}),(0,Op.jsxs)("div",{style:{background:"#f5f5f5",padding:10,border:"1px solid #ddd",borderRadius:4},children:[(0,Op.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:14},children:[(0,Op.jsx)("input",{type:"checkbox",checked:e.whatsappSame,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{whatsappSame:e.target.checked}))})," Same number for WhatsApp"]}),!e.whatsappSame&&(0,Op.jsx)("input",{type:"tel",placeholder:"WhatsApp Number",value:e.whatsappNumber,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{whatsappNumber:e.target.value})),style:{marginTop:8,padding:10,width:"100%",border:"1px solid #ccc",borderRadius:4},required:!0}),(0,Op.jsx)("p",{style:{margin:"8px 0 0",fontSize:11,color:"#555"},children:"Used only for borrow/return coordination."})]}),(0,Op.jsxs)("select",{value:e.community,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{community:e.target.value})),required:!0,style:B,children:[(0,Op.jsx)("option",{value:"",children:"Select Your Community/Society"}),["Aparna Sarovar Zenith","Aparna Sarovar","Aparna Cyberzon","Aparna Cyberlife","Aparna Cybercommune","Aparna Sarovar Zicon","Aparna Sarovar Grande"].map(e=>(0,Op.jsx)("option",{value:e,children:e},e))]}),(0,Op.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,Op.jsx)("input",{placeholder:"Block",value:e.blockNumber,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{blockNumber:e.target.value})),required:!0,style:(0,o.A)((0,o.A)({},B),{},{flex:1})}),(0,Op.jsx)("input",{placeholder:"Apartment",value:e.apartmentNumber,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{apartmentNumber:e.target.value})),required:!0,style:(0,o.A)((0,o.A)({},B),{},{flex:1})})]}),(0,Op.jsx)("input",{type:"password",placeholder:"Password",value:e.password,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{password:e.target.value})),required:!0,style:B}),(0,Op.jsx)("input",{type:"password",placeholder:"Confirm Password",value:e.confirmPassword,onChange:e=>t(t=>(0,o.A)((0,o.A)({},t),{},{confirmPassword:e.target.value})),required:!0,style:B}),(0,Op.jsx)("button",{disabled:a,type:"submit",style:V,children:a?"Creating...":"Create Account"})]}),"otp"===i&&(0,Op.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(""),!f)return h("Enter the OTP sent to your phone/email (simulated)");try{c(!0);const{verified:t}=await n(763).RY({email:g.email,otp:f});if(!t)return h("OTP not valid");const r=await n(763).Lx(e.email,e.password),{user:i,tokens:o}=r;localStorage.setItem("communityLibraryJwt",o.accessToken),localStorage.setItem("communityLibraryCurrentUser",JSON.stringify(i)),l(i),u(i.community),s("success"),setTimeout(()=>G("dashboard"),1200)}catch(r){h(r.message)}finally{c(!1)}},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[d&&(0,Op.jsx)("div",{style:{background:"#ffebee",color:"#c62828",padding:"8px 10px",borderRadius:4,fontSize:12},children:d}),(0,Op.jsxs)("p",{style:{fontSize:"14px",lineHeight:1.4},children:["We sent a verification code to ",(0,Op.jsx)("strong",{children:g.email}),". Enter the 6-digit OTP to verify your account (simulation accepts any 6 digits)."]}),(0,Op.jsx)("input",{value:f,onChange:e=>p(e.target.value),placeholder:"Enter OTP",required:!0,style:B,maxLength:6}),(0,Op.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,Op.jsx)("button",{type:"button",disabled:a,onClick:()=>s("form"),style:(0,o.A)((0,o.A)({},V),{},{background:"#888"}),children:"Back"}),(0,Op.jsx)("button",{type:"submit",disabled:a||f.length<4,style:V,children:a?"Verifying...":"Verify & Continue"})]})]}),"success"===i&&(0,Op.jsxs)("div",{style:{textAlign:"center"},children:[(0,Op.jsx)("h3",{children:"Registration Complete"}),(0,Op.jsx)("p",{style:{fontSize:"1rem",color:"#333"},children:"Redirecting to dashboard..."})]}),(0,Op.jsxs)("p",{style:{textAlign:"center",marginTop:20},children:["Already have an account? ",(0,Op.jsx)("button",{onClick:()=>G("login"),style:{background:"none",border:"none",color:"#2E7D32",cursor:"pointer",textDecoration:"underline",marginLeft:5},children:"Login here"})]})]})},ee=M&&M.emailVerified;return(0,Op.jsxs)("div",{className:"App",children:[(0,Op.jsx)(Q,{}),(0,Op.jsx)(Lp,{user:M}),(0,Op.jsx)("main",{style:{minHeight:"calc(100vh - 80px)",backgroundColor:"#f5f5f5"},children:(()=>{switch(e){case"home":default:return(0,Op.jsx)(X,{});case"books":return(0,Op.jsx)(J,{});case"dashboard":return(0,Op.jsx)(Y,{});case"login":return(0,Op.jsx)($,{});case"register":return(0,Op.jsx)(Z,{})}})()}),(0,Op.jsx)(jp,{user:M}),(0,Op.jsx)("button",{className:"btn btn-success",disabled:!ee,onClick:()=>t("books"),children:"+ Add Book"}),!ee&&(0,Op.jsx)("div",{style:{fontSize:12,color:"#b35e00",marginTop:4},children:"Verify email to add books."})]})};i.createRoot(document.getElementById("root")).render((0,Op.jsx)(r.StrictMode,{children:(0,Op.jsx)(Mp,{})}))})();
//# sourceMappingURL=main.10e4afdc.js.map