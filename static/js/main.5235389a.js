/*! For license information please see main.5235389a.js.LICENSE.txt */
(()=>{"use strict";var e={205:(e,t,n)=>{e.exports=n(524)},452:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(772)},524:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!x.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,k(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(s,t,i,"",function(e){return e})):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",k(e))for(var c=0;c<e.length;c++){var u=o+C(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+C(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},713:(e,t,n)=>{e.exports=n(723)},723:(e,t,n)=>{var r=n(205),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},772:(e,t,n)=>{var r=n(205),i=n(963);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(vi){var r=vi}Reflect.construct(e,[],t)}else{try{t.call()}catch(vi){r=vi}e.call(t.prototype)}else{try{throw Error()}catch(vi){r=vi}e()}}catch(vi){if(vi&&r&&"string"===typeof vi.stack){for(var i=vi.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case _:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Ll){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,xe=null;function _e(e){if(e=ki(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=Ei(t),Se(e.stateNode,e.type,t))}}function Ie(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Ee||null!==xe)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Me=null,Fe=!1,Ue=null,ze={onError:function(e){je=!0,Me=e}};function Ve(e,t,n,r,i,o,s,a,l){je=!1,Me=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,St,Et,xt,_t,It=!1,Tt=[],Ct=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=wi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void _t(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){It=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Rt.forEach(Ut),Pt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==At&&Vt(At,e),null!==Nt&&Vt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Kt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=jt(Ct,e,t,n,r,i),!0;case"dragenter":return At=jt(At,e,t,n,r,i),!0;case"mouseover":return Nt=jt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,jt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,jt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=ki(i);if(null!==o&&kt(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=wi(e=ke(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(M({},fn,{dataTransfer:0})),gn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(M({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function _n(){return xn}var In=M({},dn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(In),Cn=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Nn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var jn=u&&"TextEvent"in window&&!Ln,Mn=u&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ie(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(Si(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,ke(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Er={},xr={};function _r(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Ir=_r("animationend"),Tr=_r("animationiteration"),Cr=_r("animationstart"),Ar=_r("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,a,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=wi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=o,i=ke(n),s=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ir:case Tr:case Cr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[mi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Si(l),f=null==c?a:Si(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,wi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(s,a,l,u,!1),null!==c&&null!==d&&Qr(s,d,c,u,!0)}if("select"===(l=(a=r?Si(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Wn(a))if($n)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?Si(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(Hr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(Hr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,mi="__reactContainer$"+di,gi="__reactEvents$"+di,yi="__reactListeners$"+di,bi="__reactHandles$"+di;function wi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ei(e){return e[fi]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ci(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ai(e,t){_i++,xi[_i]=e.current,e.current=t}var Ni={},Pi=Ii(Ni),Di=Ii(!1),Oi=Ni;function Li(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ci(Di),Ci(Pi)}function Fi(e,t,n){if(Pi.current!==Ni)throw Error(o(168));Ai(Pi,t),Ai(Di,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return M({},n,r)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Oi=Pi.current,Ai(Pi,e),Ai(Di,Di.current),!0}function Vi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ui(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Di),Ci(Pi),Ai(Pi,e)):Ci(Di),Ai(Di,n)}var Bi=null,qi=!1,Wi=!1;function Hi(e){null===Bi?Bi=[e]:Bi.push(e)}function Ki(){if(!Wi&&null!==Bi){Wi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,qi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ge(Ze,Ki),i}finally{bt=t,Wi=!1}}return null}var Gi=[],Qi=0,Yi=null,Xi=0,$i=[],Ji=0,Zi=null,eo=1,to="";function no(e,t){Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=e,Xi=t}function ro(e,t,n){$i[Ji++]=eo,$i[Ji++]=to,$i[Ji++]=Zi,Zi=e;var r=eo;e=to;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,eo=1<<32-st(t)+i|n<<i|r,to=o+e}else eo=1<<o|n<<i|r,to=e}function io(e){null!==e.return&&(no(e,1),ro(e,1,0))}function oo(e){for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null;for(;e===Zi;)Zi=$i[--Ji],$i[Ji]=null,to=$i[--Ji],$i[Ji]=null,eo=$i[--Ji],$i[Ji]=null}var so=null,ao=null,lo=!1,co=null;function uo(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ho(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,so=e,ao=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,so=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:eo,overflow:to}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,so=e,ao=null,!0);default:return!1}}function fo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function po(e){if(lo){var t=ao;if(t){var n=t;if(!ho(e,t)){if(fo(e))throw Error(o(418));t=ci(n.nextSibling);var r=so;t&&ho(e,t)?uo(r,n):(e.flags=-4097&e.flags|2,lo=!1,so=e)}}else{if(fo(e))throw Error(o(418));e.flags=-4097&e.flags|2,lo=!1,so=e}}}function mo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;so=e}function go(e){if(e!==so)return!1;if(!lo)return mo(e),lo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ao)){if(fo(e))throw yo(),Error(o(418));for(;t;)uo(e,t),t=ci(t.nextSibling)}if(mo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=so?ci(e.stateNode.nextSibling):null;return!0}function yo(){for(var e=ao;e;)e=ci(e.nextSibling)}function vo(){ao=so=null,lo=!1}function bo(e){null===co?co=[e]:co.push(e)}var wo=w.ReactCurrentBatchConfig;function ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function So(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Eo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Eo(o)===t.type)?((r=i(t,n.props)).ref=ko(e,t,n),r.return=e,r):((r=zc(n.type,n.key,n.props,null,e.mode,r)).ref=ko(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Vc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=zc(t.type,t.key,t.props,null,e.mode,n)).ref=ko(e,null,t),n.return=e,n;case S:return(t=Wc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Vc(t,e.mode,n,null)).return=e,t;So(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);So(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);So(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),lo&&no(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return lo&&no(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),lo&&no(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),lo&&no(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return lo&&no(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),lo&&no(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case k:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Eo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=ko(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===E?((o=Vc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=zc(s.type,s.key,s.props,null,r.mode,l)).ref=ko(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Wc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(L(s))return g(r,o,s,l);So(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=qc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var _o=xo(!0),Io=xo(!1),To=Ii(null),Co=null,Ao=null,No=null;function Ro(){No=Ao=Co=null}function Po(e){var t=To.current;Ci(To),e._currentValue=t}function Do(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oo(e,t){Co=e,No=Ao=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function Lo(e){var t=e._currentValue;if(No!==e)if(e={context:e,memoizedValue:t,next:null},null===Ao){if(null===Co)throw Error(o(308));Ao=e,Co.dependencies={lanes:0,firstContext:e}}else Ao=Ao.next=e;return t}var jo=null;function Mo(e){null===jo?jo=[e]:jo.push(e)}function Fo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Mo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Uo(e,r)}function Uo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var zo=!1;function Vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Uo(e,n)}return null===(i=r.interleaved)?(t.next=t,Mo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Uo(e,n)}function Ho(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ko(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Go(e,t,n,r){var i=e.updateQueue;zo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:zo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Bl|=s,e.lanes=s,e.memoizedState=d}}function Qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Yo={},Xo=Ii(Yo),$o=Ii(Yo),Jo=Ii(Yo);function Zo(e){if(e===Yo)throw Error(o(174));return e}function es(e,t){switch(Ai(Jo,t),Ai($o,e),Ai(Xo,Yo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Xo),Ai(Xo,t)}function ns(){Ci(Xo),Ci($o),Ci(Jo)}function rs(e){Zo(Jo.current);var t=Zo(Xo.current),n=le(t,e.type);t!==n&&(Ai($o,e),Ai(Xo,n))}function is(e){$o.current===e&&(Ci(Xo),Ci($o))}var os=Ii(0);function ss(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var as=[];function ls(){for(var e=0;e<as.length;e++)as[e]._workInProgressVersionPrimary=null;as.length=0}var cs=w.ReactCurrentDispatcher,us=w.ReactCurrentBatchConfig,ds=0,hs=null,fs=null,ps=null,ms=!1,gs=!1,ys=0,vs=0;function bs(){throw Error(o(321))}function ws(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ks(e,t,n,r,i,s){if(ds=s,hs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=null===e||null===e.memoizedState?ia:oa,e=n(r,i),gs){s=0;do{if(gs=!1,ys=0,25<=s)throw Error(o(301));s+=1,ps=fs=null,t.updateQueue=null,cs.current=sa,e=n(r,i)}while(gs)}if(cs.current=ra,t=null!==fs&&null!==fs.next,ds=0,ps=fs=hs=null,ms=!1,t)throw Error(o(300));return e}function Ss(){var e=0!==ys;return ys=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ps?hs.memoizedState=ps=e:ps=ps.next=e,ps}function xs(){if(null===fs){var e=hs.alternate;e=null!==e?e.memoizedState:null}else e=fs.next;var t=null===ps?hs.memoizedState:ps.next;if(null!==t)ps=t,fs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(fs=e).memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},null===ps?hs.memoizedState=ps=e:ps=ps.next=e}return ps}function _s(e,t){return"function"===typeof t?t(e):t}function Is(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=fs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ds&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,hs.lanes|=d,Bl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,hs.lanes|=s,Bl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ts(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(xa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Cs(){}function As(e,t){var n=hs,r=xs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,xa=!0),r=r.queue,Vs(Ps.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ps&&1&ps.memoizedState.tag){if(n.flags|=2048,js(9,Rs.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(o(349));0!==(30&ds)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=hs.updateQueue)?(t={lastEffect:null,stores:null},hs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Rs(e,t,n,r){t.value=n,t.getSnapshot=r,Ds(t)&&Os(e)}function Ps(e,t,n){return n(function(){Ds(t)&&Os(e)})}function Ds(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Os(e){var t=Uo(e,1);null!==t&&lc(t,e,1,-1)}function Ls(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Zs.bind(null,hs,e),[t.memoizedState,e]}function js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=hs.updateQueue)?(t={lastEffect:null,stores:null},hs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ms(){return xs().memoizedState}function Fs(e,t,n,r){var i=Es();hs.flags|=e,i.memoizedState=js(1|t,n,void 0,void 0===r?null:r)}function Us(e,t,n,r){var i=xs();r=void 0===r?null:r;var o=void 0;if(null!==fs){var s=fs.memoizedState;if(o=s.destroy,null!==r&&ws(r,s.deps))return void(i.memoizedState=js(t,n,o,r))}hs.flags|=e,i.memoizedState=js(1|t,n,o,r)}function zs(e,t){return Fs(8390656,8,e,t)}function Vs(e,t){return Us(2048,8,e,t)}function Bs(e,t){return Us(4,2,e,t)}function qs(e,t){return Us(4,4,e,t)}function Ws(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,Ws.bind(null,t,e),n)}function Ks(){}function Gs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ys(e,t,n){return 0===(21&ds)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),hs.lanes|=n,Bl|=n,e.baseState=!0),t)}function Xs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=us.transition;us.transition={};try{e(!1),t()}finally{bt=n,us.transition=r}}function $s(){return xs().memoizedState}function Js(e,t,n){var r=ac(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(null!==(n=Fo(e,t,n,r))){lc(n,e,r,sc()),na(n,t,r)}}function Zs(e,t,n){var r=ac(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Mo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(vi){}null!==(n=Fo(e,t,i,r))&&(lc(n,e,r,i=sc()),na(n,t,r))}}function ea(e){var t=e.alternate;return e===hs||null!==t&&t===hs}function ta(e,t){gs=ms=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ra={readContext:Lo,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useInsertionEffect:bs,useLayoutEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useMutableSource:bs,useSyncExternalStore:bs,useId:bs,unstable_isNewReconciler:!1},ia={readContext:Lo,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Lo,useEffect:zs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fs(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Js.bind(null,hs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ls,useDebugValue:Ks,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ls(!1),t=e[0];return e=Xs.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=hs,i=Es();if(lo){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ol)throw Error(o(349));0!==(30&ds)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zs(Ps.bind(null,r,s,e),[e]),r.flags|=2048,js(9,Rs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Ol.identifierPrefix;if(lo){var n=to;t=":"+t+"R"+(n=(eo&~(1<<32-st(eo)-1)).toString(32)+n),0<(n=ys++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oa={readContext:Lo,useCallback:Gs,useContext:Lo,useEffect:Vs,useImperativeHandle:Hs,useInsertionEffect:Bs,useLayoutEffect:qs,useMemo:Qs,useReducer:Is,useRef:Ms,useState:function(){return Is(_s)},useDebugValue:Ks,useDeferredValue:function(e){return Ys(xs(),fs.memoizedState,e)},useTransition:function(){return[Is(_s)[0],xs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:As,useId:$s,unstable_isNewReconciler:!1},sa={readContext:Lo,useCallback:Gs,useContext:Lo,useEffect:Vs,useImperativeHandle:Hs,useInsertionEffect:Bs,useLayoutEffect:qs,useMemo:Qs,useReducer:Ts,useRef:Ms,useState:function(){return Ts(_s)},useDebugValue:Ks,useDeferredValue:function(e){var t=xs();return null===fs?t.memoizedState=e:Ys(t,fs.memoizedState,e)},useTransition:function(){return[Ts(_s)[0],xs().memoizedState]},useMutableSource:Cs,useSyncExternalStore:As,useId:$s,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function la(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sc(),i=ac(e),o=qo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Wo(e,o,i))&&(lc(t,e,i,r),Ho(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sc(),i=ac(e),o=qo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Wo(e,o,i))&&(lc(t,e,i,r),Ho(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sc(),r=ac(e),i=qo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Wo(e,i,r))&&(lc(t,e,r,n),Ho(t,e,r))}};function ua(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function da(e,t,n){var r=!1,i=Ni,o=t.contextType;return"object"===typeof o&&null!==o?o=Lo(o):(i=ji(t)?Oi:Pi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Li(e,i):Ni),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Lo(o):(o=ji(t)?Oi:Pi.current,i.context=Li(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(la(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),Go(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=qo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xl||(Xl=!0,$l=r),ga(0,t)},n}function ba(e,t,n){(n=qo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ga(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ya;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Rc.bind(null,e,t,n),t.then(e,e))}function ka(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Sa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=qo(-1,1)).tag=2,Wo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ea=w.ReactCurrentOwner,xa=!1;function _a(e,t,n,r){t.child=null===e?Io(t,null,n,r):_o(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var o=t.ref;return Oo(t,i),r=ks(e,t,n,r,o,i),n=Ss(),null===e||xa?(lo&&n&&io(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Ta(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Fc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ya(e,t,i)}return t.flags|=1,(e=Uc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ya(e,t,i);0!==(131072&e.flags)&&(xa=!0)}}return Ra(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ul,Fl),Fl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ul,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ai(Ul,Fl),Fl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ai(Ul,Fl),Fl|=r;return _a(e,t,i,n),t.child}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,i){var o=ji(n)?Oi:Pi.current;return o=Li(t,o),Oo(t,i),n=ks(e,t,n,r,o,i),r=Ss(),null===e||xa?(lo&&r&&io(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ya(e,t,i))}function Pa(e,t,n,r,i){if(ji(n)){var o=!0;zi(t)}else o=!1;if(Oo(t,i),null===t.stateNode)Qa(e,t),da(t,n,r),fa(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Lo(c):c=Li(t,c=ji(n)?Oi:Pi.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&ha(t,s,r,c),zo=!1;var h=t.memoizedState;s.state=h,Go(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Di.current||zo?("function"===typeof u&&(la(t,n,u,r),l=t.memoizedState),(a=zo||ua(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Bo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:aa(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Lo(l):l=Li(t,l=ji(n)?Oi:Pi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&ha(t,s,r,l),zo=!1,h=t.memoizedState,s.state=h,Go(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Di.current||zo?("function"===typeof f&&(la(t,n,f,r),p=t.memoizedState),(c=zo||ua(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Da(e,t,n,r,o,i)}function Da(e,t,n,r,i,o){Na(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Vi(t,n,!1),Ya(e,t,o);r=t.stateNode,Ea.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Vi(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(0,t.context,!1),es(e,t.containerInfo)}function La(e,t,n,r,i){return vo(),bo(i),t.flags|=256,_a(e,t,n,r),t.child}var ja,Ma,Fa,Ua,za={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,s=os.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ai(os,1&s),null===e)return po(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,i,0,null),e=Vc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Va(n),t.memoizedState=za,e):qa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,r=ma(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Bc({mode:"visible",children:r.children},i,0,null),(s=Vc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Va(a),t.memoizedState=za,s);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Wa(e,t,a,r=ma(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Uo(e,i),lc(r,e,i,-1))}return kc(),Wa(e,t,a,r=ma(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ao=ci(i.nextSibling),so=t,lo=!0,co=null,null!==e&&($i[Ji++]=eo,$i[Ji++]=to,$i[Ji++]=Zi,eo=e.id,to=e.overflow,Zi=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Uc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Uc(r,a):(a=Vc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,i}return e=(a=e.child).sibling,i=Uc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,r){return null!==r&&bo(r),_o(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Do(e.return,t,n)}function Ka(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(os,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ss(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ss(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,o);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){if(!lo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $a(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(oo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(t),null;case 1:case 17:return ji(t.type)&&Mi(),$a(t),null;case 3:return r=t.stateNode,ns(),Ci(Di),Ci(Pi),ls(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(go(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==co&&(hc(co),co=null))),Ma(e,t),$a(t),null;case 5:is(t);var i=Zo(Jo.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return $a(t),null}if(e=Zo(Xo.current),go(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $a(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Zo(Jo.current),Zo(Xo.current),go(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=so))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return $a(t),null;case 13:if(Ci(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(lo&&null!==ao&&0!==(1&t.mode)&&0===(128&t.flags))yo(),vo(),t.flags|=98560,s=!1;else if(s=go(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else vo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$a(t),s=!1}else null!==co&&(hc(co),co=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===zl&&(zl=3):kc())),null!==t.updateQueue&&(t.flags|=4),$a(t),null);case 4:return ns(),Ma(e,t),null===e&&Br(t.stateNode.containerInfo),$a(t),null;case 10:return Po(t.type._context),$a(t),null;case 19:if(Ci(os),null===(s=t.memoizedState))return $a(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Xa(s,!1);else{if(0!==zl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ss(e))){for(t.flags|=128,Xa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>Ql&&(t.flags|=128,r=!0,Xa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ss(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!lo)return $a(t),null}else 2*$e()-s.renderingStartTime>Ql&&1073741824!==n&&(t.flags|=128,r=!0,Xa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=os.current,Ai(os,r?1&n|2:1&n),t):($a(t),null);case 22:case 23:return yc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Fl)&&($a(t),6&t.subtreeFlags&&(t.flags|=8192)):$a(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Za(e,t){switch(oo(t),t.tag){case 1:return ji(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ns(),Ci(Di),Ci(Pi),ls(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return is(t),null;case 13:if(Ci(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(os),null;case 4:return ns(),null;case 10:return Po(t.type._context),null;case 22:case 23:return yc(),null;default:return null}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Fa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zo(Xo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function ol(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var sl=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ol(t,n,o)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[yi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&ol(n,t,s),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nc(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Oc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(o(160));vl(s,a,i),ml=null,gl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(vi){Nc(i,t,vi)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)kl(t,e),t=t.sibling}function kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),Sl(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(g){Nc(e,e.return,g)}try{al(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:wl(t,e),Sl(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),Sl(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Nc(e,e.return,g)}}break;case 6:if(wl(t,e),Sl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Nc(e,e.return,g)}}break;case 3:if(wl(t,e),Sl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:wl(t,e),Sl(e);break;case 13:wl(t,e),Sl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Gl=$e())),4&r&&bl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||d,wl(t,e),tl=u):wl(t,e),Sl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(rl=e,d=e.child;null!==d;){for(h=rl=d;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Il(h);continue}}null!==p?(p.return=f,rl=p):Il(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wl(t,e),Sl(e),4&r&&bl(e);case 21:}}function Sl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(dl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),pl(e,hl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;fl(e,hl(e),s);break;default:throw Error(o(161))}}catch(pi){Nc(e,e.return,pi)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function El(e,t,n){rl=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||el;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=s,(tl=l)&&!c)for(rl=i;null!==rl;)l=(s=rl).child,22===s.tag&&null!==s.memoizedState?Tl(i):null!==l?(l.return=s,rl=l):Tl(i);for(;null!==o;)rl=o,xl(o,t,n),o=o.sibling;rl=i,el=a,tl=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,rl=o):_l(e)}}function _l(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Qo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Qo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}tl||512&t.flags&&cl(t)}catch(Ti){Nc(t,t.return,Ti)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function Il(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Tl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(pi){Nc(t,n,pi)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(pi){Nc(t,i,pi)}}var o=t.return;try{cl(t)}catch(pi){Nc(t,o,pi)}break;case 5:var s=t.return;try{cl(t)}catch(pi){Nc(t,s,pi)}}}catch(pi){Nc(t,t.return,pi)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Cl,Al=Math.ceil,Nl=w.ReactCurrentDispatcher,Rl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Dl=0,Ol=null,jl=null,Ml=0,Fl=0,Ul=Ii(0),zl=0,Vl=null,Bl=0,ql=0,Wl=0,Hl=null,Kl=null,Gl=0,Ql=1/0,Yl=null,Xl=!1,$l=null,Jl=null,Zl=!1,ec=null,tc=0,nc=0,rc=null,ic=-1,oc=0;function sc(){return 0!==(6&Dl)?$e():-1!==ic?ic:ic=$e()}function ac(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Ml?Ml&-Ml:null!==wo.transition?(0===oc&&(oc=mt()),oc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function lc(e,t,n,r){if(50<nc)throw nc=0,rc=null,Error(o(185));yt(e,n,r),0!==(2&Dl)&&e===Ol||(e===Ol&&(0===(2&Dl)&&(ql|=n),4===zl&&fc(e,Ml)),cc(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(Ql=$e()+500,qi&&Ki()))}function cc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Ol?Ml:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){qi=!0,Hi(e)}(pc.bind(null,e)):Hi(pc.bind(null,e)),si(function(){0===(6&Dl)&&Ki()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lc(n,uc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uc(e,t){if(ic=-1,oc=0,0!==(6&Dl))throw Error(o(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ol?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Sc(e,r);else{t=r;var i=Dl;Dl|=2;var s=wc();for(Ol===e&&Ml===t||(Yl=null,Ql=$e()+500,vc(e,t));;)try{xc();break}catch(l){bc(e,l)}Ro(),Nl.current=s,Dl=i,null!==jl?t=0:(Ol=null,Ml=0,t=zl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=dc(e,i))),1===t)throw n=Vl,vc(e,0),fc(e,r),cc(e,$e()),n;if(6===t)fc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Sc(e,r))&&(0!==(s=pt(e))&&(r=s,t=dc(e,s))),1===t))throw n=Vl,vc(e,0),fc(e,r),cc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Tc(e,Kl,Yl);break;case 3:if(fc(e,r),(130023424&r)===r&&10<(t=Gl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){sc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Tc.bind(null,e,Kl,Yl),t);break}Tc(e,Kl,Yl);break;case 4:if(fc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(Tc.bind(null,e,Kl,Yl),r);break}Tc(e,Kl,Yl);break;default:throw Error(o(329))}}}return cc(e,$e()),e.callbackNode===n?uc.bind(null,e):null}function dc(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),2!==(e=Sc(e,t))&&(t=Kl,Kl=n,null!==t&&hc(t)),e}function hc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function fc(e,t){for(t&=~Wl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function pc(e){if(0!==(6&Dl))throw Error(o(327));Cc();var t=ht(e,0);if(0===(1&t))return cc(e,$e()),null;var n=Sc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=dc(e,r))}if(1===n)throw n=Vl,vc(e,0),fc(e,t),cc(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Kl,Yl),cc(e,$e()),null}function mc(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(Ql=$e()+500,qi&&Ki())}}function gc(e){null!==ec&&0===ec.tag&&0===(6&Dl)&&Cc();var t=Dl;Dl|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Dl=t))&&Ki()}}function yc(){Fl=Ul.current,Ci(Ul)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==jl)for(n=jl.return;null!==n;){var r=n;switch(oo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:ns(),Ci(Di),Ci(Pi),ls();break;case 5:is(r);break;case 4:ns();break;case 13:case 19:Ci(os);break;case 10:Po(r.type._context);break;case 22:case 23:yc()}n=n.return}if(Ol=e,jl=e=Uc(e.current,null),Ml=Fl=t,zl=0,Vl=null,Wl=ql=Bl=0,Kl=Hl=null,null!==jo){for(t=0;t<jo.length;t++)if(null!==(r=(n=jo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}jo=null}return e}function bc(e,t){for(;;){var n=jl;try{if(Ro(),cs.current=ra,ms){for(var r=hs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ms=!1}if(ds=0,ps=fs=hs=null,gs=!1,ys=0,Rl.current=null,null===n||null===n.return){zl=1,Vl=t,jl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ka(a);if(null!==p){p.flags&=-257,Sa(p,a,l,0,t),1&p.mode&&wa(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){wa(s,u,t),kc();break e}c=Error(o(426))}else if(lo&&1&l.mode){var y=ka(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Sa(y,a,l,0,t),bo(pa(c,l));break e}}s=c=pa(c,l),4!==zl&&(zl=2),null===Hl?Hl=[s]:Hl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ko(s,va(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ko(s,ba(s,l,t));break e}}s=s.return}while(null!==s)}Ic(n)}catch(Ri){t=Ri,jl===n&&null!==n&&(jl=n=n.return);continue}break}}function wc(){var e=Nl.current;return Nl.current=ra,null===e?ra:e}function kc(){0!==zl&&3!==zl&&2!==zl||(zl=4),null===Ol||0===(268435455&Bl)&&0===(268435455&ql)||fc(Ol,Ml)}function Sc(e,t){var n=Dl;Dl|=2;var r=wc();for(Ol===e&&Ml===t||(Yl=null,vc(e,t));;)try{Ec();break}catch(i){bc(e,i)}if(Ro(),Dl=n,Nl.current=r,null!==jl)throw Error(o(261));return Ol=null,Ml=0,zl}function Ec(){for(;null!==jl;)_c(jl)}function xc(){for(;null!==jl&&!Ye();)_c(jl)}function _c(e){var t=Cl(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?Ic(e):jl=t,Rl.current=null}function Ic(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Fl)))return void(jl=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(jl=n);if(null===e)return zl=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===zl&&(zl=5)}function Tc(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{Cc()}while(null!==ec);if(0!==(6&Dl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Ol&&(jl=Ol=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Lc(tt,function(){return Cc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Dl;Dl|=4,Rl.current=null,function(e,t){if(ei=Wt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(ts){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:aa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(ts){Nc(t,t.return,ts)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=sl,sl=!1}(e,n),kl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,El(n,e,i),Xe(),Dl=l,bt=a,Pl.transition=s}else e.current=n;if(Zl&&(Zl=!1,ec=e,tc=i),s=e.pendingLanes,0===s&&(Jl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),cc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xl)throw Xl=!1,e=$l,$l=null,e;0!==(1&tc)&&0!==e.tag&&Cc(),s=e.pendingLanes,0!==(1&s)?e===rc?nc++:(nc=0,rc=e):nc=0,Ki()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function Cc(){if(null!==ec){var e=wt(tc),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===ec)var r=!1;else{if(e=ec,ec=null,tc=0,0!==(6&Dl))throw Error(o(331));var i=Dl;for(Dl|=4,rl=e.current;null!==rl;){var s=rl,a=s.child;if(0!==(16&rl.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var d=rl;switch(d.tag){case 0:case 11:case 15:al(8,d,s)}var h=d.child;if(null!==h)h.return=d,rl=h;else for(;null!==rl;){var f=(d=rl).sibling,p=d.return;if(ul(d),d===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,rl=a;else e:for(;null!==rl;){if(0!==(2048&(s=rl).flags))switch(s.tag){case 0:case 11:case 15:al(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,rl=v;break e}rl=s.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(Ri){Nc(l,l.return,Ri)}if(l===a){rl=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,rl=k;break e}rl=l.return}}if(Dl=i,Ki(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(Ri){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Ac(e,t,n){e=Wo(e,t=va(0,t=pa(n,t),1),1),t=sc(),null!==e&&(yt(e,1,t),cc(e,t))}function Nc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=Wo(t,e=ba(t,e=pa(n,e),1),1),e=sc(),null!==t&&(yt(t,1,e),cc(t,e));break}}t=t.return}}function Rc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Ml&n)===n&&(4===zl||3===zl&&(130023424&Ml)===Ml&&500>$e()-Gl?vc(e,0):Wl|=n),cc(e,t)}function Pc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=sc();null!==(e=Uo(e,t))&&(yt(e,t,n),cc(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Oc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Pc(e,n)}function Lc(e,t){return Ge(e,t)}function jc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new jc(e,t,n,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Fc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Vc(n.children,i,s,t);case x:a=8,i|=8;break;case _:return(e=Mc(12,n,t,2|i)).elementType=_,e.lanes=s,e;case A:return(e=Mc(13,n,t,i)).elementType=A,e.lanes=s,e;case N:return(e=Mc(19,n,t,i)).elementType=N,e.lanes=s,e;case D:return Bc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case T:a=9;break e;case C:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function qc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Wc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,i,o,s,a,l){return e=new Hc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vo(o),e}function Gc(e){if(!e)return Ni;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(ji(n))return Ui(e,n,t)}return t}function Qc(e,t,n,r,i,o,s,a,l){return(e=Kc(n,r,!0,e,0,o,0,a,l)).context=Gc(null),n=e.current,(o=qo(r=sc(),i=ac(n))).callback=void 0!==t&&null!==t?t:null,Wo(n,o,i),e.current.lanes=i,yt(e,i,r),cc(e,r),e}function Yc(e,t,n,r){var i=t.current,o=sc(),s=ac(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=qo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Wo(i,t,s))&&(lc(e,i,s,o),Ho(e,i,s)),s}function Xc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),vo();break;case 5:rs(t);break;case 1:ji(t.type)&&zi(t);break;case 4:es(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(To,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ai(os,1&os.current),null!==(e=Ya(e,t,n))?e.sibling:null);Ai(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Ya(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,lo&&0!==(1048576&t.flags)&&ro(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qa(e,t),e=t.pendingProps;var i=Li(t,Pi.current);Oo(t,n),i=ks(null,t,r,e,i,n);var s=Ss();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(s=!0,zi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Vo(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,fa(t,r,e,n),t=Da(null,t,r,!0,s,n)):(t.tag=0,lo&&s&&io(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=aa(r,e),i){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=Pa(null,t,r,e,n);break e;case 11:t=Ia(null,t,r,e,n);break e;case 14:t=Ta(null,t,r,aa(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Bo(e,t),Go(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=La(e,t,r,n,i=pa(Error(o(423)),t));break e}if(r!==i){t=La(e,t,r,n,i=pa(Error(o(424)),t));break e}for(ao=ci(t.stateNode.containerInfo.firstChild),so=t,lo=!0,co=null,n=Io(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(vo(),r===i){t=Ya(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return rs(t),null===e&&po(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Na(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&po(t),null;case 13:return Ba(e,t,n);case 4:return es(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ai(To,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Di.current){t=Ya(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=qo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Do(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Do(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Oo(t,n),r=r(i=Lo(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=aa(r=t.type,t.pendingProps),Ta(e,t,r,i=aa(r.type,i),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),Qa(e,t),t.tag=1,ji(r)?(e=!0,zi(t)):e=!1,Oo(t,n),da(t,r,i),fa(t,r,i,n),Da(null,t,r,!0,e,n);case 19:return Ga(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}function tu(e){this._internalRoot=e}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(){}function ou(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Xc(s);a.call(e)}}Yc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Xc(s);o.call(e)}}var s=Qc(t,r,e,0,null,!1,0,"",iu);return e._reactRootContainer=s,e[mi]=s.current,Br(8===e.nodeType?e.parentNode:e),gc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Xc(l);a.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",iu);return e._reactRootContainer=l,e[mi]=l.current,Br(8===e.nodeType?e.parentNode:e),gc(function(){Yc(t,l,n,r)}),l}(n,t,e,i,r);return Xc(s)}tu.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Yc(e,t,null,null)},tu.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc(function(){Yc(null,e,null,null)}),t[mi]=null}},tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),cc(t,$e()),0===(6&Dl)&&(Ql=$e()+500,Ki()))}break;case 13:gc(function(){var t=Uo(e,1);if(null!==t){var n=sc();lc(t,e,1,n)}}),Jc(e,1)}},St=function(e){if(13===e.tag){var t=Uo(e,134217728);if(null!==t)lc(t,e,134217728,sc());Jc(e,134217728)}},Et=function(e){if(13===e.tag){var t=ac(e),n=Uo(e,t);if(null!==n)lc(n,e,t,sc());Jc(e,t)}},xt=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(o(90));G(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=mc,Ae=gc;var su={usingClientEntryPoint:!1,Events:[ki,Si,Ei,Ie,Te,mc]},au={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{it=cu.inject(lu),ot=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nu(e))throw Error(o(299));var n=!1,r="",i=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Kc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Br(8===e.nodeType?e.parentNode:e),new eu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!ru(t))throw Error(o(200));return ou(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[mi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tu(t)},t.render=function(e,t,n){if(!ru(t))throw Error(o(200));return ou(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(o(40));return!!e._reactRootContainer&&(gc(function(){ou(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=mc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ru(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ou(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},948:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&O(k,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(k,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,_=null,I=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==_){var e=t.unstable_now();C=e;var n=!0;try{n=_(!0,e)}finally{n?E():(x=!1,_=null)}}else x=!1}if("function"===typeof b)E=function(){b(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){y(N,0)};function D(e){_=e,x||(x=!0,E())}function O(e,n){I=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(I),I=-1):g=!0,O(k,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},963:(e,t,n)=>{e.exports=n(948)},981:(e,t,n)=>{var r=n(452);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(205),i=n(981);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u="http://localhost:5000/api";async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(){try{return localStorage.getItem("communityLibraryJwt")}catch(e){return null}}(),r="".concat(u).concat(e);console.log("[apiFetch] ->",r,t.method||"GET");const i=await fetch(r,c({headers:c(c({"Content-Type":"application/json"},n?{Authorization:"Bearer ".concat(n)}:{}),t.headers||{})},t));if(!i.ok){let e="API ".concat(i.status);try{e=(await i.json()).error||e}catch(o){}throw console.warn("[apiFetch] error",r,i.status,e),new Error(e)}return console.log("[apiFetch] success",r,i.status),i.json()}async function h(){var e;return(null===(e=(await d("/books")).data)||void 0===e?void 0:e.items)||[]}"undefined"!==typeof window&&(window.__COMLIB_API_BASE=u,"localhost"!==window.location.hostname&&/localhost/.test(u)&&console.warn("[ComLib] Frontend is deployed but API_BASE still points to localhost. Backend calls will fail until you deploy the API and rebuild with REACT_APP_API_URL."));const f=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(f(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new m;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class m extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g=function(e){return function(e){const t=f(e);return p.encodeByteArray(t,!0)}(e).replace(/\./g,"")},y=function(e){try{return p.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const v=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,b=()=>{try{return v()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/community-library-project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"",REACT_APP_APP_NAME:"Community Library",REACT_APP_FB_API_KEY:"AIzaSyDqmFOW2daTZL4CQO321Ae6C8jxvfuVlz0",REACT_APP_FB_APP_ID:"1:1072674193479:web:9e41e976a5f083e8eb7162",REACT_APP_FB_AUTH_DOMAIN:"comlib-6e6c4.firebaseapp.com",REACT_APP_FB_MSG_SENDER:"1072674193479",REACT_APP_FB_PROJECT_ID:"comlib-6e6c4",REACT_APP_FB_STORAGE:"comlib-6e6c4.appspot.com",REACT_APP_SOCKET_URL:"",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_your-stripe-publishable-key",REACT_APP_USE_FIREBASE:"1",REACT_APP_VAPID_PUBLIC_KEY:"BAIdonnIzQEPH2BWFcQdzqh0vKHxbRIMilgS0bsl3RUcyjBp_EKauQuOr7DXfAFT06_QREeOY-n7PhblqpjFAQo"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&y(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},w=e=>{var t,n;return null===(n=null===(t=b())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},k=()=>{var e;return null===(e=b())||void 0===e?void 0:e.config},S=e=>{var t;return null===(t=b())||void 0===t?void 0:t["_".concat(e)]};class E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}class I extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(C,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new I(n,o,t)}}const C=/\{\$([^}]+)}/g;function A(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(N(n)&&N(o)){if(!A(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function N(e){return null!==e&&"object"===typeof e}function R(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L(){}function j(e){return e&&e._delegate?e._delegate:e}class M{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const F="[DEFAULT]";class U{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new E;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:F})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===F?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.component?this.component.multipleInstances?e:F:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class z{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const V=[];var B;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(B||(B={}));const q={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},W=B.INFO,H={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},K=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=H[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class G{constructor(e){this.name=e,this._logLevel=W,this._logHandler=K,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...t),this._logHandler(this,B.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...t),this._logHandler(this,B.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.INFO,...t),this._logHandler(this,B.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.WARN,...t),this._logHandler(this,B.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...t),this._logHandler(this,B.ERROR,...t)}}let Q,Y;const X=new WeakMap,$=new WeakMap,J=new WeakMap,Z=new WeakMap,ee=new WeakMap;let te={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $.get(e);if("objectStoreNames"===t)return e.objectStoreNames||J.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ie(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ne(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(oe(this),n),ie(X.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ie(e.apply(oe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(oe(this),t,...r);return J.set(o,t.sort?t.sort():[t]),ie(o)}}function re(e){return"function"===typeof e?ne(e):(e instanceof IDBTransaction&&function(e){if($.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});$.set(e,t)}(e),t=e,(Q||(Q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,te):e);var t}function ie(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(ie(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&X.set(t,e)}).catch(()=>{}),ee.set(t,e),t}(e);if(Z.has(e))return Z.get(e);const t=re(e);return t!==e&&(Z.set(e,t),ee.set(t,e)),t}const oe=e=>ee.get(e);const se=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],le=new Map;function ce(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(le.get(t))return le.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!se.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return le.set(t,o),o}te=(e=>c(c({},e),{},{get:(t,n,r)=>ce(t,n)||e.get(t,n,r),has:(t,n)=>!!ce(t,n)||e.has(t,n)}))(te);class ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const de="@firebase/app",he="0.9.13",fe=new G("@firebase/app"),pe="@firebase/app-compat",me="@firebase/analytics-compat",ge="@firebase/analytics",ye="@firebase/app-check-compat",ve="@firebase/app-check",be="@firebase/auth",we="@firebase/auth-compat",ke="@firebase/database",Se="@firebase/database-compat",Ee="@firebase/functions",xe="@firebase/functions-compat",_e="@firebase/installations",Ie="@firebase/installations-compat",Te="@firebase/messaging",Ce="@firebase/messaging-compat",Ae="@firebase/performance",Ne="@firebase/performance-compat",Re="@firebase/remote-config",Pe="@firebase/remote-config-compat",De="@firebase/storage",Oe="@firebase/storage-compat",Le="@firebase/firestore",je="@firebase/firestore-compat",Me="firebase",Fe="[DEFAULT]",Ue={[de]:"fire-core",[pe]:"fire-core-compat",[ge]:"fire-analytics",[me]:"fire-analytics-compat",[ve]:"fire-app-check",[ye]:"fire-app-check-compat",[be]:"fire-auth",[we]:"fire-auth-compat",[ke]:"fire-rtdb",[Se]:"fire-rtdb-compat",[Ee]:"fire-fn",[xe]:"fire-fn-compat",[_e]:"fire-iid",[Ie]:"fire-iid-compat",[Te]:"fire-fcm",[Ce]:"fire-fcm-compat",[Ae]:"fire-perf",[Ne]:"fire-perf-compat",[Re]:"fire-rc",[Pe]:"fire-rc-compat",[De]:"fire-gcs",[Oe]:"fire-gcs-compat",[Le]:"fire-fst",[je]:"fire-fst-compat","fire-js":"fire-js",[Me]:"fire-js-all"},ze=new Map,Ve=new Map;function Be(e,t){try{e.container.addComponent(t)}catch(n){fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function qe(e){const t=e.name;if(Ve.has(t))return fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ve.set(t,e);for(const n of ze.values())Be(n,e);return!0}function We(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const He=new T("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ke{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new M("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}const Ge="9.23.0";function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw He.create("bad-app-name",{appName:String(i)});if(n||(n=k()),!n)throw He.create("no-options");const o=ze.get(i);if(o){if(A(n,o.options)&&A(r,o.config))return o;throw He.create("duplicate-app",{appName:i})}const s=new z(i);for(const l of Ve.values())s.addComponent(l);const a=new Ke(n,r,s);return ze.set(i,a),a}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=ze.get(e);if(!t&&e===Fe&&k())return Qe();if(!t)throw He.create("no-app",{appName:e});return t}function Xe(e,t,n){var r;let i=null!==(r=Ue[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fe.warn(e.join(" "))}qe(new M("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const $e="firebase-heartbeat-store";let Je=null;function Ze(){return Je||(Je=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=ie(s);return r&&s.addEventListener("upgradeneeded",e=>{r(ie(s.result),e.oldVersion,e.newVersion,ie(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($e)}}).catch(e=>{throw He.create("idb-open",{originalErrorMessage:e.message})})),Je}async function et(e,t){try{const n=(await Ze()).transaction($e,"readwrite"),r=n.objectStore($e);await r.put(t,tt(e)),await n.done}catch(n){if(n instanceof I)fe.warn(n.message);else{const e=He.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});fe.warn(e.message)}}}function tt(e){return"".concat(e.name,"!").concat(e.options.appId)}class nt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new it(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=rt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=rt(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ot(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ot(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=g(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function rt(){return(new Date).toISOString().substring(0,10)}class it{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ze();return await t.transaction($e).objectStore($e).get(tt(e))}catch(t){if(t instanceof I)fe.warn(t.message);else{const e=He.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});fe.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ot(e){return g(JSON.stringify({version:2,heartbeats:e})).length}var st;st="",qe(new M("platform-logger",e=>new ue(e),"PRIVATE")),qe(new M("heartbeat",e=>new nt(e),"PRIVATE")),Xe(de,he,st),Xe(de,he,"esm2017"),Xe("fire-js","");Xe("firebase","9.23.0","app");function at(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ct=lt,ut=new T("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dt=new G("@firebase/auth");function ht(e){if(dt.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dt.error("Auth (".concat(Ge,"): ").concat(e),...n)}}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gt(e,...n)}function pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gt(e,...n)}function mt(e,t,n){const r=Object.assign(Object.assign({},ct()),{[t]:n});return new T("auth","Firebase",r).create(t,{appName:e.name})}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ut.create(e,...n)}function yt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw gt(t,...r)}}function vt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ht(t),new Error(t)}function bt(e,t){e||vt(t)}function wt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function kt(){return"http:"===St()||"https:"===St()}function St(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Et(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(kt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class xt{constructor(e,t){this.shortDelay=e,this.longDelay=t,bt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Et()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _t(e,t){bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class It{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ct=new xt(3e4,6e4);function At(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Nt(e,t,n,r){return Rt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=R(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),It.fetch()(Dt(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function Rt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tt),t);try{const t=new Ot(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Lt(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Lt(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Lt(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Lt(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw mt(e,a,s);ft(e,a)}}catch(i){if(i instanceof I)throw i;ft(e,"network-request-failed",{message:String(i)})}}async function Pt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Nt(e,t,n,r,i);return"mfaPendingCredential"in o&&ft(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Dt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_t(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class Ot{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pt(this.auth,"network-request-failed")),Ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pt(e,t,r);return i.customData._tokenResponse=n,i}function jt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Mt(e){return 1e3*Number(e)}function Ft(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const e=y(n);return e?JSON.parse(e):(ht("Failed to decode base64 JWT payload"),null)}catch(i){return ht("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Ut(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof I&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class zt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Vt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jt(this.lastLoginAt),this.creationTime=jt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ut(e,async function(e,t){return Nt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));yt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=at(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vt(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt("undefined"!==typeof e.idToken,"internal-error"),yt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Ft(e);return yt(t,"internal-error"),yt("undefined"!==typeof t.exp,"internal-error"),yt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yt(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Rt(e,{},async()=>{const n=R({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Dt(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",It.fetch()(o,{method:"POST",headers:s,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new qt;return n&&(yt("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(yt("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(yt("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qt,this.toJSON())}_performRefresh(){return vt("not implemented")}}function Wt(e,t){yt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ht{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=at(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ut(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=j(e),r=await n.getIdToken(t),i=Ft(r);yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:jt(Mt(i.auth_time)),issuedAtTime:jt(Mt(i.iat)),expirationTime:jt(Mt(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=j(e);await Bt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ht(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Bt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ut(this,async function(e,t){return Nt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:S}=t;yt(v&&S,e,"internal-error");const E=qt.fromJSON(this.name,S);yt("string"===typeof v,e,"internal-error"),Wt(u,e.name),Wt(d,e.name),yt("boolean"===typeof b,e,"internal-error"),yt("boolean"===typeof w,e,"internal-error"),Wt(h,e.name),Wt(f,e.name),Wt(p,e.name),Wt(m,e.name),Wt(g,e.name),Wt(y,e.name);const x=new Ht({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(x.providerData=k.map(e=>Object.assign({},e))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new qt;r.updateFromServerResponse(t);const i=new Ht({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Bt(i),i}}const Kt=new Map;function Gt(e){bt(e instanceof Function,"Expected a class definition");let t=Kt.get(e);return t?(bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kt.set(e,t),t)}class Qt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qt.type="NONE";const Yt=Qt;function Xt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class $t{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Xt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Xt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ht._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new $t(Gt(Yt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Gt(Yt);const o=Xt(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Ht._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new $t(i,e,n)):new $t(i,e,n)}}function Jt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(on(t))return"Blackberry";if(sn(t))return"Webos";if(en(t))return"Safari";if((t.includes("chrome/")||tn(t))&&!t.includes("edge/"))return"Chrome";if(rn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/firefox\//i.test(e)}function en(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:x()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/crios\//i.test(e)}function nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/iemobile/i.test(e)}function rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/android/i.test(e)}function on(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/blackberry/i.test(e)}function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/webos/i.test(e)}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ln(){return function(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return an(e)||rn(e)||sn(e)||on(e)||/windows phone/i.test(e)||nn(e)}function un(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jt(x());break;case"Worker":t="".concat(Jt(x()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ge,"/").concat(r)}async function dn(e,t){return Nt(e,"GET","/v2/recaptchaConfig",At(e,t))}function hn(e){return void 0!==e&&void 0!==e.enterprise}class fn{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function pn(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gn{constructor(e){this.type="recaptcha-enterprise",this.auth=wn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;hn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{dn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new fn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&hn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));pn("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function yn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new gn(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}class vn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class bn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kn(this),this.idTokenSubscription=new kn(this),this.beforeStateQueue=new vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ut,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?j(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Gt(e))})}async initializeRecaptchaConfig(){const e=await dn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new fn(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new gn(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new T("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gt(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Gt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return yt(o,this,"internal-error"),o.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(dt.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dt.warn("Auth (".concat(Ge,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function wn(e){return j(e)}class kn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new O(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Sn(e,t,n){const r=wn(e);yt(r._canInitEmulator,r,"emulator-config-failed"),yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=En(t),{host:s,port:a}=function(e){const t=En(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:xn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:xn(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function En(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class _n{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vt("not implemented")}_getIdTokenResponse(e){return vt("not implemented")}_linkToIdToken(e,t){return vt("not implemented")}_getReauthenticationResolver(e){return vt("not implemented")}}async function In(e,t){return Nt(e,"POST","/v1/accounts:update",t)}async function Tn(e,t){return Pt(e,"POST","/v1/accounts:signInWithPassword",At(e,t))}async function Cn(e,t){return Nt(e,"POST","/v1/accounts:sendOobCode",At(e,t))}class An extends _n{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new An(e,t,"password")}static _fromEmailAndCode(e,t){return new An(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await yn(e,n,"signInWithPassword");return Tn(e,t)}return Tn(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await yn(e,n,"signInWithPassword");return Tn(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return In(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Nn(e,t){return Pt(e,"POST","/v1/accounts:signInWithIdp",At(e,t))}class Rn extends _n{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Rn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=at(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Rn(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Nn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Nn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Nn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=R(t)}return e}}const Pn={USER_NOT_FOUND:"user-not-found"};class Dn extends _n{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Dn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Dn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t));if(n.temporaryProof)throw Lt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Dn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class On{constructor(e){var t,n,r,i,o,s;const a=P(D(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);yt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=P(D(e)).link,n=t?P(D(t)).deep_link_id:null,r=P(D(e)).deep_link_id;return(r?P(D(r)).link:null)||r||n||t||e}(e);try{return new On(t)}catch(n){return null}}}class Ln{constructor(){this.providerId=Ln.PROVIDER_ID}static credential(e,t){return An._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=On.parseLink(t);return yt(n,"argument-error"),An._fromEmailAndCode(e,n.code,n.tenantId)}}Ln.PROVIDER_ID="password",Ln.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ln.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mn extends jn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fn extends Mn{constructor(){super("facebook.com")}static credential(e){return Rn._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fn.credential(t.oauthAccessToken)}catch(n){return null}}}Fn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fn.PROVIDER_ID="facebook.com";class Un extends Mn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Rn._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Un.credential(n,r)}catch(i){return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com",Un.PROVIDER_ID="google.com";class zn extends Mn{constructor(){super("github.com")}static credential(e){return Rn._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zn.credential(t.oauthAccessToken)}catch(n){return null}}}zn.GITHUB_SIGN_IN_METHOD="github.com",zn.PROVIDER_ID="github.com";class Vn extends Mn{constructor(){super("twitter.com")}static credential(e,t){return Rn._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Vn.credential(n,r)}catch(i){return null}}}async function Bn(e,t){return Pt(e,"POST","/v1/accounts:signUp",At(e,t))}Vn.TWITTER_SIGN_IN_METHOD="twitter.com",Vn.PROVIDER_ID="twitter.com";class qn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ht._fromIdTokenResponse(e,n,r),o=Wn(n);return new qn({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wn(n);return new qn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Hn extends I{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Hn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Hn(e,t,n,r)}}function Kn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hn._fromErrorAndOperation(e,n,t,r);throw n})}async function Gn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ut(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return qn._forOperation(e,"link",r)}async function Qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await Ut(e,Kn(r,i,t,e),n);yt(o.idToken,r,"internal-error");const s=Ft(o.idToken);yt(s,r,"internal-error");const{sub:a}=s;return yt(e.uid===a,r,"user-mismatch"),qn._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&ft(r,"user-mismatch"),o}}async function Yn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Kn(e,r,t),o=await qn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Xn(e,t){return Yn(wn(e),t)}function $n(e,t,n){var r;yt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),yt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(yt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(yt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Jn(e,t){const n=j(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&$n(n.auth,r,t);const{email:i}=await async function(e,t){return Cn(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Zn(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=j(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Ut(i,async function(e,t){return Nt(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}new WeakMap;const er="__sak";class tr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(er,"1"),this.storage.removeItem(er),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class nr extends tr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=x();return en(e)||an(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=cn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ln()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nr.type="LOCAL";const rr=nr;class ir extends tr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ir.type="SESSION";const or=ir;class sr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new sr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}sr.receivers=[];class lr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=ar("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function cr(){return window}function ur(){return"undefined"!==typeof cr().WorkerGlobalScope&&"function"===typeof cr().importScripts}const dr="firebaseLocalStorageDb",hr="firebaseLocalStorage",fr="fbase_key";class pr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mr(e,t){return e.transaction([hr],t?"readwrite":"readonly").objectStore(hr)}function gr(){const e=indexedDB.open(dr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(hr,{keyPath:fr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(hr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(dr);return new pr(e).toPromise()}(),t(await gr()))})})}async function yr(e,t,n){const r=mr(e,!0).put({[fr]:t,value:n});return new pr(r).toPromise()}function vr(e,t){const n=mr(e,!0).delete(t);return new pr(n).toPromise()}class br{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await gr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ur()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sr._getInstance(ur()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new lr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gr();return await yr(e,er,"1"),await vr(e,er),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=mr(e,!1).get(t),r=await new pr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=mr(e,!1).getAll();return new pr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}br.type="LOCAL";const wr=br;mn("rcb"),new xt(3e4,6e4);const kr="recaptcha";async function Sr(e,t,n){var r;const i=await n.verify();try{let o;if(yt("string"===typeof i,e,"argument-error"),yt(n.type===kr,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){yt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Nt(e,"POST","/v2/accounts/mfaEnrollment:start",At(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{yt("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;yt(n,e,"missing-multi-factor-info");const s=await function(e,t){return Nt(e,"POST","/v2/accounts/mfaSignIn:start",At(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Nt(e,"POST","/v1/accounts:sendVerificationCode",At(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Er{constructor(e){this.providerId=Er.PROVIDER_ID,this.auth=wn(e)}verifyPhoneNumber(e,t){return Sr(this.auth,e,j(t))}static credential(e,t){return Dn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Er.credentialFromTaggedObject(t)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Dn._fromTokenResponse(n,r):null}}function xr(e,t){return t?Gt(t):(yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Er.PROVIDER_ID="phone",Er.PHONE_SIGN_IN_METHOD="phone";class _r extends _n{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Nn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Nn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ir(e){return Yn(e.auth,new _r(e),e.bypassAuthState)}function Tr(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Qn(n,new _r(e),e.bypassAuthState)}async function Cr(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Gn(n,new _r(e),e.bypassAuthState)}class Ar{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ir;case"linkViaPopup":case"linkViaRedirect":return Cr;case"reauthViaPopup":case"reauthViaRedirect":return Tr;default:ft(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nr=new xt(2e3,1e4);class Rr extends Ar{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Rr.currentPopupAction&&Rr.currentPopupAction.cancel(),Rr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){bt(1===this.filter.length,"Popup operations only handle one event");const e=ar();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Nr.get())};e()}}Rr.currentPopupAction=null;const Pr=new Map;class Dr extends Ar{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Pr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=jr(t),r=Lr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Pr.set(this.auth._key(),e)}return this.bypassAuthState||Pr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Or(e,t){Pr.set(e._key(),t)}function Lr(e){return Gt(e._redirectPersistence)}function jr(e){return Xt("pendingRedirect",e.config.apiKey,e.name)}async function Mr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=wn(e),i=xr(r,t),o=new Dr(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Fr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ur(e))}saveEventToCache(e){this.cachedEventUids.add(Ur(e)),this.lastProcessedEventTime=Date.now()}}function Ur(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function zr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Br=/^https?/;async function qr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Nt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Wr(r))return}catch(n){}ft(e,"unauthorized-domain")}function Wr(e){const t=wt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Br.test(n))return!1;if(Vr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Hr=new xt(3e4,6e4);function Kr(){const e=cr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Gr=null;function Qr(e){return Gr=Gr||function(e){return new Promise((t,n)=>{var r,i,o;function s(){Kr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Kr(),n(pt(e,"network-request-failed"))},timeout:Hr.get()})}if(null===(i=null===(r=cr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=cr().gapi)||void 0===o?void 0:o.load)){const t=mn("iframefcb");return cr()[t]=()=>{gapi.load?s():n(pt(e,"network-request-failed"))},pn("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Gr=null,e})}(e),Gr}const Yr=new xt(5e3,15e3),Xr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$r=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jr(e){const t=e.config;yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_t(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ge},i=$r.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(R(r).slice(1))}const Zr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ei{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ti(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Zr),{width:r.toString(),height:i.toString(),top:o,left:s}),c=x().toLowerCase();n&&(a=tn(c)?"_blank":n),Zt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return an(arguments.length>0&&void 0!==arguments[0]?arguments[0]:x())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ei(null);const d=window.open(t||"",a,u);yt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new ei(d)}const ni="__/auth/handler",ri="emulator/auth/handler",ii=encodeURIComponent("fac");async function oi(e,t,n,r,i,o){yt(e.config.authDomain,e,"auth-domain-config-required"),yt(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ge,eventId:i};if(t instanceof jn){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Mn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ii,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ni);return _t(t,ri)}(e),"?").concat(R(a).slice(1)).concat(c)}const si="webStorageSupport";const ai=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=or,this._completeRedirectFn=Mr,this._overrideRedirectResult=Or}async _openPopup(e,t,n,r){var i;bt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ti(e,await oi(e,t,n,wt(),r),ar())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){cr().location.href=e}(await oi(e,t,n,wt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Qr(e),n=cr().gapi;return yt(n,e,"internal-error"),t.open({where:document.body,url:Jr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=pt(e,"network-request-failed"),o=cr().setTimeout(()=>{r(i)},Yr.get());function s(){cr().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}(e),n=new Fr(e);return t.register("authEvent",t=>{yt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(si,{type:si},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[si];void 0!==i&&t(!!i),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cn()||en()||an()}};var li="@firebase/auth",ci="0.23.2";class ui{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const di=S("authIdTokenMaxAge")||300;let hi=null;var fi;fi="Browser",qe(new M("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;yt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:fi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:un(fi)},c=new bn(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),qe(new M("auth-internal",e=>(e=>new ui(e))(wn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(li,ci,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(fi)),Xe(li,ci,"esm2017");var pi,mi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},gi={},yi=yi||{},vi=mi||self;function bi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function wi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ki="closure_uid_"+(1e9*Math.random()>>>0),Si=0;function Ei(e,t,n){return e.call.apply(e.bind,arguments)}function xi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _i(e,t,n){return(_i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ei:xi).apply(null,arguments)}function Ii(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ti(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Ci(){this.s=this.s,this.o=this.o}Ci.prototype.s=!1,Ci.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ki)&&e[ki]||(e[ki]=++Si))},Ci.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ai=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ni(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ri(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(bi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Pi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Pi.prototype.h=function(){this.defaultPrevented=!0};var Di=function(){if(!vi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{vi.addEventListener("test",()=>{},t),vi.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Oi(e){return/^[\s\xa0]*$/.test(e)}function Li(){var e=vi.navigator;return e&&(e=e.userAgent)?e:""}function ji(e){return-1!=Li().indexOf(e)}function Mi(e){return Mi[" "](e),e}Mi[" "]=function(){};var Fi,Ui,zi=ji("Opera"),Vi=ji("Trident")||ji("MSIE"),Bi=ji("Edge"),qi=Bi||Vi,Wi=ji("Gecko")&&!(-1!=Li().toLowerCase().indexOf("webkit")&&!ji("Edge"))&&!(ji("Trident")||ji("MSIE"))&&!ji("Edge"),Hi=-1!=Li().toLowerCase().indexOf("webkit")&&!ji("Edge");function Ki(){var e=vi.document;return e?e.documentMode:void 0}e:{var Gi="",Qi=function(){var e=Li();return Wi?/rv:([^\);]+)(\)|;)/.exec(e):Bi?/Edge\/([\d\.]+)/.exec(e):Vi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Hi?/WebKit\/(\S+)/.exec(e):zi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Qi&&(Gi=Qi?Qi[1]:""),Vi){var Yi=Ki();if(null!=Yi&&Yi>parseFloat(Gi)){Fi=String(Yi);break e}}Fi=Gi}if(vi.document&&Vi){var Xi=Ki();Ui=Xi||(parseInt(Fi,10)||void 0)}else Ui=void 0;var $i=Ui;function Ji(e,t){if(Pi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Wi){e:{try{Mi(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Zi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ji.$.h.call(this)}}Ti(Ji,Pi);var Zi={2:"touch",3:"pen",4:"mouse"};Ji.prototype.h=function(){Ji.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var eo="closure_listenable_"+(1e6*Math.random()|0),to=0;function no(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++to,this.fa=this.ia=!1}function ro(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function io(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function oo(e){const t={};for(const n in e)t[n]=e[n];return t}const so="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ao(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<so.length;t++)n=so[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function lo(e){this.src=e,this.g={},this.h=0}function co(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Ai(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ro(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}lo.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=uo(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new no(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var ho="closure_lm_"+(1e6*Math.random()|0),fo={};function po(e,t,n,r,i){if(r&&r.once)return go(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)po(e,t[o],n,r,i);return null}return n=Eo(n),e&&e[eo]?e.O(t,n,wi(r)?!!r.capture:!!r,i):mo(e,t,n,!1,r,i)}function mo(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=wi(i)?!!i.capture:!!i,a=ko(e);if(a||(e[ho]=a=new lo(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=wo;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Di||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function go(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)go(e,t[o],n,r,i);return null}return n=Eo(n),e&&e[eo]?e.P(t,n,wi(r)?!!r.capture:!!r,i):mo(e,t,n,!0,r,i)}function yo(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)yo(e,t[o],n,r,i);else r=wi(r)?!!r.capture:!!r,n=Eo(n),e&&e[eo]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=uo(o=e.g[t],n,r,i))&&(ro(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=ko(e))&&(t=e.g[t.toString()],e=-1,t&&(e=uo(t,n,r,i)),(n=-1<e?t[e]:null)&&vo(n))}function vo(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[eo])co(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ko(t))?(co(n,e),0==n.h&&(n.src=null,t[ho]=null)):ro(e)}}}function bo(e){return e in fo?fo[e]:fo[e]="on"+e}function wo(e,t){if(e.fa)e=!0;else{t=new Ji(t,this);var n=e.listener,r=e.la||e.src;e.ia&&vo(e),e=n.call(r,t)}return e}function ko(e){return(e=e[ho])instanceof lo?e:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eo(e){return"function"===typeof e?e:(e[So]||(e[So]=function(t){return e.handleEvent(t)}),e[So])}function xo(){Ci.call(this),this.i=new lo(this),this.S=this,this.J=null}function _o(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Pi(t,e);else if(t instanceof Pi)t.target=t.target||e;else{var i=t;ao(t=new Pi(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Io(s,r,!0,t)&&i}if(i=Io(s=t.g=e,r,!0,t)&&i,i=Io(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Io(s=t.g=n[o],r,!1,t)&&i}function Io(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&co(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Ti(xo,Ci),xo.prototype[eo]=!0,xo.prototype.removeEventListener=function(e,t,n,r){yo(this,e,t,n,r)},xo.prototype.N=function(){if(xo.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ro(n[r]);delete t.g[e],t.h--}}this.J=null},xo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xo.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var To=vi.JSON.stringify;function Co(){var e=Lo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ao=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new No,e=>e.reset());class No{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ro(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Po(e){vi.setTimeout(()=>{throw e},0)}let Do,Oo=!1,Lo=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ao.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},jo=()=>{const e=vi.Promise.resolve(void 0);Do=()=>{e.then(Mo)}};var Mo=()=>{for(var e;e=Co();){try{e.h.call(e.g)}catch(n){Po(n)}var t=Ao;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Oo=!1};function Fo(e,t){xo.call(this),this.h=e||1,this.g=t||vi,this.j=_i(this.qb,this),this.l=Date.now()}function Uo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function zo(e,t,n){if("function"===typeof e)n&&(e=_i(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_i(e.handleEvent,e)}return 2147483647<Number(t)?-1:vi.setTimeout(e,t||0)}function Vo(e){e.g=zo(()=>{e.g=null,e.i&&(e.i=!1,Vo(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ti(Fo,xo),(pi=Fo.prototype).ga=!1,pi.T=null,pi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_o(this,"tick"),this.ga&&(Uo(this),this.start()))}},pi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pi.N=function(){Fo.$.N.call(this),Uo(this),delete this.g};class Bo extends Ci{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vo(this)}N(){super.N(),this.g&&(vi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qo(e){Ci.call(this),this.h=e,this.g={}}Ti(qo,Ci);var Wo=[];function Ho(e,t,n,r){Array.isArray(n)||(n&&(Wo[0]=n.toString()),n=Wo);for(var i=0;i<n.length;i++){var o=po(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ko(e){io(e.g,function(e,t){this.g.hasOwnProperty(t)&&vo(e)},e),e.g={}}function Go(){this.g=!0}function Qo(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return To(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}qo.prototype.N=function(){qo.$.N.call(this),Ko(this)},qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Go.prototype.Ea=function(){this.g=!1},Go.prototype.info=function(){};var Yo={},Xo=null;function $o(){return Xo=Xo||new xo}function Jo(e){Pi.call(this,Yo.Ta,e)}function Zo(e){const t=$o();_o(t,new Jo(t))}function es(e,t){Pi.call(this,Yo.STAT_EVENT,e),this.stat=t}function ts(e){const t=$o();_o(t,new es(t,e))}function ns(e,t){Pi.call(this,Yo.Ua,e),this.size=t}function rs(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return vi.setTimeout(function(){e()},t)}Yo.Ta="serverreachability",Ti(Jo,Pi),Yo.STAT_EVENT="statevent",Ti(es,Pi),Yo.Ua="timingevent",Ti(ns,Pi);var is={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},os={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ss(){}function as(e){return e.h||(e.h=e.i())}function ls(){}ss.prototype.h=null;var cs,us={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ds(){Pi.call(this,"d")}function hs(){Pi.call(this,"c")}function fs(){}function ps(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new qo(this),this.P=gs,e=qi?125:void 0,this.V=new Fo(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ms}function ms(){this.i=null,this.g="",this.h=!1}Ti(ds,Pi),Ti(hs,Pi),Ti(fs,ss),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},cs=new fs;var gs=45e3,ys={},vs={};function bs(e,t,n){e.L=1,e.v=Fs(Ds(t)),e.s=n,e.S=!0,ws(e,null)}function ws(e,t){e.G=Date.now(),xs(e),e.A=Ds(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),$s(n.i,"t",r),e.C=0,n=e.l.J,e.h=new ms,e.g=Ja(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Bo(_i(e.Pa,e,e.g),e.O)),Ho(e.U,e.g,"readystatechange",e.nb),t=e.I?oo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Zo(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.W,e.s)}function ks(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ss(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Es(e,n),r==vs){4==t&&(e.o=4,ts(14),i=!1),Qo(e.j,e.m,null,"[Incomplete Response]");break}if(r==ys){e.o=4,ts(15),Qo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qo(e.j,e.m,r,null),As(e,r)}ks(e)&&r!=vs&&r!=ys&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ts(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wa(t),t.M=!0,ts(11))):(Qo(e.j,e.m,n,"[Invalid Chunked Response]"),Cs(e),Ts(e))}function Es(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vs:(n=Number(t.substring(n,r)),isNaN(n)?ys:(r+=1)+n>t.length?vs:(t=t.slice(r,r+n),e.C=r+n,t))}function xs(e){e.Y=Date.now()+e.P,_s(e,e.P)}function _s(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=rs(_i(e.lb,e),t)}function Is(e){e.B&&(vi.clearTimeout(e.B),e.B=null)}function Ts(e){0==e.l.H||e.J||Ga(e.l,e)}function Cs(e){Is(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Uo(e.V),Ko(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function As(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ia(n.i,e)))if(!e.K&&ia(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ka(n),ja(n)}qa(n),ts(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=rs(_i(n.ib,n),6e3));if(1>=ra(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ya(n,11)}else if((e.K||n.g==e)&&Ka(n),!Oi(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(oa(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ms(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=$a(r,r.J?r.pa:null,r.Y),s.K){sa(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(Is(a),xs(a)),r.g=s}else Ba(r);0<n.j.length&&Fa(n)}else"stop"!=c[0]&&"close"!=c[0]||Ya(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ya(n,7):La(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Zo()}catch(c){}}function Ns(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(bi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(bi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(bi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(pi=ps.prototype).setTimeout=function(e){this.P=e},pi.nb=function(e){e=e.target;const t=this.M;t&&3==Aa(e)?t.l():this.Pa(e)},pi.Pa=function(e){try{if(e==this.g)e:{const u=Aa(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||qi||this.g&&(this.h.h||this.g.ja()||Na(this.g)))){this.J||4!=u||7==t||Zo(),Is(this);var n=this.g.da();this.ca=n;t:if(ks(this)){var r=Na(this.g);e="";var i=r.length,o=4==Aa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Cs(this),Ts(this);var s="";break t}this.h.i=new vi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oi(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ts(12),Cs(this),Ts(this);break e}Qo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,As(this,n)}this.S?(Ss(this,u,s),qi&&this.i&&3==u&&(Ho(this.U,this.V,"tick",this.mb),this.V.start())):(Qo(this.j,this.m,s,null),As(this,s)),4==u&&Cs(this),this.i&&!this.J&&(4==u?Ga(this.l,this):(this.i=!1,xs(this)))}else(function(e){const t={};e=(e.g&&2<=Aa(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Oi(e[r]))continue;var n=Ro(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,ts(12)):(this.o=0,ts(13)),Cs(this),Ts(this)}}}catch(u){}},pi.mb=function(){if(this.g){var e=Aa(this.g),t=this.g.ja();this.C<t.length&&(Is(this),Ss(this,e,t),this.i&&4!=e&&xs(this))}},pi.cancel=function(){this.J=!0,Cs(this)},pi.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Zo(),ts(17)),Cs(this),this.o=2,Ts(this)):_s(this,this.Y-e)};var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ps(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ps){this.h=e.h,Os(this,e.j),this.s=e.s,this.g=e.g,Ls(this,e.m),this.l=e.l;var t=e.i,n=new Gs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),js(this,n),this.o=e.o}else e&&(t=String(e).match(Rs))?(this.h=!1,Os(this,t[1]||"",!0),this.s=Us(t[2]||""),this.g=Us(t[3]||"",!0),Ls(this,t[4]),this.l=Us(t[5]||"",!0),js(this,t[6]||"",!0),this.o=Us(t[7]||"")):(this.h=!1,this.i=new Gs(null,this.h))}function Ds(e){return new Ps(e)}function Os(e,t,n){e.j=n?Us(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ls(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function js(e,t,n){t instanceof Gs?(e.i=t,function(e,t){t&&!e.j&&(Qs(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ys(this,t),$s(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=zs(t,Hs)),e.i=new Gs(t,e.h))}function Ms(e,t,n){e.i.set(t,n)}function Fs(e){return Ms(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Us(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zs(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Vs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Vs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ps.prototype.toString=function(){var e=[],t=this.j;t&&e.push(zs(t,Bs,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(zs(t,Bs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(zs(n,"/"==n.charAt(0)?Ws:qs,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",zs(n,Ks)),e.join("")};var Bs=/[#\/\?@]/g,qs=/[#\?:]/g,Ws=/[#\?]/g,Hs=/[#\?@]/g,Ks=/#/g;function Gs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ys(e,t){Qs(e),t=Js(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Xs(e,t){return Qs(e),t=Js(e,t),e.g.has(t)}function $s(e,t,n){Ys(e,t),0<n.length&&(e.i=null,e.g.set(Js(e,t),Ni(n)),e.h+=n.length)}function Js(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(pi=Gs.prototype).add=function(e,t){Qs(this),this.i=null,e=Js(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},pi.forEach=function(e,t){Qs(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},pi.ta=function(){Qs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},pi.Z=function(e){Qs(this);let t=[];if("string"===typeof e)Xs(this,e)&&(t=t.concat(this.g.get(Js(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},pi.set=function(e,t){return Qs(this),this.i=null,Xs(this,e=Js(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},pi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},pi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Zs=class{constructor(e,t){this.g=e,this.map=t}};function ea(e){this.l=e||ta,vi.PerformanceNavigationTiming?e=0<(e=vi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(vi.g&&vi.g.Ka&&vi.g.Ka()&&vi.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ta=10;function na(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ra(e){return e.h?1:e.g?e.g.size:0}function ia(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function oa(e,t){e.g?e.g.add(t):e.h=t}function sa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function aa(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ni(e.i)}ea.prototype.cancel=function(){if(this.i=aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var la,ca=class{stringify(e){return vi.JSON.stringify(e,void 0)}parse(e){return vi.JSON.parse(e,void 0)}};function ua(){this.g=new ca}function da(e,t,n){const r=n||"";try{Ns(e,function(e,n){let i=e;wi(e)&&(i=To(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ha(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function fa(e){this.l=e.fc||null,this.j=e.ob||!1}function pa(e,t){xo.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ti(fa,ss),fa.prototype.g=function(){return new pa(this.l,this.j)},fa.prototype.i=(la={},function(){return la}),Ti(pa,xo);var ma=0;function ga(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ya(e){e.readyState=4,e.l=null,e.j=null,e.A=null,va(e)}function va(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(pi=pa.prototype).open=function(e,t){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,va(this)},pi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||vi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},pi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ya(this)),this.readyState=ma},pi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof vi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ga(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},pi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ya(this):va(this),3==this.readyState&&ga(this)}},pi.Za=function(e){this.g&&(this.response=this.responseText=e,ya(this))},pi.Ya=function(e){this.g&&(this.response=e,ya(this))},pi.ka=function(){this.g&&ya(this)},pi.setRequestHeader=function(e,t){this.v.append(e,t)},pi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},pi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ba=vi.JSON.parse;function wa(e){xo.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ka,this.L=this.M=!1}Ti(wa,xo);var ka="",Sa=/^https?$/i,Ea=["POST","PUT"];function xa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_a(e),Ta(e)}function _a(e){e.F||(e.F=!0,_o(e,"complete"),_o(e,"error"))}function Ia(e){if(e.h&&"undefined"!=typeof yi&&(!e.C[1]||4!=Aa(e)||2!=e.da()))if(e.v&&4==Aa(e))zo(e.La,0,e);else if(_o(e,"readystatechange"),4==Aa(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Rs)[1]||null;!i&&vi.self&&vi.self.location&&(i=vi.self.location.protocol.slice(0,-1)),r=!Sa.test(i?i.toLowerCase():"")}n=r}if(n)_o(e,"complete"),_o(e,"success");else{e.m=6;try{var o=2<Aa(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",_a(e)}}finally{Ta(e)}}}function Ta(e,t){if(e.g){Ca(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||_o(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ca(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(vi.clearTimeout(e.A),e.A=null)}function Aa(e){return e.g?e.g.readyState:0}function Na(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ka:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ll){return null}}function Ra(e){let t="";return io(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ra(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ms(e,t,n))}function Da(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Oa(e){this.Ga=0,this.j=[],this.l=new Go,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Da("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Da("baseRetryDelayMs",5e3,e),this.hb=Da("retryDelaySeedMs",1e4,e),this.eb=Da("forwardChannelMaxRetries",2,e),this.xa=Da("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ea(e&&e.concurrentRequestLimit),this.Ja=new ua,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function La(e){if(Ma(e),3==e.H){var t=e.W++,n=Ds(e.I);if(Ms(n,"SID",e.K),Ms(n,"RID",t),Ms(n,"TYPE","terminate"),za(e,n),(t=new ps(e,e.l,t)).L=2,t.v=Fs(Ds(n)),n=!1,vi.navigator&&vi.navigator.sendBeacon)try{n=vi.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&vi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ja(t.l,null),t.g.ha(t.v)),t.G=Date.now(),xs(t)}Xa(e)}function ja(e){e.g&&(Wa(e),e.g.cancel(),e.g=null)}function Ma(e){ja(e),e.u&&(vi.clearTimeout(e.u),e.u=null),Ka(e),e.i.cancel(),e.m&&("number"===typeof e.m&&vi.clearTimeout(e.m),e.m=null)}function Fa(e){if(!na(e.i)&&!e.m){e.m=!0;var t=e.Na;Do||jo(),Oo||(Do(),Oo=!0),Lo.add(t,e),e.C=0}}function Ua(e,t){var n;n=t?t.m:e.W++;const r=Ds(e.I);Ms(r,"SID",e.K),Ms(r,"RID",n),Ms(r,"AID",e.V),za(e,r),e.o&&e.s&&Pa(r,e.o,e.s),n=new ps(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Va(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),oa(e.i,n),bs(n,r,t)}function za(e,t){e.na&&io(e.na,function(e,n){Ms(t,n,e)}),e.h&&Ns({},function(e,n){Ms(t,n,e)})}function Va(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_i(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{da(a,e,"req"+n+"_")}catch(Kl){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ba(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Do||jo(),Oo||(Do(),Oo=!0),Lo.add(t,e),e.A=0}}function qa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=rs(_i(e.Ma,e),Qa(e,e.A)),e.A++,!0)}function Wa(e){null!=e.B&&(vi.clearTimeout(e.B),e.B=null)}function Ha(e){e.g=new ps(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ds(e.wa);Ms(t,"RID","rpc"),Ms(t,"SID",e.K),Ms(t,"AID",e.V),Ms(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ms(t,"TO",e.qa),Ms(t,"TYPE","xmlhttp"),za(e,t),e.o&&e.s&&Pa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Fs(Ds(t)),n.s=null,n.S=!0,ws(n,e)}function Ka(e){null!=e.v&&(vi.clearTimeout(e.v),e.v=null)}function Ga(e,t){var n=null;if(e.g==t){Ka(e),Wa(e),e.g=null;var r=2}else{if(!ia(e.i,t))return;n=t.F,sa(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;_o(r=$o(),new ns(r,n)),Fa(e)}else Ba(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ra(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=rs(_i(e.Na,e,t),Qa(e,e.C)),e.C++,!0))}(e,t)||2==r&&qa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ya(e,5);break;case 4:Ya(e,10);break;case 3:Ya(e,6);break;default:Ya(e,2)}}function Qa(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ya(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=_i(e.pb,e);n||(n=new Ps("//www.google.com/images/cleardot.gif"),vi.location&&"http"==vi.location.protocol||Os(n,"https"),Fs(n)),function(e,t){const n=new Go;if(vi.Image){const r=new Image;r.onload=Ii(ha,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ii(ha,n,r,"TestLoadImage: error",!1,t),r.onabort=Ii(ha,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ii(ha,n,r,"TestLoadImage: timeout",!1,t),vi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else ts(2);e.H=0,e.h&&e.h.za(t),Xa(e),Ma(e)}function Xa(e){if(e.H=0,e.ma=[],e.h){const t=aa(e.i);0==t.length&&0==e.j.length||(Ri(e.ma,t),Ri(e.ma,e.j),e.i.i.length=0,Ni(e.j),e.j.length=0),e.h.ya()}}function $a(e,t,n){var r=n instanceof Ps?Ds(n):new Ps(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ls(r,r.m);else{var i=vi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Ps(null);r&&Os(o,r),t&&(o.g=t),i&&Ls(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Ms(r,n,t),Ms(r,"VER",e.ra),za(e,r),r}function Ja(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new wa(new fa({ob:!0})):new wa(e.va)).Oa(e.J),t}function Za(){}function el(){if(Vi&&!(10<=Number($i)))throw Error("Environmental error: no available transport.")}function tl(e,t){xo.call(this),this.g=new Oa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Oi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Oi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new il(this)}function nl(e){ds.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rl(){hs.call(this),this.status=1}function il(e){this.g=e}function ol(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function sl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function al(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(pi=wa.prototype).Oa=function(e){this.M=e},pi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cs.g(),this.C=this.u?as(this.u):as(cs),this.g.onreadystatechange=_i(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void xa(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=vi.FormData&&e instanceof vi.FormData,!(0<=Ai(Ea,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ca(this),0<this.B&&((this.L=function(e){return Vi&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_i(this.ua,this)):this.A=zo(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){xa(this,o)}},pi.ua=function(){"undefined"!=typeof yi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_o(this,"timeout"),this.abort(8))},pi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_o(this,"complete"),_o(this,"abort"),Ta(this))},pi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ta(this,!0)),wa.$.N.call(this)},pi.La=function(){this.s||(this.G||this.v||this.l?Ia(this):this.kb())},pi.kb=function(){Ia(this)},pi.isActive=function(){return!!this.g},pi.da=function(){try{return 2<Aa(this)?this.g.status:-1}catch(la){return-1}},pi.ja=function(){try{return this.g?this.g.responseText:""}catch(la){return""}},pi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ba(t)}},pi.Ia=function(){return this.m},pi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(pi=Oa.prototype).ra=8,pi.H=1,pi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ps(this,this.l,e);let o=this.s;if(this.U&&(o?(o=oo(o),ao(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Va(this,i,t),Ms(n=Ds(this.I),"RID",e),Ms(n,"CVER",22),this.F&&Ms(n,"X-HTTP-Session-Id",this.F),za(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Ra(o)))+"&"+t:this.o&&Pa(n,this.o,o)),oa(this.i,i),this.bb&&Ms(n,"TYPE","init"),this.P?(Ms(n,"$req",t),Ms(n,"SID","null"),i.aa=!0,bs(i,n,null)):bs(i,n,t),this.H=2}}else 3==this.H&&(e?Ua(this,e):0==this.j.length||na(this.i)||Ua(this))},pi.Ma=function(){if(this.u=null,Ha(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=rs(_i(this.jb,this),e)}},pi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ts(10),ja(this),Ha(this))},pi.ib=function(){null!=this.v&&(this.v=null,ja(this),qa(this),ts(19))},pi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ts(2)):(this.l.info("Failed to ping google.com"),ts(1))},pi.isActive=function(){return!!this.h&&this.h.isActive(this)},(pi=Za.prototype).Ba=function(){},pi.Aa=function(){},pi.za=function(){},pi.ya=function(){},pi.isActive=function(){return!0},pi.Va=function(){},el.prototype.g=function(e,t){return new tl(e,t)},Ti(tl,xo),tl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ts(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=$a(e,null,e.Y),Fa(e)},tl.prototype.close=function(){La(this.g)},tl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=To(e),e=n);t.j.push(new Zs(t.fb++,e)),3==t.H&&Fa(t)},tl.prototype.N=function(){this.g.h=null,delete this.j,La(this.g),delete this.g,tl.$.N.call(this)},Ti(nl,ds),Ti(rl,hs),Ti(il,Za),il.prototype.Ba=function(){_o(this.g,"a")},il.prototype.Aa=function(e){_o(this.g,new nl(e))},il.prototype.za=function(e){_o(this.g,new rl)},il.prototype.ya=function(){_o(this.g,"b")},Ti(ol,function(){this.blockSize=-1}),ol.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ol.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)sl(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){sl(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){sl(this,r),i=0;break}}this.h=i,this.i+=t},ol.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ll={};function cl(e){return-128<=e&&128>e?function(e,t){var n=ll;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new al([0|e],0>e?-1:0)}):new al([0|e],0>e?-1:0)}function ul(e){if(isNaN(e)||!isFinite(e))return hl;if(0>e)return yl(ul(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=dl;return new al(t,0)}var dl=4294967296,hl=cl(0),fl=cl(1),pl=cl(16777216);function ml(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function gl(e){return-1==e.h}function yl(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new al(n,~e.h).add(fl)}function vl(e,t){return e.add(yl(t))}function bl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function wl(e,t){this.g=e,this.h=t}function kl(e,t){if(ml(t))throw Error("division by zero");if(ml(e))return new wl(hl,hl);if(gl(e))return t=kl(yl(e),t),new wl(yl(t.g),yl(t.h));if(gl(t))return t=kl(e,yl(t)),new wl(yl(t.g),t.h);if(30<e.g.length){if(gl(e)||gl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=fl,r=t;0>=r.X(e);)n=Sl(n),r=Sl(r);var i=El(n,1),o=El(r,1);for(r=El(r,2),n=El(n,2);!ml(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=El(r,1),n=El(n,1)}return t=vl(e,i.R(t)),new wl(i,t)}for(i=hl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=ul(n)).R(t);gl(s)||0<s.X(e);)s=(o=ul(n-=r)).R(t);ml(o)&&(o=fl),i=i.add(o),e=vl(e,s)}return new wl(i,e)}function Sl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new al(n,e.h)}function El(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new al(i,e.h)}(pi=al.prototype).ea=function(){if(gl(this))return-yl(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:dl+r)*t,t*=dl}return e},pi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ml(this))return"0";if(gl(this))return"-"+yl(this).toString(e);for(var t=ul(Math.pow(e,6)),n=this,r="";;){var i=kl(n,t).g,o=((0<(n=vl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ml(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},pi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},pi.X=function(e){return gl(e=vl(this,e))?-1:ml(e)?0:1},pi.abs=function(){return gl(this)?yl(this):this},pi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new al(n,-2147483648&n[n.length-1]?-1:0)},pi.R=function(e){if(ml(this)||ml(e))return hl;if(gl(this))return gl(e)?yl(this).R(yl(e)):yl(yl(this).R(e));if(gl(e))return yl(this.R(yl(e)));if(0>this.X(pl)&&0>e.X(pl))return ul(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,bl(n,2*r+2*i),n[2*r+2*i+1]+=o*l,bl(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,bl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,bl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new al(n,0)},pi.gb=function(e){return kl(this,e).h},pi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new al(n,this.h&e.h)},pi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new al(n,this.h|e.h)},pi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new al(n,this.h^e.h)},el.prototype.createWebChannel=el.prototype.g,tl.prototype.send=tl.prototype.u,tl.prototype.open=tl.prototype.m,tl.prototype.close=tl.prototype.close,is.NO_ERROR=0,is.TIMEOUT=8,is.HTTP_ERROR=6,os.COMPLETE="complete",ls.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",xo.prototype.listen=xo.prototype.O,wa.prototype.listenOnce=wa.prototype.P,wa.prototype.getLastError=wa.prototype.Sa,wa.prototype.getLastErrorCode=wa.prototype.Ia,wa.prototype.getStatus=wa.prototype.da,wa.prototype.getResponseJson=wa.prototype.Wa,wa.prototype.getResponseText=wa.prototype.ja,wa.prototype.send=wa.prototype.ha,wa.prototype.setWithCredentials=wa.prototype.Oa,ol.prototype.digest=ol.prototype.l,ol.prototype.reset=ol.prototype.reset,ol.prototype.update=ol.prototype.j,al.prototype.add=al.prototype.add,al.prototype.multiply=al.prototype.R,al.prototype.modulo=al.prototype.gb,al.prototype.compare=al.prototype.X,al.prototype.toNumber=al.prototype.ea,al.prototype.toString=al.prototype.toString,al.prototype.getBits=al.prototype.D,al.fromNumber=ul,al.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return yl(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ul(Math.pow(n,8)),i=hl,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=ul(Math.pow(n,s)),i=i.R(s).add(ul(a))):i=(i=i.R(r)).add(ul(a))}return i};var xl=gi.createWebChannelTransport=function(){return new el},_l=gi.getStatEventTarget=function(){return $o()},Il=gi.ErrorCode=is,Tl=gi.EventType=os,Cl=gi.Event=Yo,Al=gi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nl=gi.FetchXmlHttpFactory=fa,Rl=gi.WebChannel=ls,Pl=gi.XhrIo=wa,Dl=gi.Md5=ol,Ol=gi.Integer=al;const Ll="@firebase/firestore";class jl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jl.UNAUTHENTICATED=new jl(null),jl.GOOGLE_CREDENTIALS=new jl("google-credentials-uid"),jl.FIRST_PARTY=new jl("first-party-uid"),jl.MOCK_USER=new jl("mock-user");let Ml="9.23.0";const Fl=new G("@firebase/firestore");function Ul(){return Fl.logLevel}function zl(e){if(Fl.logLevel<=B.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ql);Fl.debug("Firestore (".concat(Ml,"): ").concat(e),...i)}}function Vl(e){if(Fl.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ql);Fl.error("Firestore (".concat(Ml,"): ").concat(e),...i)}}function Bl(e){if(Fl.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ql);Fl.warn("Firestore (".concat(Ml,"): ").concat(e),...i)}}function ql(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Wl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ml,") INTERNAL ASSERTION FAILED: ")+e;throw Vl(t),new Error(t)}function Hl(e,t){e||Wl()}function Kl(e,t){return e}const Gl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ql extends I{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Yl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class $l{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jl.UNAUTHENTICATED))}shutdown(){}}class Jl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zl{constructor(e){this.t=e,this.currentUser=jl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Yl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yl,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{zl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(zl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yl)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Hl("string"==typeof t.accessToken),new Xl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Hl(null===e||"string"==typeof e),new jl(e)}}class ec{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=jl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class tc{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ec(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(jl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&zl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,zl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):zl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Hl("string"==typeof e.token),this.T=e.token,new nc(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ic(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class oc{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ic(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function sc(e,t){return e<t?-1:e>t?1:0}function ac(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class lc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ql(Gl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ql(Gl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ql(Gl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ql(Gl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lc.fromMillis(Date.now())}static fromDate(e){return lc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new lc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sc(this.nanoseconds,e.nanoseconds):sc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new cc(e)}static min(){return new cc(new lc(0,0))}static max(){return new cc(new lc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wl(),void 0===n?n=e.length-t:n>e.length-t&&Wl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===uc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dc extends uc{construct(e,t,n){return new dc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new dc(e)}static emptyPath(){return new dc([])}}const hc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fc extends uc{construct(e,t,n){return new fc(e,t,n)}static isValidIdentifier(e){return hc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ql(Gl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ql(Gl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Ql(Gl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fc(t)}static emptyPath(){return new fc([])}}class pc{constructor(e){this.path=e}static fromPath(e){return new pc(dc.fromString(e))}static fromName(e){return new pc(dc.fromString(e).popFirst(5))}static empty(){return new pc(dc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pc(new dc(e.slice()))}}class mc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}mc.UNKNOWN_ID=-1;function gc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cc.fromTimestamp(1e9===r?new lc(n+1,0):new lc(n,r));return new vc(i,pc.empty(),t)}function yc(e){return new vc(e.readTime,e.key,-1)}class vc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vc(cc.min(),pc.empty(),-1)}static max(){return new vc(cc.max(),pc.empty(),-1)}}function bc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pc.comparator(e.documentKey,t.documentKey),0!==n?n:sc(e.largestBatchId,t.largestBatchId))}const wc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Sc(e){if(e.code!==Gl.FAILED_PRECONDITION||e.message!==wc)throw e;zl("LocalStore","Unexpectedly lost primary lease")}class Ec{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ec((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ec?t:Ec.resolve(t)}catch(e){return Ec.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ec.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ec.reject(t)}static resolve(e){return new Ec((t,n)=>{t(e)})}static reject(e){return new Ec((t,n)=>{n(e)})}static waitFor(e){return new Ec((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Ec.resolve(!1);for(const n of e)t=t.next(e=>e?Ec.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ec((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Ec((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function xc(e){return"IndexedDbTransactionError"===e.name}class _c{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Ic(e){return null==e}function Tc(e){return 0===e&&1/e==-1/0}function Cc(e){return"number"==typeof e&&Number.isInteger(e)&&!Tc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}_c.ct=-1;const Ac=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rc=Nc;function Pc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Oc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Lc{constructor(e,t){this.comparator=e,this.root=t||Mc.EMPTY}insert(e,t){return new Lc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mc.BLACK,null,null))}remove(e){return new Lc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Mc.RED,this.left=null!=r?r:Mc.EMPTY,this.right=null!=i?i:Mc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Mc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Mc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wl();if(this.right.isRed())throw Wl();const e=this.left.check();if(e!==this.right.check())throw Wl();return e+(this.isRed()?0:1)}}Mc.EMPTY=null,Mc.RED=!0,Mc.BLACK=!1,Mc.EMPTY=new class{constructor(){this.size=0}get key(){throw Wl()}get value(){throw Wl()}get color(){throw Wl()}get left(){throw Wl()}get right(){throw Wl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Mc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fc{constructor(e){this.comparator=e,this.data=new Lc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uc(this.data.getIterator())}getIteratorFrom(e){return new Uc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Fc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fc(this.comparator);return t.data=e,t}}class Uc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zc{constructor(e){this.fields=e,e.sort(fc.comparator)}static empty(){return new zc([])}unionWith(e){let t=new Fc(fc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new zc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Vc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vc("Invalid base64 string: "+e):e}}(e);return new Bc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Bc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bc.EMPTY_BYTE_STRING=new Bc("");const qc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wc(e){if(Hl(!!e),"string"==typeof e){let t=0;const n=qc.exec(e);if(Hl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Hc(e.seconds),nanos:Hc(e.nanos)}}function Hc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Kc(e){return"string"==typeof e?Bc.fromBase64String(e):Bc.fromUint8Array(e)}function Gc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qc(e){const t=e.mapValue.fields.__previous_value__;return Gc(t)?Qc(t):t}function Yc(e){const t=Wc(e.mapValue.fields.__local_write_time__.timestampValue);return new lc(t.seconds,t.nanos)}class Xc{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class $c{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $c("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}const Jc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gc(e)?4:fu(e)?9007199254740991:10:Wl()}function eu(e,t){if(e===t)return!0;const n=Zc(e);if(n!==Zc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Yc(e).isEqual(Yc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Wc(e.timestampValue),r=Wc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Kc(e.bytesValue).isEqual(Kc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hc(e.geoPointValue.latitude)===Hc(t.geoPointValue.latitude)&&Hc(e.geoPointValue.longitude)===Hc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hc(e.integerValue)===Hc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Hc(e.doubleValue),r=Hc(t.doubleValue);return n===r?Tc(n)===Tc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ac(e.arrayValue.values||[],t.arrayValue.values||[],eu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Pc(n)!==Pc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!eu(n[i],r[i])))return!1;return!0}(e,t);default:return Wl()}}function tu(e,t){return void 0!==(e.values||[]).find(e=>eu(e,t))}function nu(e,t){if(e===t)return 0;const n=Zc(e),r=Zc(t);if(n!==r)return sc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Hc(e.integerValue||e.doubleValue),r=Hc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ru(e.timestampValue,t.timestampValue);case 4:return ru(Yc(e),Yc(t));case 5:return sc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Kc(e),r=Kc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=sc(n[i],r[i]);if(0!==e)return e}return sc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=sc(Hc(e.latitude),Hc(t.latitude));return 0!==n?n:sc(Hc(e.longitude),Hc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=nu(n[i],r[i]);if(e)return e}return sc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Jc.mapValue&&t===Jc.mapValue)return 0;if(e===Jc.mapValue)return 1;if(t===Jc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=sc(r[s],o[s]);if(0!==e)return e;const t=nu(n[r[s]],i[o[s]]);if(0!==t)return t}return sc(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Wl()}}function ru(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return sc(e,t);const n=Wc(e),r=Wc(t),i=sc(n.seconds,r.seconds);return 0!==i?i:sc(n.nanos,r.nanos)}function iu(e){return ou(e)}function ou(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Wc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Kc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,pc.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ou(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ou(e.fields[i]));return n+"}"}(e.mapValue):Wl();var t,n}function su(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function au(e){return!!e&&"integerValue"in e}function lu(e){return!!e&&"arrayValue"in e}function cu(e){return!!e&&"nullValue"in e}function uu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function du(e){return!!e&&"mapValue"in e}function hu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Dc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=hu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=hu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function fu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class pu{constructor(e){this.value=e}static empty(){return new pu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!du(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=fc.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=hu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());du(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return eu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];du(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Dc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new pu(hu(this.value))}}function mu(e){const t=[];return Dc(e.fields,(e,n)=>{const r=new fc([e]);if(du(n)){const e=mu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new zc(t)}class gu{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new gu(e,0,cc.min(),cc.min(),cc.min(),pu.empty(),0)}static newFoundDocument(e,t,n,r){return new gu(e,1,t,cc.min(),n,r,0)}static newNoDocument(e,t){return new gu(e,2,t,cc.min(),cc.min(),pu.empty(),0)}static newUnknownDocument(e,t){return new gu(e,3,t,cc.min(),cc.min(),pu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(cc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class yu{constructor(e,t){this.position=e,this.inclusive=t}}function vu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?pc.comparator(pc.fromName(s.referenceValue),n.key):nu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function bu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!eu(e.position[n],t.position[n]))return!1;return!0}class wu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ku(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Su{}class Eu extends Su{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ru(e,t,n):"array-contains"===t?new Lu(e,n):"in"===t?new ju(e,n):"not-in"===t?new Mu(e,n):"array-contains-any"===t?new Fu(e,n):new Eu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Pu(e,n):new Du(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nu(t,this.value)):null!==t&&Zc(this.value)===Zc(t)&&this.matchesComparison(nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class xu extends Su{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new xu(e,t)}matches(e){return _u(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function _u(e){return"and"===e.op}function Iu(e){return Tu(e)&&_u(e)}function Tu(e){for(const t of e.filters)if(t instanceof xu)return!1;return!0}function Cu(e){if(e instanceof Eu)return e.field.canonicalString()+e.op.toString()+iu(e.value);if(Iu(e))return e.filters.map(e=>Cu(e)).join(",");{const t=e.filters.map(e=>Cu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Au(e,t){return e instanceof Eu?function(e,t){return t instanceof Eu&&e.op===t.op&&e.field.isEqual(t.field)&&eu(e.value,t.value)}(e,t):e instanceof xu?function(e,t){return t instanceof xu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Au(n,t.filters[r]),!0)}(e,t):void Wl()}function Nu(e){return e instanceof Eu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(iu(e.value))}(e):e instanceof xu?function(e){return e.op.toString()+" {"+e.getFilters().map(Nu).join(" ,")+"}"}(e):"Filter"}class Ru extends Eu{constructor(e,t,n){super(e,t,n),this.key=pc.fromName(n.referenceValue)}matches(e){const t=pc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pu extends Eu{constructor(e,t){super(e,"in",t),this.keys=Ou("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Du extends Eu{constructor(e,t){super(e,"not-in",t),this.keys=Ou("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ou(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pc.fromName(e.referenceValue))}class Lu extends Eu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lu(t)&&tu(t.arrayValue,this.value)}}class ju extends Eu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tu(this.value.arrayValue,t)}}class Mu extends Eu{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tu(this.value.arrayValue,t)}}class Fu extends Eu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>tu(this.value.arrayValue,e))}}class Uu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.dt=null}}function zu(e){return new Uu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vu(e){const t=Kl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Cu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ic(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>iu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>iu(e)).join(",")),t.dt=e}return t.dt}function Bu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ku(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Au(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bu(e.startAt,t.startAt)&&bu(e.endAt,t.endAt)}function qu(e){return pc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Wu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Hu(e,t,n,r,i,o,s,a){return new Wu(e,t,n,r,i,o,s,a)}function Ku(e){return new Wu(e)}function Gu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Qu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Yu(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Xu(e){return null!==e.collectionGroup}function $u(e){const t=Kl(e);if(null===t.wt){t.wt=[];const e=Yu(t),n=Qu(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new wu(e)),t.wt.push(new wu(fc.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new wu(fc.keyField(),e))}}}return t.wt}function Ju(e){const t=Kl(e);if(!t._t)if("F"===t.limitType)t._t=zu(t.path,t.collectionGroup,$u(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of $u(t)){const t="desc"===i.dir?"asc":"desc";e.push(new wu(i.field,t))}const n=t.endAt?new yu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yu(t.startAt.position,t.startAt.inclusive):null;t._t=zu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Zu(e,t){t.getFirstInequalityField(),Yu(e);const n=e.filters.concat([t]);return new Wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ed(e,t,n){return new Wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function td(e,t){return Bu(Ju(e),Ju(t))&&e.limitType===t.limitType}function nd(e){return"".concat(Vu(Ju(e)),"|lt:").concat(e.limitType)}function rd(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Nu(e)).join(", "),"]")),Ic(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>iu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>iu(e)).join(",")),"Target(".concat(t,")")}(Ju(e)),"; limitType=").concat(e.limitType,")")}function id(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of $u(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=vu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$u(e),t))&&!(e.endAt&&!function(e,t,n){const r=vu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$u(e),t))}(e,t)}function od(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sd(e){return(t,n)=>{let r=!1;for(const i of $u(e)){const e=ad(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ad(e,t,n){const r=e.field.isKeyField()?pc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?nu(r,i):Wl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wl()}}class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Dc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Oc(this.inner)}size(){return this.innerSize}}const cd=new Lc(pc.comparator);function ud(){return cd}const dd=new Lc(pc.comparator);function hd(){let e=dd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function fd(e){let t=dd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function pd(){return gd()}function md(){return gd()}function gd(){return new ld(e=>e.toString(),(e,t)=>e.isEqual(t))}const yd=new Lc(pc.comparator),vd=new Fc(pc.comparator);function bd(){let e=vd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const wd=new Fc(sc);function kd(){return wd}function Sd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(t)?"-0":t}}function Ed(e){return{integerValue:""+e}}function xd(e,t){return Cc(t)?Ed(t):Sd(e,t)}class _d{constructor(){this._=void 0}}function Id(e,t,n){return e instanceof Ad?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Gc(t)&&(t=Qc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Nd?Rd(e,t):e instanceof Pd?Dd(e,t):function(e,t){const n=Cd(e,t),r=Ld(n)+Ld(e.gt);return au(n)&&au(e.gt)?Ed(r):Sd(e.serializer,r)}(e,t)}function Td(e,t,n){return e instanceof Nd?Rd(e,t):e instanceof Pd?Dd(e,t):n}function Cd(e,t){return e instanceof Od?au(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ad extends _d{}class Nd extends _d{constructor(e){super(),this.elements=e}}function Rd(e,t){const n=jd(t);for(const r of e.elements)n.some(e=>eu(e,r))||n.push(r);return{arrayValue:{values:n}}}class Pd extends _d{constructor(e){super(),this.elements=e}}function Dd(e,t){let n=jd(t);for(const r of e.elements)n=n.filter(e=>!eu(e,r));return{arrayValue:{values:n}}}class Od extends _d{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Ld(e){return Hc(e.integerValue||e.doubleValue)}function jd(e){return lu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Md{constructor(e,t){this.field=e,this.transform=t}}class Fd{constructor(e,t){this.version=e,this.transformResults=t}}class Ud{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ud}static exists(e){return new Ud(void 0,e)}static updateTime(e){return new Ud(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vd{}function Bd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jd(e.key,Ud.none()):new Gd(e.key,e.data,Ud.none());{const n=e.data,r=pu.empty();let i=new Fc(fc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Qd(e.key,r,new zc(i.toArray()),Ud.none())}}function qd(e,t,n){e instanceof Gd?function(e,t,n){const r=e.value.clone(),i=Xd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Qd?function(e,t,n){if(!zd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Yd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wd(e,t,n,r){return e instanceof Gd?function(e,t,n,r){if(!zd(e.precondition,t))return n;const i=e.value.clone(),o=$d(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qd?function(e,t,n,r){if(!zd(e.precondition,t))return n;const i=$d(e.fieldTransforms,r,t),o=t.data;return o.setAll(Yd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return zd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Cd(r.transform,e||null);null!=i&&(null===n&&(n=pu.empty()),n.set(r.field,i))}return n||null}function Kd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ac(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Nd&&t instanceof Nd||e instanceof Pd&&t instanceof Pd?ac(e.elements,t.elements,eu):e instanceof Od&&t instanceof Od?eu(e.gt,t.gt):e instanceof Ad&&t instanceof Ad}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gd extends Vd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qd extends Vd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xd(e,t,n){const r=new Map;Hl(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Td(s,a,n[i]))}return r}function $d(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Id(e,o,t))}return r}class Jd extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&qd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Wd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Wd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=md();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Bd(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(cc.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bd())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,(e,t)=>Kd(e,t))&&ac(this.baseMutations,e.baseMutations,(e,t)=>Kd(e,t))}}class th{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Hl(e.mutations.length===n.length);let r=yd;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new th(e,t,n,r)}}class nh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class rh{constructor(e,t){this.count=e,this.unchangedNames=t}}var ih,oh;function sh(e){switch(e){default:return Wl();case Gl.CANCELLED:case Gl.UNKNOWN:case Gl.DEADLINE_EXCEEDED:case Gl.RESOURCE_EXHAUSTED:case Gl.INTERNAL:case Gl.UNAVAILABLE:case Gl.UNAUTHENTICATED:return!1;case Gl.INVALID_ARGUMENT:case Gl.NOT_FOUND:case Gl.ALREADY_EXISTS:case Gl.PERMISSION_DENIED:case Gl.FAILED_PRECONDITION:case Gl.ABORTED:case Gl.OUT_OF_RANGE:case Gl.UNIMPLEMENTED:case Gl.DATA_LOSS:return!0}}function ah(e){if(void 0===e)return Vl("GRPC error has no .code"),Gl.UNKNOWN;switch(e){case ih.OK:return Gl.OK;case ih.CANCELLED:return Gl.CANCELLED;case ih.UNKNOWN:return Gl.UNKNOWN;case ih.DEADLINE_EXCEEDED:return Gl.DEADLINE_EXCEEDED;case ih.RESOURCE_EXHAUSTED:return Gl.RESOURCE_EXHAUSTED;case ih.INTERNAL:return Gl.INTERNAL;case ih.UNAVAILABLE:return Gl.UNAVAILABLE;case ih.UNAUTHENTICATED:return Gl.UNAUTHENTICATED;case ih.INVALID_ARGUMENT:return Gl.INVALID_ARGUMENT;case ih.NOT_FOUND:return Gl.NOT_FOUND;case ih.ALREADY_EXISTS:return Gl.ALREADY_EXISTS;case ih.PERMISSION_DENIED:return Gl.PERMISSION_DENIED;case ih.FAILED_PRECONDITION:return Gl.FAILED_PRECONDITION;case ih.ABORTED:return Gl.ABORTED;case ih.OUT_OF_RANGE:return Gl.OUT_OF_RANGE;case ih.UNIMPLEMENTED:return Gl.UNIMPLEMENTED;case ih.DATA_LOSS:return Gl.DATA_LOSS;default:return Wl()}}(oh=ih||(ih={}))[oh.OK=0]="OK",oh[oh.CANCELLED=1]="CANCELLED",oh[oh.UNKNOWN=2]="UNKNOWN",oh[oh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oh[oh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oh[oh.NOT_FOUND=5]="NOT_FOUND",oh[oh.ALREADY_EXISTS=6]="ALREADY_EXISTS",oh[oh.PERMISSION_DENIED=7]="PERMISSION_DENIED",oh[oh.UNAUTHENTICATED=16]="UNAUTHENTICATED",oh[oh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oh[oh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oh[oh.ABORTED=10]="ABORTED",oh[oh.OUT_OF_RANGE=11]="OUT_OF_RANGE",oh[oh.UNIMPLEMENTED=12]="UNIMPLEMENTED",oh[oh.INTERNAL=13]="INTERNAL",oh[oh.UNAVAILABLE=14]="UNAVAILABLE",oh[oh.DATA_LOSS=15]="DATA_LOSS";class lh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ch}static getOrCreateInstance(){return null===ch&&(ch=new lh),ch}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ch=null;function uh(){return new TextEncoder}const dh=new Ol([4294967295,4294967295],0);function hh(e){const t=uh().encode(e),n=new Dl;return n.update(t),new Uint8Array(n.digest())}function fh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ol([n,r],0),new Ol([i,o],0)]}class ph{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new mh("Invalid padding: ".concat(t));if(n<0)throw new mh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new mh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new mh("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Ol.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Ol.fromNumber(n)));return 1===r.compare(dh)&&(r=new Ol([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=hh(e),[n,r]=fh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ph(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.It)return;const t=hh(e),[n,r]=fh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class mh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,yh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gh(cc.min(),r,new Lc(sc),ud(),bd())}}class yh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new yh(n,t,bd(),bd(),bd())}}class vh{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class bh{constructor(e,t){this.targetId=e,this.Vt=t}}class wh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class kh{constructor(){this.St=0,this.Dt=xh(),this.Ct=Bc.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=bd(),t=bd(),n=bd();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wl()}}),new yh(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=xh()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Sh{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ud(),this.zt=Eh(),this.Wt=new Lc(sc)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Wl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const o=i.target;if(qu(o))if(0===r){const e=new pc(o.path);this.Yt(n,e,gu.newNoDocument(e,cc.min()))}else Hl(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=lh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,o,s,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(s=null===(o=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let a,l;try{a=Kc(i).toUint8Array()}catch(e){if(e instanceof Vc)return Bl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new ph(a,o,s)}catch(e){return Bl(e instanceof mh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&qu(i.target)){const t=new pc(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,gu.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=bd();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new gh(e,t,this.Wt,this.jt,n);return this.jt=ud(),this.zt=Eh(),this.Wt=new Lc(sc),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new kh,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Fc(sc),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||zl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new kh),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new Lc(pc.comparator)}function xh(){return new Lc(pc.comparator)}const _h={asc:"ASCENDING",desc:"DESCENDING"},Ih={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Th={and:"AND",or:"OR"};class Ch{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ah(e,t){return e.useProto3Json||Ic(t)?t:{value:t}}function Nh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ph(e,t){return Nh(e,t.toTimestamp())}function Dh(e){return Hl(!!e),cc.fromTimestamp(function(e){const t=Wc(e);return new lc(t.seconds,t.nanos)}(e))}function Oh(e,t){return function(e){return new dc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Lh(e){const t=dc.fromString(e);return Hl(tf(t)),t}function jh(e,t){return Oh(e.databaseId,t.path)}function Mh(e,t){const n=Lh(t);if(n.get(1)!==e.databaseId.projectId)throw new Ql(Gl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ql(Gl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pc(Vh(n))}function Fh(e,t){return Oh(e.databaseId,t)}function Uh(e){const t=Lh(e);return 4===t.length?dc.emptyPath():Vh(t)}function zh(e){return new dc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vh(e){return Hl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bh(e,t,n){return{name:jh(e,t),fields:n.value.mapValue.fields}}function qh(e,t){let n;if(t instanceof Gd)n={update:Bh(e,t.key,t.value)};else if(t instanceof Jd)n={delete:jh(e,t.key)};else if(t instanceof Qd)n={update:Bh(e,t.key,t.data),updateMask:ef(t.fieldMask)};else{if(!(t instanceof Zd))return Wl();n={verify:jh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Od)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Wl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ph(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wl()}(e,t.precondition)),n}function Wh(e,t){return{documents:[Fh(e,t.path)]}}function Hh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Fh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Fh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Zh(xu.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:$h(e.field),direction:Qh(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Ah(e,t.limit);var a;return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Kh(e){let t=Uh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Hl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Gh(e);return t instanceof xu&&Iu(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(e=>function(e){return new wu(Jh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ic(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new yu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new yu(n,t)}(n.endAt)),Hu(t,i,s,o,a,"F",l,c)}function Gh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jh(e.unaryFilter.field);return Eu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Jh(e.unaryFilter.field);return Eu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jh(e.unaryFilter.field);return Eu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Jh(e.unaryFilter.field);return Eu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Wl()}}(e):void 0!==e.fieldFilter?function(e){return Eu.create(Jh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xu.create(e.compositeFilter.filters.map(e=>Gh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wl()}}(e.compositeFilter.op))}(e):Wl()}function Qh(e){return _h[e]}function Yh(e){return Ih[e]}function Xh(e){return Th[e]}function $h(e){return{fieldPath:e.canonicalString()}}function Jh(e){return fc.fromServerFormat(e.fieldPath)}function Zh(e){return e instanceof Eu?function(e){if("=="===e.op){if(uu(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NAN"}};if(cu(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uu(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NOT_NAN"}};if(cu(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$h(e.field),op:Yh(e.op),value:e.value}}}(e):e instanceof xu?function(e){const t=e.getFilters().map(e=>Zh(e));return 1===t.length?t[0]:{compositeFilter:{op:Xh(e.op),filters:t}}}(e):Wl()}function ef(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function tf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class nf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cc.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cc.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new nf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rf{constructor(e){this.fe=e}}function of(e){const t=Kh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ed(t,t.limit,"L"):t}class sf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Hc(e.integerValue));else if("doubleValue"in e){const n=Hc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Tc(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Kc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?fu(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Wl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),pc.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}sf.Ve=new sf;class af{constructor(){this.rn=new lf}addToCollectionParentIndex(e,t){return this.rn.add(t),Ec.resolve()}getCollectionParents(e,t){return Ec.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Ec.resolve()}deleteFieldIndex(e,t){return Ec.resolve()}getDocumentsMatchingTarget(e,t){return Ec.resolve(null)}getIndexType(e,t){return Ec.resolve(0)}getFieldIndexes(e,t){return Ec.resolve([])}getNextCollectionGroupToUpdate(e){return Ec.resolve(null)}getMinOffset(e,t){return Ec.resolve(vc.min())}getMinOffsetFromCollectionGroup(e,t){return Ec.resolve(vc.min())}updateCollectionGroup(e,t,n){return Ec.resolve()}updateIndexEntries(e,t){return Ec.resolve()}}class lf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Fc(dc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Fc(dc.comparator)).toArray()}}new Uint8Array(0);class cf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new cf(e,cf.DEFAULT_COLLECTION_PERCENTILE,cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}cf.DEFAULT_COLLECTION_PERCENTILE=10,cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cf.DEFAULT=new cf(41943040,cf.DEFAULT_COLLECTION_PERCENTILE,cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cf.DISABLED=new cf(-1,0,0);class uf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new uf(0)}static Mn(){return new uf(-1)}}class df{constructor(){this.changes=new ld(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ec.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ff{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Wd(n.mutation,e,zc.empty(),lc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,bd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bd();const r=pd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=hd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=pd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,bd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ud();const o=gd(),s=gd();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Qd)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Wd(s.mutation,t,s.mutation.getFieldMask(),lc.now())):o.set(t.key,zc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new hf(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=gd();let r=new Lc((e,t)=>e-t),i=bd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||zc.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||bd()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=md();l.forEach(e=>{if(!i.has(e)){const r=Bd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ec.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return pc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ec.resolve(pd());let s=-1,a=i;return o.next(t=>Ec.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Ec.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,bd())).next(e=>({batchId:s,changes:fd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pc(t)).next(e=>{let t=hd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=hd();return this.indexManager.getCollectionParents(e,r).next(o=>Ec.forEach(o,o=>{const s=function(e,t){return new Wu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,s,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,gu.newInvalidDocument(r)))});let n=hd();return e.forEach((e,i)=>{const o=r.get(e);void 0!==o&&Wd(o.mutation,i,zc.empty(),lc.now()),id(t,i)&&(n=n.insert(e,i))}),n})}}class pf{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Ec.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Dh(n.createTime)}),Ec.resolve()}getNamedQuery(e,t){return Ec.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:of(e.bundledQuery),readTime:Dh(e.readTime)}}(t)),Ec.resolve()}}class mf{constructor(){this.overlays=new Lc(pc.comparator),this.ls=new Map}getOverlay(e,t){return Ec.resolve(this.overlays.get(t))}getOverlays(e,t){const n=pd();return Ec.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),Ec.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),Ec.resolve()}getOverlaysForCollection(e,t,n){const r=pd(),i=t.length+1,o=new pc(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ec.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Lc((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=pd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=pd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return Ec.resolve(s)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new nh(t,n));let i=this.ls.get(t);void 0===i&&(i=bd(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class gf{constructor(){this.fs=new Fc(yf.ds),this.ws=new Fc(yf._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new yf(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new yf(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new pc(new dc([])),n=new yf(t,e),r=new yf(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new pc(new dc([])),n=new yf(t,e),r=new yf(t,e+1);let i=bd();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new yf(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yf{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return pc.comparator(e.key,t.key)||sc(e.As,t.As)}static _s(e,t){return sc(e.As,t.As)||pc.comparator(e.key,t.key)}}class vf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Fc(yf.ds)}checkEmpty(e){return Ec.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eh(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Rs=this.Rs.add(new yf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Ec.resolve(o)}lookupMutationBatch(e,t){return Ec.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Ec.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ec.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Ec.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yf(t,0),r=new yf(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),Ec.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Fc(sc);return t.forEach(e=>{const t=new yf(e,0),r=new yf(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),Ec.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pc.isDocumentKey(i)||(i=i.child(""));const o=new yf(new pc(i),0);let s=new Fc(sc);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.As)),!0)},o),Ec.resolve(this.Vs(s))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Hl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Ec.forEach(t.mutations,r=>{const i=new yf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new yf(t,0),r=this.Rs.firstAfterOrEqual(n);return Ec.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ec.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bf{constructor(e){this.Ds=e,this.docs=new Lc(pc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ec.resolve(n?n.document.mutableCopy():gu.newInvalidDocument(t))}getEntries(e,t){let n=ud();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():gu.newInvalidDocument(e))}),Ec.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ud();const o=t.path,s=new pc(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||bc(yc(s),n)<=0||(r.has(s.key)||id(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Ec.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Wl()}Cs(e,t){return Ec.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new wf(this)}getSize(e){return Ec.resolve(this.size)}}class wf extends df{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),Ec.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class kf{constructor(e){this.persistence=e,this.xs=new ld(e=>Vu(e),Bu),this.lastRemoteSnapshotVersion=cc.min(),this.highestTargetId=0,this.Ns=0,this.ks=new gf,this.targetCount=0,this.Ms=uf.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),Ec.resolve()}getLastRemoteSnapshotVersion(e){return Ec.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ec.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Ec.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Ec.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new uf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Ec.resolve()}updateTargetData(e,t){return this.Fn(t),Ec.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ec.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.xs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),Ec.waitFor(i).next(()=>r)}getTargetCount(e){return Ec.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Ec.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Ec.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ec.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Ec.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Ec.resolve(n)}containsKey(e,t){return Ec.resolve(this.ks.containsKey(t))}}class Sf{constructor(e,t){this.$s={},this.overlays={},this.Os=new _c(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new kf(this),this.indexManager=new af,this.remoteDocumentCache=function(e){return new bf(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new rf(t),this.qs=new pf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new vf(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){zl("MemoryPersistence","Starting transaction:",e);const r=new Ef(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return Ec.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Ef extends kc{constructor(e){super(),this.currentSequenceNumber=e}}class xf{constructor(e){this.persistence=e,this.Qs=new gf,this.js=null}static zs(e){return new xf(e)}get Ws(){if(this.js)return this.js;throw Wl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Ec.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Ec.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Ec.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ec.forEach(this.Ws,n=>{const r=pc.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,cc.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Ec.or([()=>Ec.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class _f{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=bd(),r=bd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new _f(e,t.fromCache,n,r)}}class If{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Gu(t))return Ec.resolve(null);let n=Ju(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ed(t,null,"F"),n=Ju(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=bd(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ji(t,r);return this.zi(t,o,i,n.readTime)?this.Ki(e,ed(t,null,"F")):this.Wi(e,o,t,n)}))})))}Gi(e,t,n,r){return Gu(t)||r.isEqual(cc.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(Ul()<=B.DEBUG&&zl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rd(t)),this.Wi(e,o,t,gc(r,-1)))})}ji(e,t){let n=new Fc(sd(e));return t.forEach((t,r)=>{id(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Ul()<=B.DEBUG&&zl("QueryEngine","Using full collection scan to execute query:",rd(t)),this.Ui.getDocumentsMatchingQuery(e,t,vc.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Tf{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Lc(sc),this.Yi=new ld(e=>Vu(e),Bu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ff(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Cf(e,t,n,r){return new Tf(e,t,n,r)}async function Af(e,t){const n=Kl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=bd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({er:e,removedBatchIds:i,addedBatchIds:o}))})})}function Nf(e){const t=Kl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Rf(e,t,n){let r=bd(),i=bd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ud();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(cc.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):zl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{nr:r,sr:i}})}function Pf(e,t){const n=Kl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Df(e,t){const n=Kl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,Ec.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new nf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Of(e,t,n){const r=Kl(e),i=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!xc(e))throw e;zl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Lf(e,t,n){const r=Kl(e);let i=cc.min(),o=bd();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Kl(e),i=r.Yi.get(n);return void 0!==i?Ec.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Ju(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:cc.min(),n?o:bd())).next(e=>(jf(r,od(t),e),{documents:e,ir:o})))}function jf(e,t,n){let r=e.Xi.get(t)||cc.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class Mf{constructor(){this.activeTargetIds=kd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ff{constructor(){this.Hr=new Mf,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Mf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uf{Yr(e){}shutdown(){}}class zf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){zl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){zl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vf=null;function Bf(){return null===Vf?Vf=268435456+Math.round(2147483648*Math.random()):Vf++,"0x"+Vf.toString(16)}const qf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wf{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Hf="WebChannelConnection";class Kf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const o=Bf(),s=this.To(e,t);zl("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={};return this.Eo(a,r,i),this.Ao(e,s,a,n).then(t=>(zl("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw Bl("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}vo(e,t,n,r,i,o){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ml,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=qf[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Bf();return new Promise((o,s)=>{const a=new Pl;a.setWithCredentials(!0),a.listenOnce(Tl.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Il.NO_ERROR:const t=a.getResponseJson();zl(Hf,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Il.TIMEOUT:zl(Hf,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Ql(Gl.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:const n=a.getStatus();if(zl(Hf,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gl).indexOf(t)>=0?t:Gl.UNKNOWN}(t.status);s(new Ql(e,t.message))}else s(new Ql(Gl.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Ql(Gl.UNAVAILABLE,"Connection failed."));break;default:Wl()}}finally{zl(Hf,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);zl(Hf,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=Bf(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xl(),s=_l(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Nl({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");zl(Hf,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const f=new Wf({ro:t=>{h?zl(Hf,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(zl(Hf,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),zl(Hf,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Rl.EventType.OPEN,()=>{h||zl(Hf,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,Rl.EventType.CLOSE,()=>{h||(h=!0,zl(Hf,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,Rl.EventType.ERROR,t=>{h||(h=!0,Bl(Hf,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Ql(Gl.UNAVAILABLE,"The operation could not be completed")))}),p(u,Rl.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Hl(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){zl(Hf,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=ih[e];if(void 0!==t)return ah(t)}(t),i=s.message;void 0===n&&(n=Gl.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.wo(new Ql(n,i)),u.close()}else zl(Hf,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}}),p(s,Cl.STAT_EVENT,t=>{t.stat===Al.PROXY?zl(Hf,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Al.NOPROXY&&zl(Hf,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function Gf(){return"undefined"!=typeof document?document:null}function Qf(e){return new Ch(e,!0)}class Yf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&zl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Xf{constructor(e,t,n,r,i,o,s,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Yf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Gl.RESOURCE_EXHAUSTED?(Vl(t.toString()),Vl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Gl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Ql(Gl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return zl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(zl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $f extends Xf{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Hl(void 0===t||"string"==typeof t),Bc.fromBase64String(t||"")):(Hl(void 0===t||t instanceof Uint8Array),Bc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Gl.UNKNOWN:ah(e.code);return new Ql(t,e.message||"")}(s);n=new wh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mh(e,r.document.name),o=Dh(r.document.updateTime),s=r.document.createTime?Dh(r.document.createTime):cc.min(),a=new pu({mapValue:{fields:r.document.fields}}),l=gu.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new vh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Mh(e,r.document),o=r.readTime?Dh(r.readTime):cc.min(),s=gu.newNoDocument(i,o),a=r.removedTargetIds||[];n=new vh([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Mh(e,r.document),o=r.removedTargetIds||[];n=new vh([],o,i,null)}else{if(!("filter"in t))return Wl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new rh(r,i),s=e.targetId;n=new bh(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return cc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?cc.min():t.readTime?Dh(t.readTime):cc.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=zh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qu(r)?{documents:Wh(e,r)}:{query:Hh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rh(e,t.resumeToken);const r=Ah(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(cc.min())>0){n.readTime=Nh(e,t.snapshotVersion.toTimestamp());const r=Ah(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=zh(this.serializer),t.removeTarget=e,this.Wo(t)}}class Jf extends Xf{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Hl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Hl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Dh(e.updateTime):Dh(t);return n.isEqual(cc.min())&&(n=Dh(t)),new Fd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Dh(e.commitTime);return this.listener.cu(n,t)}return Hl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=zh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>qh(this.serializer,e))};this.Wo(t)}}class Zf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ql(Gl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,o]=r;return this.connection.Io(e,t,n,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Gl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ql(Gl.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.vo(e,t,n,o,s,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Gl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ql(Gl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class ep{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Vl(t),this.mu=!1):zl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class tp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{up(this)&&(zl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Kl(e);t.vu.add(4),await rp(t),t.bu.set("Unknown"),t.vu.delete(4),await np(t)}(this))})}),this.bu=new ep(n,r)}}async function np(e){if(up(e))for(const t of e.Ru)await t(!0)}async function rp(e){for(const t of e.Ru)await t(!1)}function ip(e,t){const n=Kl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),cp(n)?lp(n):Cp(n).Ko()&&sp(n,t))}function op(e,t){const n=Kl(e),r=Cp(n);n.Au.delete(t),r.Ko()&&ap(n,t),0===n.Au.size&&(r.Ko()?r.jo():up(n)&&n.bu.set("Unknown"))}function sp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(cc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Cp(e).su(t)}function ap(e,t){e.Vu.qt(t),Cp(e).iu(t)}function lp(e){e.Vu=new Sh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Cp(e).start(),e.bu.gu()}function cp(e){return up(e)&&!Cp(e).Uo()&&e.Au.size>0}function up(e){return 0===Kl(e).vu.size}function dp(e){e.Vu=void 0}async function hp(e){e.Au.forEach((t,n)=>{sp(e,t)})}async function fp(e,t){dp(e),cp(e)?(e.bu.Iu(t),lp(e)):e.bu.set("Unknown")}async function pp(e,t,n){if(e.bu.set("Online"),t instanceof wh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){zl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await mp(e,n)}else if(t instanceof vh?e.Vu.Ht(t):t instanceof bh?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(cc.min()))try{const t=await Nf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Bc.EMPTY_BYTE_STRING,r.snapshotVersion)),ap(e,t);const i=new nf(r.target,t,n,r.sequenceNumber);sp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){zl("RemoteStore","Failed to raise snapshot:",t),await mp(e,t)}}async function mp(e,t,n){if(!xc(t))throw t;e.vu.add(1),await rp(e),e.bu.set("Offline"),n||(n=()=>Nf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{zl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await np(e)})}function gp(e,t){return t().catch(n=>mp(e,n,t))}async function yp(e){const t=Kl(e),n=Ap(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;vp(t);)try{const e=await Pf(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,bp(t,e)}catch(e){await mp(t,e)}wp(t)&&kp(t)}function vp(e){return up(e)&&e.Eu.length<10}function bp(e,t){e.Eu.push(t);const n=Ap(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function wp(e){return up(e)&&!Ap(e).Uo()&&e.Eu.length>0}function kp(e){Ap(e).start()}async function Sp(e){Ap(e).hu()}async function Ep(e){const t=Ap(e);for(const n of e.Eu)t.uu(n.mutations)}async function xp(e,t,n){const r=e.Eu.shift(),i=th.from(r,t,n);await gp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await yp(e)}async function _p(e,t){t&&Ap(e).ou&&await async function(e,t){if(sh(n=t.code)&&n!==Gl.ABORTED){const n=e.Eu.shift();Ap(e).Qo(),await gp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await yp(e)}var n}(e,t),wp(e)&&kp(e)}async function Ip(e,t){const n=Kl(e);n.asyncQueue.verifyOperationInProgress(),zl("RemoteStore","RemoteStore received new credentials");const r=up(n);n.vu.add(3),await rp(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await np(n)}async function Tp(e,t){const n=Kl(e);t?(n.vu.delete(2),await np(n)):t||(n.vu.add(2),await rp(n),n.bu.set("Unknown"))}function Cp(e){return e.Su||(e.Su=function(e,t,n){const r=Kl(e);return r.fu(),new $f(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:hp.bind(null,e),ao:fp.bind(null,e),nu:pp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),cp(e)?lp(e):e.bu.set("Unknown")):(await e.Su.stop(),dp(e))})),e.Su}function Ap(e){return e.Du||(e.Du=function(e,t,n){const r=Kl(e);return r.fu(),new Jf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Sp.bind(null,e),ao:_p.bind(null,e),au:Ep.bind(null,e),cu:xp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await yp(e)):(await e.Du.stop(),e.Eu.length>0&&(zl("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class Np{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Yl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Np(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ql(Gl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rp(e,t){if(Vl("AsyncQueue","".concat(t,": ").concat(e)),xc(e))return new Ql(Gl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Pp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||pc.comparator(t.key,n.key):(e,t)=>pc.comparator(e.key,t.key),this.keyedMap=hd(),this.sortedSet=new Lc(this.comparator)}static emptySet(e){return new Pp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Pp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Dp{constructor(){this.Cu=new Lc(pc.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Wl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Op{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Op(e,t,Pp.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Lp{constructor(){this.Nu=void 0,this.listeners=[]}}class jp{constructor(){this.queries=new ld(e=>nd(e),td),this.onlineState="Unknown",this.ku=new Set}}async function Mp(e,t){const n=Kl(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Lp),i)try{o.Nu=await n.onListen(r)}catch(e){const n=Rp(e,"Initialization of query '".concat(rd(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&Vp(n)}async function Fp(e,t){const n=Kl(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Up(e,t){const n=Kl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Vp(n)}function zp(e,t,n){const r=Kl(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function Vp(e){e.ku.forEach(e=>{e.next()})}class Bp{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Op(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class qp{constructor(e){this.key=e}}class Wp{constructor(e){this.key=e}}class Hp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=bd(),this.mutatedKeys=bd(),this.tc=sd(e),this.ec=new Pp(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Dp,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=id(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:s,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,a=s!==this.Xu;return this.Xu=s,0!==i.length||a?{snapshot:new Op(this.query,e.ec,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Dp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=bd(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Wp(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new qp(n))}),t}hc(e){this.Yu=e.ir,this.Zu=bd();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Op.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Kp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Gp{constructor(e){this.key=e,this.fc=!1}}class Qp{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new ld(e=>nd(e),td),this._c=new Map,this.mc=new Set,this.gc=new Lc(pc.comparator),this.yc=new Map,this.Ic=new gf,this.Tc={},this.Ec=new Map,this.Ac=uf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Yp(e,t){const n=fm(e);let r,i;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const e=await Df(n.localStore,Ju(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Xp(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&ip(n.remoteStore,e)}return i}async function Xp(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Lf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return am(e,t.targetId,s.cc),s.snapshot}(e,t,n,r);const o=await Lf(e.localStore,t,!0),s=new Hp(t,o.ir),a=s.sc(o.documents),l=yh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);am(e,n,c.cc);const u=new Kp(t,n,s);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function $p(e,t){const n=Kl(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!td(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Of(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),op(n.remoteStore,r.targetId),om(n,r.targetId)}).catch(Sc)):(om(n,r.targetId),await Of(n.localStore,r.targetId,!0))}async function Jp(e,t){const n=Kl(e);try{const e=await function(e,t){const n=Kl(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Bc.EMPTY_BYTE_STRING,cc.min()).withLastLimboFreeSnapshotVersion(cc.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Bs.updateTargetData(e,c))});let a=ud(),l=bd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(Rf(e,o,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(cc.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return Ec.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(Hl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Hl(r.fc):e.removedDocuments.size>0&&(Hl(r.fc),r.fc=!1))}),await um(n,e,t)}catch(e){await Sc(e)}}function Zp(e,t,n){const r=Kl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Kl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&Vp(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function em(e,t,n){const r=Kl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),o=i&&i.key;if(o){let e=new Lc(pc.comparator);e=e.insert(o,gu.newNoDocument(o,cc.min()));const n=bd().add(o),i=new gh(cc.min(),new Map,new Lc(sc),e,n);await Jp(r,i),r.gc=r.gc.remove(o),r.yc.delete(t),cm(r)}else await Of(r.localStore,t,!1).then(()=>om(r,t,n)).catch(Sc)}async function tm(e,t){const n=Kl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Kl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Ec.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Hl(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=bd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);im(n,r,null),rm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await um(n,e)}catch(e){await Sc(e)}}async function nm(e,t,n){const r=Kl(e);try{const e=await function(e,t){const n=Kl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Hl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);im(r,t,n),rm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await um(r,e)}catch(n){await Sc(n)}}function rm(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function im(e,t,n){const r=Kl(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||sm(e,t)})}function sm(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(op(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),cm(e))}function am(e,t,n){for(const r of n)r instanceof qp?(e.Ic.addReference(r.key,t),lm(e,r)):r instanceof Wp?(zl("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||sm(e,r.key)):Wl()}function lm(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(zl("SyncEngine","New document in limbo: "+n),e.mc.add(r),cm(e))}function cm(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new pc(dc.fromString(t)),r=e.Ac.next();e.yc.set(r,new Gp(n)),e.gc=e.gc.insert(n,r),ip(e.remoteStore,new nf(Ju(Ku(n.path)),r,"TargetPurposeLimboResolution",_c.ct))}}async function um(e,t,n){const r=Kl(e),i=[],o=[],s=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{s.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=_f.Li(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.dc.nu(i),await async function(e,t){const n=Kl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ec.forEach(t,t=>Ec.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ec.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!xc(e))throw e;zl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,o))}async function dm(e,t){const n=Kl(e);if(!n.currentUser.isEqual(t)){zl("SyncEngine","User change. New user:",t.toKey());const e=await Af(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Ql(Gl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await um(n,e.er)}}function hm(e,t){const n=Kl(e),r=n.yc.get(t);if(r&&r.fc)return bd().add(r.key);{let e=bd();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function fm(e){const t=Kl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Jp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=em.bind(null,t),t.dc.nu=Up.bind(null,t.eventManager),t.dc.Pc=zp.bind(null,t.eventManager),t}function pm(e){const t=Kl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nm.bind(null,t),t}class mm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Cf(this.persistence,new If,e.initialUser,this.serializer)}createPersistence(e){return new Sf(xf.zs,this.serializer)}createSharedClientState(e){return new Ff}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class gm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Zp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=dm.bind(null,this.syncEngine),await Tp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jp}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Kf(r));var r;return function(e,t,n,r){return new Zf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Zp(this.syncEngine,e,0),o=zf.D()?new zf:new Uf,new tp(t,n,r,i,o);var t,n,r,i,o}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Qp(e,t,n,r,i,o);return s&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Kl(e);zl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await rp(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class ym{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Vl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=jl.UNAUTHENTICATED,this.clientId=oc.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{zl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(zl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ql(Gl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Rp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function bm(e,t){e.asyncQueue.verifyOperationInProgress(),zl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Af(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Sm(e);zl("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>Ip(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ip(t.remoteStore,n)),e._onlineComponents=t}function km(e){return"FirebaseError"===e.name?e.code===Gl.FAILED_PRECONDITION||e.code===Gl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Sm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zl("FirestoreClient","Using user provided OfflineComponentProvider");try{await bm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!km(n))throw n;Bl("Error using user provided cache. Falling back to memory cache: "+n),await bm(e,new mm)}}else zl("FirestoreClient","Using default OfflineComponentProvider"),await bm(e,new mm);return e._offlineComponents}async function Em(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zl("FirestoreClient","Using user provided OnlineComponentProvider"),await wm(e,e._uninitializedComponentsProvider._online)):(zl("FirestoreClient","Using default OnlineComponentProvider"),await wm(e,new gm))),e._onlineComponents}function xm(e){return Em(e).then(e=>e.syncEngine)}async function _m(e){const t=await Em(e),n=t.eventManager;return n.onListen=Yp.bind(null,t.syncEngine),n.onUnlisten=$p.bind(null,t.syncEngine),n}function Im(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new ym({next:o=>{t.enqueueAndForget(()=>Fp(e,s));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ql(Gl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ql(Gl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Bp(Ku(n.path),o,{includeMetadataChanges:!0,Ku:!0});return Mp(e,s)}(await _m(e),e.asyncQueue,t,n,r)),r.promise}function Tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new ym({next:n=>{t.enqueueAndForget(()=>Fp(e,s)),n.fromCache&&"server"===r.source?i.reject(new Ql(Gl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Bp(n,o,{includeMetadataChanges:!0,Ku:!0});return Mp(e,s)}(await _m(e),e.asyncQueue,t,n,r)),r.promise}function Cm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Am=new Map;function Nm(e,t,n){if(!n)throw new Ql(Gl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Rm(e){if(!pc.isDocumentKey(e))throw new Ql(Gl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Pm(e){if(pc.isDocumentKey(e))throw new Ql(Gl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Wl()}function Om(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ql(Gl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dm(e);throw new Ql(Gl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Lm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ql(Gl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ql(Gl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ql(Gl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ql(Gl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ql(Gl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ql(Gl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class jm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ql(Gl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ql(Gl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $l;switch(e.type){case"firstParty":return new tc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ql(Gl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Am.get(e);t&&(zl("ComponentProvider","Removing Datastore"),Am.delete(e),t.terminate())}(this),Promise.resolve()}}function Mm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Om(e,jm))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=jl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[g(JSON.stringify({alg:"none",type:"JWT"})),g(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ql(Gl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new jl(o)}e._authCredentials=new Jl(new Xl(t,n))}}class Fm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fm(this.firestore,e,this._key)}}class Um{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Um(this.firestore,e,this._query)}}class zm extends Um{constructor(e,t,n){super(e,t,Ku(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fm(this.firestore,null,new pc(e))}withConverter(e){return new zm(this.firestore,e,this._path)}}function Vm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=j(e),Nm("collection","path",t),e instanceof jm){const n=dc.fromString(t,...r);return Pm(n),new zm(e,null,n)}{if(!(e instanceof Fm||e instanceof zm))throw new Ql(Gl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dc.fromString(t,...r));return Pm(n),new zm(e.firestore,null,n)}}function Bm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=j(e),1===arguments.length&&(t=oc.A()),Nm("doc","path",t),e instanceof jm){const n=dc.fromString(t,...r);return Rm(n),new Fm(e,null,new pc(n))}{if(!(e instanceof Fm||e instanceof zm))throw new Ql(Gl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dc.fromString(t,...r));return Rm(n),new Fm(e.firestore,e instanceof zm?e.converter:null,new pc(n))}}class qm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Yf(this,"async_queue_retry"),this.Xc=()=>{const e=Gf();e&&zl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Gf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Gf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Yl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!xc(e))throw e;zl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vl("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Np.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Wl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Wm extends jm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new qm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Km(this),this._firestoreClient.terminate()}}function Hm(e){return e._firestoreClient||Km(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Km(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Xc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Cm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new vm(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Gm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gm(Bc.fromBase64String(e))}catch(e){throw new Ql(Gl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Gm(Bc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ym{constructor(e){this._methodName=e}}class Xm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ql(Gl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ql(Gl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sc(this._lat,e._lat)||sc(this._long,e._long)}}const $m=/^__.*__$/;class Jm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Qd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gd(e,this.data,t,this.fieldTransforms)}}class Zm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Qd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wl()}}class tg{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return yg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(eg(this.ca)&&$m.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ng{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qf(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new tg({ca:e,methodName:t,ga:n,path:fc.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rg(e){const t=e._freezeSettings(),n=Qf(e._databaseId);return new ng(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ig(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ya(o.merge||o.mergeFields?2:0,t,n,i);fg("Data must be an object, but it was:",s,r);const a=dg(r,s);let l,c;if(o.merge)l=new zc(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=pg(t,r,n);if(!s.contains(i))throw new Ql(Gl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));vg(e,i)||e.push(i)}l=new zc(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new Jm(new pu(a),l,c)}class og extends Ym{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof og}}class sg extends Ym{_toFieldTransform(e){return new Md(e.path,new Ad)}isEqual(e){return e instanceof sg}}function ag(e,t,n,r){const i=e.ya(1,t,n);fg("Data must be an object, but it was:",i,r);const o=[],s=pu.empty();Dc(r,(e,r)=>{const a=gg(t,e,n);r=j(r);const l=i.da(a);if(r instanceof og)o.push(a);else{const e=ug(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new zc(o);return new Zm(s,a,i.fieldTransforms)}function lg(e,t,n,r,i,o){const s=e.ya(1,t,n),a=[pg(t,r,n)],l=[i];if(o.length%2!=0)throw new Ql(Gl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(pg(t,o[h])),l.push(o[h+1]);const c=[],u=pu.empty();for(let h=a.length-1;h>=0;--h)if(!vg(c,a[h])){const e=a[h];let t=l[h];t=j(t);const n=s.da(e);if(t instanceof og)c.push(e);else{const r=ug(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new zc(c);return new Zm(u,d,s.fieldTransforms)}function cg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ug(n,e.ya(r?4:3,t))}function ug(e,t){if(hg(e=j(e)))return fg("Unsupported field value:",t,e),dg(e,t);if(e instanceof Ym)return function(e,t){if(!eg(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ug(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=j(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=lc.fromDate(e);return{timestampValue:Nh(t.serializer,n)}}if(e instanceof lc){const n=new lc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Nh(t.serializer,n)}}if(e instanceof Xm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Gm)return{bytesValue:Rh(t.serializer,e._byteString)};if(e instanceof Fm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Oh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Dm(e)))}(e,t)}function dg(e,t){const n={};return Oc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dc(e,(e,r)=>{const i=ug(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function hg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof lc||e instanceof Xm||e instanceof Gm||e instanceof Fm||e instanceof Ym)}function fg(e,t,n){if(!hg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Dm(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function pg(e,t,n){if((t=j(t))instanceof Qm)return t._internalPath;if("string"==typeof t)return gg(e,t);throw yg("Field path arguments must be of type string or ",e,!1,void 0,n)}const mg=new RegExp("[~\\*/\\[\\]]");function gg(e,t,n){if(t.search(mg)>=0)throw yg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Qm(...t.split("."))._internalPath}catch(r){throw yg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yg(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Ql(Gl.INVALID_ARGUMENT,a+e+l)}function vg(e,t){return e.some(e=>e.isEqual(t))}class bg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wg extends bg{data(){return super.data()}}function kg(e,t){return"string"==typeof t?gg(e,t):t instanceof Qm?t._internalPath:t._delegate._internalPath}function Sg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ql(Gl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class xg extends Eg{}function _g(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Eg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Tg).length,n=e.filter(e=>e instanceof Ig).length;if(t>1||t>0&&n>0)throw new Ql(Gl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Ig extends xg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ig(e,t,n)}_apply(e){const t=this._parse(e);return Pg(e._query,t),new Um(e.firestore,e.converter,Zu(e._query,t))}_parse(e){const t=rg(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Rg(s,o);const t=[];for(const n of s)t.push(Ng(r,e,n));a={arrayValue:{values:t}}}else a=Ng(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Rg(s,o),a=cg(n,"where",s,"in"===o||"not-in"===o);return Eu.create(i,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Tg extends Eg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tg(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:xu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Pg(n,i),n=Zu(n,i)}(e._query,t),new Um(e.firestore,e.converter,Zu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Cg extends xg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Cg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new wu(t,n);return function(e,t){if(null===Qu(e)){const n=Yu(e);null!==n&&Dg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Um(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Wu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ag(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kg("orderBy",e);return Cg._create(n,t)}function Ng(e,t,n){if("string"==typeof(n=j(n))){if(""===n)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xu(t)&&-1!==n.indexOf("/"))throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(dc.fromString(n));if(!pc.isDocumentKey(r))throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return su(e,new pc(r))}if(n instanceof Fm)return su(e,n._key);throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Dm(n),"."))}function Rg(e,t){if(!Array.isArray(e)||0===e.length)throw new Ql(Gl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Pg(e,t){if(t.isInequality()){const n=Yu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Qu(e);null!==i&&Dg(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ql(Gl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ql(Gl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Dg(e,t,n){if(!n.isEqual(t))throw new Ql(Gl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Og{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Wl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Dc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Xm(Hc(e.latitude),Hc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Qc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const t=Wc(e);return new lc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dc.fromString(e);Hl(tf(n));const r=new $c(n.get(1),n.get(3)),i=new pc(n.popFirst(5));return r.isEqual(t)||Vl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Lg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class jg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mg extends bg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Fg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Fg extends Mg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ug{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new jg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Fg(this._firestore,this._userDataWriter,n.key,n,new jg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ql(Gl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Fg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new jg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Fg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new jg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:zg(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function zg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wl()}}function Vg(e){e=Om(e,Fm);const t=Om(e.firestore,Wm);return Im(Hm(t),e._key).then(n=>Qg(t,e,n))}class Bg extends Og{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fm(this.firestore,null,t)}}function qg(e){e=Om(e,Um);const t=Om(e.firestore,Wm),n=Hm(t),r=new Bg(t);return Sg(e._query),Tm(n,e._query).then(n=>new Ug(t,r,e,n))}function Wg(e,t,n){e=Om(e,Fm);const r=Om(e.firestore,Wm),i=rg(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=j(t))||t instanceof Qm?lg(i,"updateDoc",e._key,t,n,a):ag(i,"updateDoc",e._key,t),Gg(r,[o.toMutation(e._key,Ud.exists(!0))])}function Hg(e){return Gg(Om(e.firestore,Wm),[new Jd(e._key,Ud.none())])}function Kg(e,t){const n=Om(e.firestore,Wm),r=Bm(e),i=Lg(e.converter,t);return Gg(n,[ig(rg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ud.exists(!1))]).then(()=>r)}function Gg(e,t){return function(e,t){const n=new Yl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=pm(e);try{const e=await function(e,t){const n=Kl(e),r=lc.now(),i=t.reduce((e,t)=>e.add(t.key),bd());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ud(),l=bd();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=Hd(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Qd(e.key,t,mu(t.value.mapValue),Ud.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:fd(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Lc(sc)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await um(r,e.changes),await yp(r.remoteStore)}catch(e){const t=Rp(e,"Failed to persist write");n.reject(t)}}(await xm(e),t,n)),n.promise}(Hm(e),t)}function Qg(e,t,n){const r=n.docs.get(t._key),i=new Bg(e);return new Mg(e,i,t._key,r,new jg(n.hasPendingWrites,n.fromCache),t.converter)}class Yg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rg(e)}set(e,t,n){this._verifyNotCommitted();const r=Xg(e,this._firestore),i=Lg(r.converter,t,n),o=ig(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ud.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Xg(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=j(t))||t instanceof Qm?lg(this._dataReader,"WriteBatch.update",r._key,t,n,s):ag(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ud.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xg(e,this._firestore);return this._mutations=this._mutations.concat(new Jd(t._key,Ud.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ql(Gl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xg(e,t){if((e=j(e)).firestore!==t)throw new Ql(Gl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function $g(){return new sg("serverTimestamp")}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ml=e}(Ge),qe(new M("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Wm(new Zl(e.getProvider("auth-internal")),new rc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ql(Gl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),Xe(Ll,"3.13.0",e),Xe(Ll,"3.13.0","esm2017")}();const Jg=!0;let Zg=null,ey=null,ty=null;Zg=Qe({apiKey:"AIzaSyDqmFOW2daTZL4CQO321Ae6C8jxvfuVlz0",authDomain:"comlib-6e6c4.firebaseapp.com",projectId:"comlib-6e6c4",storageBucket:"comlib-6e6c4.appspot.com",messagingSenderId:"1072674193479",appId:"1:1072674193479:web:9e41e976a5f083e8eb7162"}),ey=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();const t=We(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=We(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(A(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ft(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ai,persistence:[wr,rr,or]}),r=S("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>di)return;const r=null===t||void 0===t?void 0:t.token;hi!==r&&(hi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){j(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){j(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const o=w("auth");return o&&Sn(n,"http://".concat(o)),n}(Zg),ty=function(e,t){const n="string"==typeof e?e:t||"(default)",r=We("object"==typeof e?e:Ye(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(()=>{const e=w("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&Mm(r,...e)}return r}(Zg);function ny(e){return ey?function(e,t,n,r){return j(e).onAuthStateChanged(t,n,r)}(ey,e):()=>{}}async function ry(){if(!ey)throw new Error("Firebase disabled");if(!ey.currentUser)throw new Error("No user");return ey.currentUser.emailVerified?{skipped:!0}:(await Jn(ey.currentUser),{sent:!0})}var iy=n(713);function oy(e){let{user:t}=e;const[n,i]=(0,r.useState)("");if(!t||t.emailVerified)return null;return(0,iy.jsxs)("div",{style:{background:"#fff3cd",border:"1px solid #ffe58f",padding:"8px 12px",borderRadius:4,marginBottom:12,fontSize:14},children:[(0,iy.jsx)("strong",{children:"Email not verified."})," Please click the link sent to ",t.email,".",(0,iy.jsx)("button",{onClick:async()=>{i("Sending...");try{await ry(),i("Verification email sent. Check your inbox.")}catch(e){i(e.message)}},style:{marginLeft:10},className:"btn btn-sm btn-outline-secondary",children:"Resend"}),n&&(0,iy.jsx)("div",{style:{marginTop:4,fontSize:12},children:n})]})}function sy(e){let{user:t}=e;const[n,i]=(0,r.useState)("");if(!t)return null;if(t.emailVerified)return(0,iy.jsx)("div",{style:{background:"#e6ffed",border:"1px solid #b2f2c2",padding:"4px 8px",borderRadius:4,fontSize:12,margin:"8px 0"},children:"Email verified \u2713"});return(0,iy.jsxs)("div",{style:{background:"#fff3cd",border:"1px solid #ffe58f",padding:"6px 10px",borderRadius:4,fontSize:13,margin:"8px 0"},children:[(0,iy.jsx)("strong",{children:"Email not verified."})," Please verify.",(0,iy.jsx)("button",{onClick:async()=>{i("Sending...");try{await ry(),i("Verification email sent. Check your inbox.")}catch(e){i(e.message)}},className:"btn btn-sm btn-outline-secondary",style:{marginLeft:10},disabled:n.startsWith("Sending"),children:"Resend"}),n&&(0,iy.jsx)("div",{style:{marginTop:4,fontSize:11},children:n})]})}const ay="#4A90E2",ly="#F5F5F5",cy="#333",uy="#5CB85C",dy="#F0AD4E";const hy=function(){const[e,t]=(0,r.useState)("home"),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[y,v]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[k,S]=(0,r.useState)(""),[E,x]=(0,r.useState)(!1),[_,I]=(0,r.useState)([]),[T,C]=(0,r.useState)(!1),[A,N]=(0,r.useState)(""),[R,P]=(0,r.useState)(""),[D,O]=(0,r.useState)(!1),[L,M]=(0,r.useState)({isValid:!0,message:""}),F=["The Alchemist","To Kill a Mockingbird","1984","Pride and Prejudice","The Great Gatsby","Harry Potter and the Philosopher's Stone","The Lord of the Rings","The Catcher in the Rye","The Da Vinci Code","The Hobbit","Jane Eyre","Wuthering Heights","The Picture of Dorian Gray","Brave New World","Animal Farm","The Chronicles of Narnia","Gone with the Wind","The Kite Runner","Life of Pi","The Book Thief","The Hunger Games","Twilight","Fifty Shades of Grey","The Girl with the Dragon Tattoo","The Fault in Our Stars","Where the Crawdads Sing","Educated","Becoming","Sapiens","Atomic Habits"],[U,z]=(0,r.useState)([]),[V,B]=(0,r.useState)(!1),[q,W]=(0,r.useState)(!1),[H,K]=(0,r.useState)(""),[G,Q]=(0,r.useState)("dashboard");(0,r.useEffect)(()=>{console.log("adminView changed to:",G)},[G]);const[Y,X]=(0,r.useState)([]),[$,J]=(0,r.useState)([]),[Z,ee]=(0,r.useState)(null),[te,ne]=(0,r.useState)(!1),[re,ie]=(0,r.useState)([]),[oe,se]=(0,r.useState)("list"),ae=async()=>{if(H.trim()){i(!0);try{const t=H.trim().split("\n");let n=0,r=0;const i=[];for(const o of t){if(!o.trim())continue;const t=o.split(",").map(e=>e.trim());if(t.length<2){i.push("Invalid format: ".concat(o)),r++;continue}const s={title:t[0]||"",author:t[1]||"",isbn:t[2]||"",bookPrice:t[3]||"0",rentalPrice:t[4]||"0",condition:t[5]||"good",imageUrl:t[6]||"",categories:[],communityName:(null===Xe||void 0===Xe?void 0:Xe.communityName)||(null===m||void 0===m?void 0:m.communityName)||"Unknown"};if(s.title&&s.author)try{const e=await qe(s);v(t=>[e,...t]),n++}catch(e){i.push('Failed to add "'.concat(s.title,'": ').concat(e.message)),r++}else i.push("Missing title or author: ".concat(o)),r++}K(""),W(!1),alert("Bulk add completed!\nSuccessfully added: ".concat(n," books\nErrors: ").concat(r," books").concat(i.length>0?"\n\nFirst few errors:\n"+i.slice(0,3).join("\n"):"")),n>0&&await Be()}catch(e){console.error("Error in bulk add:",e),alert("Failed to process bulk add: "+e.message)}finally{i(!1)}}else alert("Please enter book information")},le=e=>{if(!e.pickedUpDate||!e.rentalPrice)return{daysSincePickup:0,rentalPeriodDays:7,outstandingRent:0,daysOverdue:0,fine:0,totalOwed:0};const t=new Date(e.pickedUpDate),n=new Date,r=Math.floor((n-t)/864e5),i=Math.max(0,r-7),o=Math.min(r,7)*(e.bookRentalPrice||e.rentalPrice||0),s=5*i;return{daysSincePickup:r,rentalPeriodDays:7,outstandingRent:o,daysOverdue:i,fine:s,totalOwed:o+s}},ce=(e,t)=>{if("borrower"===t){return _.filter(t=>(t.borrowerId===e||t.borrowerEmail===e)&&"picked-up"===t.status).reduce((e,t)=>e+le(c(c({},t),{},{bookRentalPrice:t.rentalPrice})).totalOwed,0)}if("publisher"===t){return _.filter(t=>(t.bookOwnerId===e||t.bookOwnerEmail===e)&&"picked-up"===t.status).reduce((e,t)=>e+le(c(c({},t),{},{bookRentalPrice:t.rentalPrice})).totalOwed,0)}return 0},ue=async()=>{if(ty&&f)try{console.log("Fetching user notifications for:",f.email);const e=_g(Vm(ty,"notifications"),Ag("timestamp","desc")),t=(await qg(e)).docs.map(e=>c({id:e.id},e.data()));console.log("All notifications fetched:",t);const n=t.filter(e=>e.recipientEmail===f.email||e.recipientId===f.uid);console.log("Filtered notifications for current user:",n);const r=_.filter(e=>e.borrowerId===f.uid).filter(e=>"picked-up"===e.status).map(e=>{const t=le(c(c({},e),{},{bookRentalPrice:e.rentalPrice}));let n='Rental update for "'.concat(e.bookTitle,'": ');return t.daysOverdue>0?n+="".concat(t.daysOverdue," days overdue! Fine: \u20b9").concat(t.fine,". Total owed: \u20b9").concat(t.totalOwed):n+="".concat(t.daysSincePickup,"/").concat(t.rentalPeriodDays," days used. Current rent: \u20b9").concat(t.outstandingRent),{id:"rental-".concat(e.id),type:t.daysOverdue>0?"rental_overdue":"rental_update",message:n,createdAt:(new Date).toISOString(),bookTitle:e.bookTitle,isRentalReminder:!0,priority:t.daysOverdue>0?"high":"medium"}}),i=[...n,...r];ie(i),console.log("Fetched notifications:",i.length)}catch(e){console.error("Error fetching notifications:",e)}},de=(0,r.useCallback)(async()=>{if(ty&&f)try{console.log("Fetching all users...");const e=Vm(ty,"users"),t=(await qg(e)).docs.map(e=>c({id:e.id},e.data()));console.log("Fetched users data:",t),X(t),console.log("Set allUsers state with",t.length,"users")}catch(e){console.error("Error fetching users:",e)}else console.log("fetchAllUsers: Missing requirements",{firebaseEnabled:Jg,db:!!ty,authUser:!!f})},[f]),he=(0,r.useCallback)(async()=>{if(ty&&f)try{console.log("Fetching transactions...");const e=Vm(ty,"requests"),t=(await qg(e)).docs.map(e=>{const t=e.data();return c(c({id:e.id},t),{},{bookTitle:t.bookTitle,borrowerName:t.borrowerName,ownerName:t.bookOwnerName||"Unknown",createdAt:t.requestDate?{seconds:new Date(t.requestDate).getTime()/1e3}:t.createdAt})});console.log("Setting transactions, count:",t.length),J(t),console.log("Fetched transactions:",t.length)}catch(e){console.error("Error fetching transactions:",e)}else console.log("fetchTransactions: Missing requirements",{firebaseEnabled:Jg,db:!!ty,authUser:!!f})},[f]),fe=async(e,t)=>{if(ty&&f)try{console.log("Updating user role:",{userId:e,newRole:t,adminEmail:f.email});const n=Bm(ty,"users",e);await Wg(n,{role:t}),console.log("User role updated successfully"),alert("User role updated to ".concat(t," successfully!")),await de()}catch(n){console.error("Error updating user role:",n),console.error("Error details:",{code:n.code,message:n.message,stack:n.stack}),alert("Failed to update user role: "+n.message)}else console.log("updateUserRole: Missing requirements",{firebaseEnabled:Jg,db:!!ty,authUser:!!f})},pe=async(e,t)=>{if(ty&&f)try{console.log("Updating user status:",{userId:e,newStatus:t,adminEmail:f.email});const n=Bm(ty,"users",e);await Wg(n,{status:t}),console.log("User status updated successfully"),alert("User status updated to ".concat(t," successfully!")),await de()}catch(n){console.error("Error updating user status:",n),console.error("Error details:",{code:n.code,message:n.message,stack:n.stack}),alert("Failed to update user status: "+n.message)}else console.log("updateUserStatus: Missing requirements",{firebaseEnabled:Jg,db:!!ty,authUser:!!f})},[me,ge]=(0,r.useState)({title:"",author:"",isbn:"",bookPrice:"",rentalPrice:"",categories:[],scanIsbn:!1,condition:"good",imageUrl:"",pickupInstructions:""}),[ye,ve]=(0,r.useState)(""),[be,we]=(0,r.useState)(""),[ke,Se]=(0,r.useState)(""),[Ee,xe]=(0,r.useState)(""),[_e,Ie]=(0,r.useState)(""),[Te,Ce]=(0,r.useState)(""),[Ae,Ne]=(0,r.useState)(""),[Re,Pe]=(0,r.useState)(""),[De,Oe]=(0,r.useState)(""),[Le,je]=(0,r.useState)(!1),[Me,Fe]=(0,r.useState)({isValid:!1,message:""}),[Ue,ze]=(0,r.useState)([]),Ve=e=>{const t=e.replace(/\D/g,"");return 10===t.length&&/^[6-9]/.test(t)||12===t.length&&t.startsWith("91")&&/^91[6-9]/.test(t)||13===t.length&&t.startsWith("91")&&/^91[6-9]/.test(t)?{isValid:!0,message:"\u2705 Valid phone number"}:0===e.length?{isValid:!1,message:""}:{isValid:!1,message:"\u274c Please enter a valid Indian mobile number (10 digits starting with 6-9)"}},Be=(0,r.useCallback)(async()=>{if(!ty)return[];try{console.log("Fetching books from Firestore...");const e=_g(Vm(ty,"books"),Ag("createdAt","desc")),t=await qg(e),n=_g(Vm(ty,"users")),r=await qg(n),i={};r.forEach(e=>{i[e.data().email]=e.data()});const o=null===m||void 0===m?void 0:m.communityName,s=[];return t.forEach(e=>{const t=c({id:e.id},e.data());if(o){const e=i[t.ownerEmail];(null===e||void 0===e?void 0:e.communityName)===o&&s.push(t)}else s.push(t)}),console.log("Fetched ".concat(s.length," books from Firestore (filtered by community: ").concat(o||"none",")")),s}catch(e){return console.error("Error fetching books from Firestore:",e),[]}},[m]),qe=async e=>{if(!ty||!f)throw new Error("Firebase not available or user not authenticated");try{console.log("Adding book to Firestore:",e),console.log("Current user:",f);const t=Vm(ty,"books"),n=c(c({},e),{},{ownerId:f.uid,ownerEmail:f.email,ownerName:f.displayName||(null===m||void 0===m?void 0:m.name)||"Unknown",status:"available",createdAt:$g(),updatedAt:$g()});console.log("Book document to add:",n);const r=await Kg(t,n);return console.log("Book added to Firestore with ID:",r.id),c({id:r.id},n)}catch(t){if(console.error("Error adding book to Firestore:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),"permission-denied"===t.code)throw new Error("Permission denied. Please ensure you are logged in and try again. If the problem persists, contact the administrator.");throw t}};(0,r.useEffect)(()=>{if(!ey)return;const e=ny(e=>{console.log("Auth state changed:",e),p(e),e?(s(!0),l(!1),d(!1),We(e.uid),He(),Ke()):(s(!1),g(null))});return()=>e()},[]),(0,r.useEffect)(()=>{(async()=>{if(f){const e=await Be();v(e)}else try{const e=await h();w(e)}catch(e){console.error("Error loading backend books:",e)}})(),f&&We(f.uid)},[f,m,Be]),(0,r.useEffect)(()=>{f&&m&&("sujay_jain@hotmail.com"===f.email||"admin"===(null===m||void 0===m?void 0:m.role)||"super_admin"===(null===m||void 0===m?void 0:m.role))&&de()},[f,m,de]),(0,r.useEffect)(()=>{"admin"===e&&f&&m&&("sujay_jain@hotmail.com"===f.email||"admin"===(null===m||void 0===m?void 0:m.role)||"super_admin"===(null===m||void 0===m?void 0:m.role))&&(console.log("Admin view accessed, fetching users..."),de())},[e,f,m,de]),(0,r.useEffect)(()=>{console.log("Admin dashboard useEffect triggered:",{currentView:e,adminView:G,authUser:!!f,userProfile:!!m}),"admin"===e&&"dashboard"===G&&f&&m&&("sujay_jain@hotmail.com"===f.email||"admin"===(null===m||void 0===m?void 0:m.role)||"super_admin"===(null===m||void 0===m?void 0:m.role))&&(console.log("Admin dashboard view accessed, ensuring data is loaded..."),0===Y.length&&de(),0===$.length&&he())},[e,G,f,m,Y.length,$.length,de,he]),(0,r.useEffect)(()=>{"account"===e&&f&&f.uid&&(console.log("Account view accessed, refreshing user profile..."),We(f.uid))},[e,f]);const We=async e=>{if(ty)try{const t=await Vg(Bm(ty,"users",e));t.exists()&&g(t.data())}catch(t){console.error("Error loading user profile:",t)}},He=async()=>{if(ty)try{const e=_g(Vm(ty,"requests"),Ag("requestDate","desc")),t=(await qg(e)).docs.map(e=>c({id:e.id},e.data()));I(t)}catch(e){console.error("Error loading requests:",e)}},Ke=async()=>{if(ty)try{const e=_g(Vm(ty,"transactions"),Ag("borrowDate","desc")),t=(await qg(e)).docs.map(e=>c({id:e.id},e.data()));J(t)}catch(e){console.error("Error loading transactions:",e)}},Ge=async()=>{if(f){const e=await Be();v(e)}else try{const e=await h();w(e)}catch(e){console.error("Error loading backend books:",e)}},Qe=async e=>{try{console.log("Creating notification with data:",e);const t=await Kg(Vm(ty,"notifications"),c(c({},e),{},{timestamp:(new Date).toISOString(),read:!1}));console.log("Notification created with ID:",t.id)}catch(t){throw console.error("Error creating notification:",t),t}},Ye=async(e,t,n)=>{try{console.log("Email notification would be sent:"),console.log("To: ".concat(e)),console.log("Subject: ".concat(t)),console.log("Message: ".concat(n)),await Qe({type:"email_sent",recipientEmail:e,subject:t,message:n,status:"pending"})}catch(r){console.error("Error sending email notification:",r)}},Xe=f,$e=y,Je=$e.filter(e=>e.title.toLowerCase().includes(k.toLowerCase())||e.author.toLowerCase().includes(k.toLowerCase())||e.isbn&&e.isbn.toLowerCase().includes(k.toLowerCase())),Ze=async(e,t)=>{i(!0);try{await function(e,t,n){return Xn(j(e),Ln.credential(t,n))}(ey,e,t),console.log("Firebase login successful")}catch(n){console.error("Login error:",n),alert("Login failed: "+n.message)}finally{i(!1)}},et=async(e,t,n)=>{i(!0);try{{console.log("Starting registration process...");const i=await async function(e,t,n){var r;const i=wn(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let s;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await yn(i,o,"signUpPassword");s=Bn(i,e)}else s=Bn(i,o).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await yn(i,o,"signUpPassword");return Bn(i,e)}return Promise.reject(e)});const a=await s.catch(e=>Promise.reject(e)),l=await qn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(ey,e,t),o=i.user;console.log("User created successfully:",o.uid),await Zn(o,{displayName:n.name}),console.log("Profile updated successfully"),await new Promise(e=>setTimeout(e,1e3)),console.log("Attempting to save user profile to Firestore...");const s={email:e,name:n.name,parentName:n.parentName||"",apartmentNumber:n.apartmentNumber,communityName:n.communityName,phoneNumber:n.phoneNumber,persona:n.persona,role:"user",status:"pending",createdAt:$g()};console.log("User document to create:",s),console.log("Creating document for user ID:",o.uid),await function(e,t,n){e=Om(e,Fm);const r=Om(e.firestore,Wm),i=Lg(e.converter,t,n);return Gg(r,[ig(rg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ud.none())])}(Bm(ty,"users",o.uid),s),console.log("User profile saved to Firestore successfully");try{await Jn(o,{url:window.location.origin+"/community-library-project",handleCodeInApp:!1}),console.log("Email verification sent successfully")}catch(r){console.error("Email verification failed:",r),alert("Registration successful, but email verification failed to send. Please check your email settings or contact support.")}console.log("Firebase registration successful"),alert("Registration successful! Please check your email to verify your account. Your registration is pending admin approval."),d(!1),Se(""),xe(""),Ie(""),Ce(""),Ne(""),Pe(""),Oe(""),je(!1),Fe({isValid:!1,message:""}),ze([])}}catch(o){if(console.error("Registration error:",o),console.error("Error code:",o.code),console.error("Error message:",o.message),"permission-denied"===o.code)alert("Registration failed: Permission denied. Please try again. If the problem persists, contact support.");else if("auth/email-already-in-use"===o.code){const t=await(async e=>{try{const t=_g(Vm(ty,"users")),n=(await qg(t)).docs.find(t=>t.data().email===e);return n?n.data():null}catch(o){return console.error("Error checking existing user data:",o),null}})(e);t?alert("Registration failed: This email is already registered with an active account. Please try logging in or use a different email."):alert("Registration failed: This email was previously used but the account appears to have been deleted. Please contact an administrator to resolve this issue, or try using a different email address.")}else"auth/weak-password"===o.code?alert("Registration failed: Password is too weak. Please use a stronger password."):"auth/invalid-email"===o.code?alert("Registration failed: Invalid email address. Please check your email."):alert("Registration failed: "+o.message)}finally{i(!1)}},tt=async()=>{try{await function(e){return j(e).signOut()}(ey),t("home")}catch(e){console.error("Logout error:",e)}},nt=async e=>{if(Xe)if(Xe.emailVerified)if("approved"===(null===m||void 0===m?void 0:m.status)||"sujay_jain@hotmail.com"===Xe.email)if(ty)try{i(!0);const t=$e.find(t=>t.id===e);if(!t)return void alert("Book not found");const n=_.filter(e=>e.borrowerId===Xe.uid).filter(e=>"picked-up"===e.status).reduce((e,t)=>e+le(c(c({},t),{},{bookRentalPrice:t.rentalPrice})).totalOwed,0);let r='Do you want to request to borrow "'.concat(t.title,'" by ').concat(t.author,"?\n\nRental Price: \u20b9").concat(t.rentalPrice,"/day");n>0&&(r+="\n\n\u26a0\ufe0f Outstanding rent/fines: \u20b9".concat(n,"\nYou currently have unpaid rental fees. Please consider settling these before borrowing more books."));if(!window.confirm(r))return void i(!1);const o={bookId:e,bookTitle:t.title,bookAuthor:t.author,bookOwnerEmail:t.ownerEmail,bookOwnerId:t.ownerId,borrowerId:Xe.uid,borrowerEmail:Xe.email,borrowerName:(null===m||void 0===m?void 0:m.name)||Xe.displayName||"Unknown",borrowerPhone:(null===m||void 0===m?void 0:m.phoneNumber)||"",borrowerCommunity:(null===m||void 0===m?void 0:m.communityName)||"",status:"pending",requestDate:(new Date).toISOString(),rentalPrice:t.rentalPrice,type:"borrow",outstandingRentFines:n};await Kg(Vm(ty,"requests"),o),console.log("Creating notification for book owner:",t.ownerEmail,t.ownerId),await Qe({type:"borrow_request",recipientEmail:t.ownerEmail,recipientId:t.ownerId,senderId:Xe.uid,senderEmail:Xe.email,senderName:(null===m||void 0===m?void 0:m.name)||Xe.displayName||"Unknown",bookId:e,bookTitle:t.title,bookAuthor:t.author,message:"".concat((null===m||void 0===m?void 0:m.name)||Xe.displayName||"Someone",' has requested to borrow your book "').concat(t.title,'" by ').concat(t.author).concat(n>0?" (Note: borrower has \u20b9".concat(n," in outstanding fees)"):""),actionRequired:!0}),console.log("Notification created successfully");const s="\ud83d\udcda New Borrow Request: ".concat(t.title),a="\nHello,\n\nYou have received a new borrow request for your book:\n\n\ud83d\udcd6 Book: ".concat(t.title," by ").concat(t.author,"\n\ud83d\udc64 Requested by: ").concat((null===m||void 0===m?void 0:m.name)||Xe.displayName||"Unknown","\n\ud83d\udce7 Contact: ").concat(Xe.email,"\n\ud83d\udcf1 Phone: ").concat((null===m||void 0===m?void 0:m.phoneNumber)||"Not provided","\n\ud83c\udfd8\ufe0f Community: ").concat((null===m||void 0===m?void 0:m.communityName)||"Not provided","\n\ud83d\udcb0 Rental Price: \u20b9").concat(t.rentalPrice,"/day").concat(n>0?"\n\u26a0\ufe0f Note: This borrower currently has \u20b9".concat(n," in outstanding rental fees/fines."):"","\n\nPlease log in to your Community Library account to approve or reject this request.\n\nBest regards,\nCommunity Library Team\n      ");await Ye(t.ownerEmail,s,a),await He(),alert("Borrow request submitted successfully! The book owner will be notified via email and in-app notification.")}catch(t){console.error("Error creating borrow request:",t),alert("Failed to submit borrow request: "+t.message)}finally{i(!1)}else alert("Firebase is not enabled");else alert("Your account is pending admin approval. You cannot borrow books until an administrator approves your account.");else alert("Please verify your email address before borrowing books. Check your inbox for the verification email.");else alert("Please log in to borrow books")},rt=async()=>{var e;if(!me.title||!me.author||!me.bookPrice||!me.rentalPrice||!me.pickupInstructions)return void alert("Please fill in all required fields (Title, Author, Book Price, Rental Price, Pickup Instructions)");if(!Xe)return void alert("Please log in to add books");if(!Xe.emailVerified)return void alert("Please verify your email address before publishing books. Check your inbox for the verification email.");if("approved"!==(null===m||void 0===m?void 0:m.status)&&"sujay_jain@hotmail.com"!==Xe.email)return void alert("Your account is pending admin approval. You cannot publish books until an administrator approves your account.");const t=Xe&&("sujay_jain@hotmail.com"===Xe.email||"super_admin"===(null===m||void 0===m?void 0:m.role));if(!m||null!==(e=m.persona)&&void 0!==e&&e.includes("publisher")||t)try{i(!0);{const e=await qe(me);v(t=>[e,...t])}ge({title:"",author:"",isbn:"",bookPrice:"",rentalPrice:"",categories:[],scanIsbn:!1,condition:"good",imageUrl:"",pickupInstructions:""}),x(!1),alert("Book added successfully!")}catch(n){console.error("Error adding book:",n),alert("Failed to add book: "+n.message)}finally{i(!1)}else alert("Only users with Publisher role can add books. Please update your profile.")},it=()=>(0,iy.jsxs)("div",{style:{background:ly,padding:"1.5rem",borderRadius:"10px",marginBottom:"1rem"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 1rem 0",color:cy},children:"Add New Book"}),(0,iy.jsxs)("div",{style:{display:"grid",gap:"0.8rem"},children:[(0,iy.jsxs)("div",{style:{position:"relative"},children:[(0,iy.jsx)("input",{type:"text",placeholder:"Book Title * (start typing for suggestions)",value:me.title,onChange:e=>(e=>{if(ge(c(c({},me),{},{title:e})),e.length>2){const t=F.filter(t=>t.toLowerCase().includes(e.toLowerCase())).slice(0,5);z(t),B(!0)}else B(!1)})(e.target.value),onBlur:()=>setTimeout(()=>B(!1),200),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem",width:"100%",boxSizing:"border-box"}}),V&&U.length>0&&(0,iy.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #ddd",borderTop:"none",borderRadius:"0 0 5px 5px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:U.map((e,t)=>(0,iy.jsxs)("div",{onClick:()=>(e=>{ge(c(c({},me),{},{title:e})),B(!1)})(e),style:{padding:"0.6rem",cursor:"pointer",borderBottom:t<U.length-1?"1px solid #eee":"none",fontSize:"0.9rem"},onMouseEnter:e=>e.target.style.background="#f0f9ff",onMouseLeave:e=>e.target.style.background="white",children:["\ud83d\udcda ",e]},t))})]}),(0,iy.jsx)("input",{type:"text",placeholder:"Author *",value:me.author,onChange:e=>ge(c(c({},me),{},{author:e.target.value})),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem"}}),(0,iy.jsx)("input",{type:"text",placeholder:"ISBN (optional)",value:me.isbn,onChange:e=>ge(c(c({},me),{},{isbn:e.target.value})),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem"}}),me.scanIsbn&&me.isbn&&(0,iy.jsx)("button",{type:"button",onClick:()=>(async e=>{if(!e||e.length<10)alert("Please enter a valid ISBN (10 or 13 digits)");else{i(!0);try{const t=await fetch("https://openlibrary.org/api/books?bibkeys=ISBN:".concat(e,"&format=json&jscmd=data")),n=(await t.json())["ISBN:".concat(e)];if(n){let t="";n.cover&&(t=n.cover.large||n.cover.medium||n.cover.small||""),ge(r=>c(c({},r),{},{title:n.title||r.title,author:n.authors?n.authors[0].name:r.author,isbn:e,imageUrl:t||r.imageUrl})),alert("Book details discovered and filled!"+(t?" Cover image loaded.":""))}else alert("Book not found with this ISBN. Please enter details manually.")}catch(t){console.error("Error discovering book:",t),alert("Could not discover book details. Please enter manually.")}finally{i(!1)}}})(me.isbn),disabled:n,style:{padding:"0.6rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:n?"Discovering...":"\ud83d\udd0d Discover Book Details"}),(0,iy.jsx)("input",{type:"number",placeholder:"Book Price *",value:me.bookPrice,onChange:e=>ge(c(c({},me),{},{bookPrice:e.target.value})),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem"}}),(0,iy.jsx)("input",{type:"number",placeholder:"Rental Price (per day) *",value:me.rentalPrice,onChange:e=>ge(c(c({},me),{},{rentalPrice:e.target.value})),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem"}}),(0,iy.jsx)("textarea",{placeholder:"Pickup Instructions (e.g., Apartment 201, Building A, or call before pickup) *",value:me.pickupInstructions,onChange:e=>ge(c(c({},me),{},{pickupInstructions:e.target.value})),rows:3,style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem",resize:"vertical",fontFamily:"inherit"}}),(0,iy.jsxs)("select",{value:me.condition,onChange:e=>ge(c(c({},me),{},{condition:e.target.value})),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem",background:"white"},children:[(0,iy.jsx)("option",{value:"excellent",children:"\ud83d\udcd7 Excellent - Like new"}),(0,iy.jsx)("option",{value:"good",children:"\ud83d\udcd8 Good - Minor wear"}),(0,iy.jsx)("option",{value:"fair",children:"\ud83d\udcd9 Fair - Noticeable wear"}),(0,iy.jsx)("option",{value:"poor",children:"\ud83d\udcd5 Poor - Heavy wear"})]}),(0,iy.jsx)("input",{type:"url",placeholder:"Book Image URL (optional)",value:me.imageUrl,onChange:e=>ge(c(c({},me),{},{imageUrl:e.target.value})),style:{padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"1rem"}}),me.imageUrl&&(0,iy.jsxs)("div",{style:{padding:"0.5rem",background:"#f0f9ff",border:"1px solid #bee5eb",borderRadius:"5px"},children:[(0,iy.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:cy},children:"Image Preview:"}),(0,iy.jsx)("img",{src:me.imageUrl,alt:"Book cover preview",style:{maxWidth:"100px",maxHeight:"150px",objectFit:"contain",border:"1px solid #ddd",borderRadius:"4px"},onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,iy.jsx)("p",{style:{margin:"0",fontSize:"0.8rem",color:"#666",display:"none"},children:"\u26a0\ufe0f Image failed to load. Please check the URL."})]}),(0,iy.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"#f9f9f9",borderRadius:"5px",border:"1px solid #ddd"},children:[(0,iy.jsx)("input",{type:"checkbox",id:"scanIsbn",checked:me.scanIsbn,onChange:e=>ge(c(c({},me),{},{scanIsbn:e.target.checked})),style:{cursor:"pointer"}}),(0,iy.jsx)("label",{htmlFor:"scanIsbn",style:{cursor:"pointer",fontSize:"0.9rem",color:cy},children:"\ud83d\udd0d Discover book details using ISBN"})]}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[(0,iy.jsx)("button",{onClick:rt,disabled:n,style:{flex:1,padding:"0.7rem",background:uy,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"1rem"},children:n?"Adding...":"Add Book"}),(0,iy.jsx)("button",{onClick:()=>W(!q),style:{padding:"0.7rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udcda Bulk Add"}),(0,iy.jsx)("button",{onClick:()=>x(!1),style:{padding:"0.7rem",background:"#ccc",color:cy,border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"1rem"},children:"Cancel"})]}),q&&(0,iy.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:cy},children:"Bulk Add Books"}),(0,iy.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.9rem",color:"#666"},children:"Add multiple books at once. Enter one book per line in CSV format:"}),(0,iy.jsx)("p",{style:{margin:"0 0 1rem 0",fontSize:"0.8rem",color:"#666",fontFamily:"monospace",background:"#e9ecef",padding:"0.5rem",borderRadius:"4px"},children:"Title,Author,ISBN,BookPrice,RentalPrice,Condition,ImageURL"}),(0,iy.jsx)("textarea",{placeholder:"Example:\nThe Alchemist,Paulo Coelho,9780061122415,299,5,good\nTo Kill a Mockingbird,Harper Lee,9780446310789,350,6,excellent",value:H,onChange:e=>K(e.target.value),style:{width:"100%",height:"120px",padding:"0.6rem",border:"1px solid #ddd",borderRadius:"5px",fontSize:"0.9rem",fontFamily:"monospace",resize:"vertical",boxSizing:"border-box"}}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[(0,iy.jsx)("button",{onClick:ae,disabled:n||!H.trim(),style:{flex:1,padding:"0.6rem",background:n||!H.trim()?"#ccc":uy,color:"white",border:"none",borderRadius:"5px",cursor:n||!H.trim()?"not-allowed":"pointer",fontSize:"0.9rem"},children:n?"Processing...":"Add All Books"}),(0,iy.jsx)("button",{onClick:()=>{W(!1),K("")},style:{padding:"0.6rem",background:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"Close"})]})]})]})]}),ot=e=>(0,iy.jsxs)("div",{style:{background:"white",padding:"1.2rem",borderRadius:"8px",border:"1px solid #e0e0e0",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.imageUrl&&(0,iy.jsx)("div",{style:{marginBottom:"1rem",textAlign:"center"},children:(0,iy.jsx)("img",{src:e.imageUrl,alt:e.title,style:{maxWidth:"200px",maxHeight:"250px",objectFit:"cover",borderRadius:"5px",border:"1px solid #ddd"},onError:e=>{e.target.style.display="none"}})}),(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:cy,fontSize:"1.1rem"},children:e.title}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666",fontSize:"0.9rem"},children:[(0,iy.jsx)("strong",{children:"Author:"})," ",e.author]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666",fontSize:"0.9rem"},children:[(0,iy.jsx)("strong",{children:"Publisher:"})," ",(()=>{const t=Y.find(t=>t.email===e.ownerEmail);return t?"".concat(t.name," (").concat(t.communityName||"Community not specified",")"):e.ownerEmail||"Owner not specified"})()]}),e.isbn&&(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666",fontSize:"0.9rem"},children:[(0,iy.jsx)("strong",{children:"ISBN:"})," ",e.isbn]}),e.bookPrice&&(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666",fontSize:"0.9rem"},children:[(0,iy.jsx)("strong",{children:"Book Price:"})," \u20b9",e.bookPrice]}),e.rentalPrice&&(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666",fontSize:"0.9rem"},children:[(0,iy.jsx)("strong",{children:"Rental Price:"})," \u20b9",e.rentalPrice,"/day"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.8rem 0",color:"#666",fontSize:"0.9rem"},children:[(0,iy.jsx)("strong",{children:"Status:"}),(0,iy.jsx)("span",{style:{color:"available"===e.status?uy:"on-hold"===e.status?dy:"#dc3545",fontWeight:"bold",marginLeft:"0.3rem"},children:"on-hold"===e.status?"ON HOLD":e.status.toUpperCase()})]}),"available"===e.status&&Xe&&!(e.ownerId===Xe.id||e.ownerEmail===Xe.email)&&(0,iy.jsx)("button",{onClick:()=>nt(e.id),disabled:n,style:{padding:"0.5rem 1rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"Request to Borrow"})]},e.id),st=e=>(0,iy.jsxs)("div",{style:{background:"white",borderRadius:"8px",border:"1px solid #e0e0e0",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden",transition:"transform 0.2s ease",cursor:"pointer",height:"380px",display:"flex",flexDirection:"column"},children:[(0,iy.jsx)("div",{style:{height:"200px",background:"#f8f9fa",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:e.imageUrl?(0,iy.jsx)("img",{src:e.imageUrl,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.target.style.display="none",e.target.parentNode.innerHTML='<div style="color: #999; font-size: 0.8rem; text-align: center;">\ud83d\udcd6<br>No Image</div>'}}):(0,iy.jsxs)("div",{style:{color:"#999",fontSize:"0.8rem",textAlign:"center"},children:["\ud83d\udcd6",(0,iy.jsx)("br",{}),"No Image"]})}),(0,iy.jsxs)("div",{style:{padding:"1rem",flex:1,display:"flex",flexDirection:"column"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:cy,fontSize:"0.95rem",fontWeight:"bold",lineHeight:"1.2",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.title}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666",fontSize:"0.8rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["by ",e.author]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.5rem 0",color:ay,fontSize:"0.85rem",fontWeight:"bold"},children:["\u20b9",e.rentalPrice,"/day"]}),(0,iy.jsx)("div",{style:{margin:"0 0 0.5rem 0",fontSize:"0.75rem"},children:(0,iy.jsx)("span",{style:{color:"available"===e.status?uy:"on-hold"===e.status?dy:"#dc3545",fontWeight:"bold",textTransform:"uppercase"},children:"on-hold"===e.status?"ON HOLD":e.status})}),"available"===e.status&&Xe&&!(e.ownerId===Xe.id||e.ownerEmail===Xe.email)&&(0,iy.jsx)("button",{onClick:()=>nt(e.id),disabled:n,style:{marginTop:"auto",padding:"0.4rem 0.8rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.8rem",fontWeight:"bold"},children:"Request"})]})]},e.id),at=()=>{var e;return Z?(0,iy.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,iy.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"500px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 1rem 0",color:cy},children:"Manage User"}),(0,iy.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Name:"})," ",Z.name]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Email:"})," ",Z.email]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Community:"})," ",Z.communityName]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Phone:"})," ",Z.phoneNumber||"Not provided"]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Apartment:"})," ",Z.apartmentNumber||"Not provided"]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Persona:"})," ",null===(e=Z.persona)||void 0===e?void 0:e.join(", ")]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Current Role:"}),(0,iy.jsx)("span",{style:{background:"super_admin"===Z.role?"#dc3545":"admin"===Z.role?"#fd7e14":"#28a745",color:"white",padding:"0.2rem 0.5rem",borderRadius:"3px",marginLeft:"0.5rem"},children:Z.role||"user"})]}),(0,iy.jsxs)("p",{children:[(0,iy.jsx)("strong",{children:"Status:"}),(0,iy.jsx)("span",{style:{background:"active"===Z.status?"#28a745":"#ffc107",color:"active"===Z.status?"white":"black",padding:"0.2rem 0.5rem",borderRadius:"3px",marginLeft:"0.5rem"},children:Z.status||"pending"})]})]}),(0,iy.jsxs)("div",{style:{display:"grid",gap:"0.5rem",marginBottom:"1rem"},children:[(0,iy.jsx)("h4",{style:{margin:"0",color:cy},children:"Change Role:"}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,iy.jsx)("button",{onClick:()=>fe(Z.id,"user"),disabled:n,style:{padding:"0.5rem 1rem",background:"user"===Z.role?"#28a745":"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"\ud83d\udc64 User"}),(0,iy.jsx)("button",{onClick:()=>fe(Z.id,"admin"),disabled:n,style:{padding:"0.5rem 1rem",background:"admin"===Z.role?"#fd7e14":"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"\ud83d\udc51 Community Admin"}),(0,iy.jsx)("button",{onClick:()=>fe(Z.id,"super_admin"),disabled:n,style:{padding:"0.5rem 1rem",background:"super_admin"===Z.role?"#dc3545":"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"\ud83d\udc51\ud83c\udf1f Super Admin"})]}),(0,iy.jsx)("h4",{style:{margin:"0.5rem 0 0 0",color:cy},children:"Change Status:"}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,iy.jsx)("button",{onClick:()=>pe(Z.id,"pending"),disabled:n,style:{padding:"0.5rem 1rem",background:"pending"===Z.status?"#ffc107":"#6c757d",color:"pending"===Z.status?"black":"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"\u23f3 Pending"}),(0,iy.jsx)("button",{onClick:()=>pe(Z.id,"active"),disabled:n,style:{padding:"0.5rem 1rem",background:"active"===Z.status?"#28a745":"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"\u2705 Active"}),(0,iy.jsx)("button",{onClick:()=>pe(Z.id,"suspended"),disabled:n,style:{padding:"0.5rem 1rem",background:"suspended"===Z.status?"#dc3545":"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",fontSize:"0.9rem"},children:"\ud83d\udeab Suspended"})]})]}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"space-between"},children:[(0,iy.jsx)("div",{children:("sujay_jain@hotmail.com"===(null===Xe||void 0===Xe?void 0:Xe.email)||"super_admin"===(null===m||void 0===m?void 0:m.role))&&(0,iy.jsx)("button",{onClick:()=>(async(e,t)=>{if(!ty||!f)return void console.log("deleteUser: Missing requirements",{firebaseEnabled:Jg,db:!!ty,authUser:!!f});if("sujay_jain@hotmail.com"!==f.email&&"super_admin"!==(null===m||void 0===m?void 0:m.role))return void alert("Only super administrators can delete users.");if(e===f.uid||t===f.email)return void alert("You cannot delete your own account.");const n="\u26a0\ufe0f WARNING: This will permanently delete the user account and all associated data.\n\nUser: ".concat(t,"\n\nThis action cannot be undone. Are you sure you want to proceed?");if(window.confirm(n))try{i(!0),console.log("Deleting user:",{userId:e,userEmail:t,adminEmail:f.email});const n=Bm(ty,"users",e);await Hg(n),console.log("User deleted successfully from Firestore"),alert("User ".concat(t," has been deleted successfully from the database.\n\nNote: The Firebase Auth account may still exist and should be deleted from the Firebase Console if needed.")),ee(null),ne(!1),await de()}catch(r){console.error("Error deleting user:",r),console.error("Error details:",{code:r.code,message:r.message,stack:r.stack}),alert("Failed to delete user: "+r.message)}finally{i(!1)}})(Z.id,Z.email),disabled:n||Z.id===(null===f||void 0===f?void 0:f.uid)||Z.email===(null===f||void 0===f?void 0:f.email),style:{padding:"0.6rem 1.2rem",background:Z.id===(null===f||void 0===f?void 0:f.uid)||Z.email===(null===f||void 0===f?void 0:f.email)?"#6c757d":"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:n||Z.id===(null===f||void 0===f?void 0:f.uid)||Z.email===(null===f||void 0===f?void 0:f.email)?"not-allowed":"pointer",fontSize:"0.9rem"},title:Z.id===(null===f||void 0===f?void 0:f.uid)||Z.email===(null===f||void 0===f?void 0:f.email)?"Cannot delete your own account":"Permanently delete this user",children:"\ud83d\uddd1\ufe0f Delete User"})}),(0,iy.jsx)("button",{onClick:()=>{ee(null),ne(!1)},style:{padding:"0.6rem 1.2rem",background:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Close"})]})]})}):null},lt=()=>{const e=(null===Xe||void 0===Xe?void 0:Xe.communityName)||(null===m||void 0===m?void 0:m.communityName),t=Xe&&("sujay_jain@hotmail.com"===Xe.email||"super_admin"===(null===m||void 0===m?void 0:m.role)),r=t?Y:Y.filter(t=>t.communityName===e);return(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,iy.jsxs)("h3",{style:{margin:0,color:cy},children:["User Management ",!t&&"(".concat(e,")")]}),(0,iy.jsx)("button",{onClick:de,disabled:n,style:{padding:"0.5rem 1rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\ud83d\udd04 Refresh"})]}),(0,iy.jsxs)("div",{style:{background:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsxs)("div",{style:{background:ly,padding:"1rem",fontWeight:"bold",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 100px 100px 80px 80px 80px 80px",gap:"1rem"},children:[(0,iy.jsx)("span",{children:"Name"}),(0,iy.jsx)("span",{children:"Email"}),(0,iy.jsx)("span",{children:"Community"}),(0,iy.jsx)("span",{children:"Phone"}),(0,iy.jsx)("span",{children:"Apartment"}),(0,iy.jsx)("span",{children:"Outstanding"}),(0,iy.jsx)("span",{children:"Role"}),(0,iy.jsx)("span",{children:"Status"}),(0,iy.jsx)("span",{children:"Actions"})]}),0===r.length?(0,iy.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:0===Y.length?"Click Refresh to load users":"No users found for your community"}):r.map(e=>{const t=(n=e.id,e.email,_.filter(e=>e.borrowerId===n&&"picked-up"===e.status).reduce((e,t)=>e+le(c(c({},t),{},{bookRentalPrice:t.rentalPrice})).totalOwed,0));var n;return(0,iy.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid #eee",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 100px 100px 80px 80px 80px 80px",gap:"1rem",alignItems:"center"},children:[(0,iy.jsx)("span",{style:{fontWeight:"500"},children:e.name}),(0,iy.jsx)("span",{style:{fontSize:"0.9rem",color:"#666"},children:e.email}),(0,iy.jsx)("span",{style:{fontSize:"0.9rem"},children:e.communityName}),(0,iy.jsx)("span",{style:{fontSize:"0.85rem",color:"#666"},children:e.phoneNumber||"Not provided"}),(0,iy.jsx)("span",{style:{fontSize:"0.85rem",color:"#666"},children:e.apartmentNumber||"Not provided"}),(0,iy.jsxs)("span",{style:{fontSize:"0.85rem",fontWeight:"bold",color:t>0?"#dc3545":"#28a745"},children:["\u20b9",t]}),(0,iy.jsx)("span",{style:{background:"super_admin"===e.role?"#dc3545":"admin"===e.role?"#fd7e14":"#28a745",color:"white",padding:"0.2rem 0.5rem",borderRadius:"3px",fontSize:"0.8rem",textAlign:"center"},children:e.role||"user"}),(0,iy.jsx)("span",{style:{background:"active"===e.status?"#28a745":"suspended"===e.status?"#dc3545":"#ffc107",color:"pending"===e.status?"black":"white",padding:"0.2rem 0.5rem",borderRadius:"3px",fontSize:"0.8rem",textAlign:"center"},children:e.status||"pending"}),(0,iy.jsx)("button",{onClick:()=>{ee(e),ne(!0)},style:{padding:"0.4rem 0.8rem",background:ay,color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem"},children:"Edit"})]},e.id)})]})]})},ct=()=>{const e=(null===Xe||void 0===Xe?void 0:Xe.communityName)||(null===m||void 0===m?void 0:m.communityName),t=Xe&&("sujay_jain@hotmail.com"===Xe.email||"super_admin"===(null===m||void 0===m?void 0:m.role)),r=t?$:$.filter(t=>{var n;return(null===(n=Y.find(e=>e.id===t.userId))||void 0===n?void 0:n.communityName)===e});return(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,iy.jsxs)("h3",{style:{margin:0,color:cy},children:["Transaction History ",!t&&"(".concat(e,")")]}),(0,iy.jsx)("button",{onClick:he,disabled:n,style:{padding:"0.5rem 1rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\ud83d\udd04 Refresh"})]}),(0,iy.jsx)("div",{style:{background:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:0===r.length?(0,iy.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:0===$.length?"Click Refresh to load transactions":"No transactions found"}):(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{background:ly,padding:"1rem",fontWeight:"bold",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 100px 120px",gap:"1rem"},children:[(0,iy.jsx)("span",{children:"Book"}),(0,iy.jsx)("span",{children:"Borrower"}),(0,iy.jsx)("span",{children:"Owner"}),(0,iy.jsx)("span",{children:"Status"}),(0,iy.jsx)("span",{children:"Date"})]}),r.map(e=>(0,iy.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid #eee",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 100px 120px",gap:"1rem",alignItems:"center"},children:[(0,iy.jsx)("span",{style:{fontWeight:"500"},children:e.bookTitle||"Unknown Book"}),(0,iy.jsx)("span",{style:{fontSize:"0.9rem"},children:e.borrowerName||"Unknown"}),(0,iy.jsx)("span",{style:{fontSize:"0.9rem"},children:e.bookOwnerEmail||e.ownerName||"Unknown"}),(0,iy.jsx)("span",{style:{background:"approved"===e.status?"#28a745":"returned"===e.status?"#6c757d":"#ffc107",color:"pending"===e.status?"black":"white",padding:"0.2rem 0.5rem",borderRadius:"3px",fontSize:"0.8rem",textAlign:"center"},children:e.status||"pending"}),(0,iy.jsx)("span",{style:{fontSize:"0.8rem",color:"#666"},children:e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleDateString():e.requestDate?new Date(e.requestDate).toLocaleDateString():"Unknown"})]},e.id))]})})]})},ut=()=>{if(!Xe)return(0,iy.jsx)("div",{style:{background:ly,padding:"2rem",borderRadius:"10px",textAlign:"center"},children:(0,iy.jsx)("p",{style:{margin:0,color:"#666"},children:"Please log in to view your requests."})});const e=_.filter(e=>e.bookOwnerEmail===Xe.email&&"pending"===e.status),t=_.filter(e=>e.borrowerId===Xe.uid);return(0,iy.jsxs)("div",{children:[(0,iy.jsx)("h2",{style:{color:cy,marginBottom:"1rem"},children:"My Requests"}),e.length>0&&(0,iy.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,iy.jsxs)("h3",{style:{color:cy,marginBottom:"1rem"},children:["\ud83d\udce5 Incoming Requests (",e.length,")"]}),e.map(e=>(0,iy.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e0e0e0",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsxs)("h4",{style:{margin:"0 0 0.5rem 0",color:cy},children:[e.bookTitle||"Book Title Not Available"," by ",e.bookAuthor||"Author Not Available"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Requested by:"})," ",e.borrowerName||"Name Not Available"," (",e.borrowerEmail,")"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Community:"})," ",e.borrowerCommunity||"Not specified"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Phone:"})," ",e.borrowerPhone||"Not provided"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Rental Price:"})," \u20b9",e.rentalPrice||"Not specified","/day"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 1rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Requested on:"})," ",new Date(e.requestDate).toLocaleDateString()]}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,iy.jsx)("button",{onClick:()=>(async(e,t)=>{try{i(!0);const n=Bm(ty,"requests",e),r=(await Vg(n)).data();if(!r)return void alert("Request not found");await Wg(n,{status:"approved",approvalDate:(new Date).toISOString()}),await Wg(Bm(ty,"books",t),{status:"on-hold",holdDate:(new Date).toISOString(),reservedFor:r.borrowerId}),await Qe({type:"request_approved",recipientEmail:r.borrowerEmail,recipientId:r.borrowerId,senderId:Xe.uid,senderEmail:Xe.email,senderName:(null===m||void 0===m?void 0:m.name)||Xe.displayName||"Book Owner",bookId:t,bookTitle:r.bookTitle,bookAuthor:r.bookAuthor,requestId:e,message:'Your borrow request for "'.concat(r.bookTitle,'" has been approved! Check your email for pickup instructions and contact details.'),actionRequired:!1});const o=Bm(ty,"books",t),s=await Vg(o),a=s.exists()?s.data():null,l="\u2705 Borrow Request Approved: ".concat(r.bookTitle),u="\nHello ".concat(r.borrowerName,",\n\nGreat news! Your borrow request has been approved:\n\n\ud83d\udcd6 Book: ").concat(r.bookTitle," by ").concat(r.bookAuthor,"\n\ud83d\udc64 Book Owner: ").concat((null===m||void 0===m?void 0:m.name)||Xe.displayName||"Book Owner"," (").concat(Xe.email,")\n\ud83c\udfe0 Community: ").concat((null===m||void 0===m?void 0:m.communityName)||"Not specified","\n\ufffd Contact: ").concat((null===m||void 0===m?void 0:m.phoneNumber)||"Email only","\n\ufffd\ud83d\udcb0 Rental Price: \u20b9").concat(r.rentalPrice,"/day\n\n\ud83d\udccd PICKUP INSTRUCTIONS:\n").concat((null===a||void 0===a?void 0:a.pickupInstructions)||"Please contact the book owner for pickup details.","\n\nNext Steps:\n1. Contact the book owner to arrange pickup\n2. Bring a valid ID for verification\n3. Have the rental payment ready\n\nContact Details:\n\ud83d\udce7 Email: ").concat(Xe.email,"\n").concat(null!==m&&void 0!==m&&m.phoneNumber?"\ud83d\udcf1 Phone: ".concat(m.phoneNumber):"","\n\nThank you for using Community Library!\n\nBest regards,\nCommunity Library Team\n      ");await Ye(r.borrowerEmail,l,u),await He();const d=async()=>{if(ty)try{const e=_g(Vm(ty,"books"),Ag("createdAt","desc")),t=(await qg(e)).docs.map(e=>c({id:e.id},e.data()));v(t)}catch(e){console.error("Error loading books:",e)}};await d(),alert("Request approved successfully! Book is now on hold and ready for pickup.")}catch(n){console.error("Error approving request:",n),alert("Failed to approve request: "+n.message)}finally{i(!1)}})(e.id,e.bookId),disabled:n,style:{padding:"0.5rem 1rem",background:uy,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\u2705 Approve"}),(0,iy.jsx)("button",{onClick:()=>(async e=>{try{i(!0);const t=Bm(ty,"requests",e),n=(await Vg(t)).data();if(!n)return void alert("Request not found");await Wg(t,{status:"rejected",rejectionDate:(new Date).toISOString()}),await Qe({type:"request_rejected",recipientEmail:n.borrowerEmail,recipientId:n.borrowerId,senderId:Xe.uid,senderEmail:Xe.email,senderName:(null===m||void 0===m?void 0:m.name)||Xe.displayName||"Book Owner",bookId:n.bookId,bookTitle:n.bookTitle,bookAuthor:n.bookAuthor,requestId:e,message:'Your borrow request for "'.concat(n.bookTitle,'" has been declined.'),actionRequired:!1});const r="\u274c Borrow Request Declined: ".concat(n.bookTitle),o="\nHello ".concat(n.borrowerName,",\n\nWe regret to inform you that your borrow request has been declined:\n\n\ud83d\udcd6 Book: ").concat(n.bookTitle," by ").concat(n.bookAuthor,"\n\ud83d\udc64 Book Owner: ").concat(Xe.email,"\n\nThe book owner is unable to lend this book at this time. Please browse our library for other available books.\n\nThank you for using Community Library!\n\nBest regards,\nCommunity Library Team\n      ");await Ye(n.borrowerEmail,r,o),await He(),alert("Request rejected and borrower has been notified.")}catch(t){console.error("Error rejecting request:",t),alert("Failed to reject request: "+t.message)}finally{i(!1)}})(e.id),disabled:n,style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\u274c Reject"})]})]},e.id))]}),(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("h3",{style:{color:cy,marginBottom:"1rem"},children:["\ud83d\udce4 My Borrow Requests (",t.length,")"]}),0===t.length?(0,iy.jsx)("p",{style:{color:"#666",textAlign:"center",padding:"2rem"},children:"No borrow requests yet. Browse books to make your first request!"}):t.map(e=>(0,iy.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e0e0e0",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsxs)("h4",{style:{margin:"0 0 0.5rem 0",color:cy},children:[e.bookTitle||"Book Title Not Available"," by ",e.bookAuthor||"Author Not Available"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Owner:"})," ",(()=>{const t=Y.find(t=>t.email===e.bookOwnerEmail);return t?"".concat(t.name," (").concat(e.bookOwnerEmail,")"):e.bookOwnerEmail})()]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Rental Price:"})," \u20b9",e.rentalPrice,"/day"]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Requested on:"})," ",new Date(e.requestDate).toLocaleDateString()]}),(0,iy.jsxs)("p",{style:{margin:"0 0 0.3rem 0",color:"#666"},children:[(0,iy.jsx)("strong",{children:"Status:"}),(0,iy.jsx)("span",{style:{color:"approved"===e.status?uy:"rejected"===e.status?"#dc3545":dy,fontWeight:"bold",marginLeft:"0.3rem"},children:e.status.toUpperCase()})]}),"pending"===e.status&&(0,iy.jsx)("div",{style:{marginTop:"1rem"},children:(0,iy.jsx)("button",{onClick:()=>(async e=>{try{i(!0);const t=Bm(ty,"requests",e),n=(await Vg(t)).data();if(!n)return void alert("Request not found");if("pending"!==n.status)return void alert("Only pending requests can be cancelled.");await Wg(t,{status:"cancelled",cancellationDate:(new Date).toISOString()}),await Qe({type:"request_cancelled",recipientEmail:n.bookOwnerEmail,recipientId:n.bookOwnerId,senderId:Xe.uid,senderEmail:Xe.email,senderName:(null===m||void 0===m?void 0:m.name)||Xe.displayName||"Borrower",bookId:n.bookId,bookTitle:n.bookTitle,bookAuthor:n.bookAuthor,requestId:e,message:"".concat((null===m||void 0===m?void 0:m.name)||Xe.displayName||"A user",' has cancelled their borrow request for "').concat(n.bookTitle,'".'),actionRequired:!1});const r="\ud83d\udcdd Borrow Request Cancelled: ".concat(n.bookTitle),o="\nHello,\n\nA borrower has cancelled their borrow request:\n\n\ud83d\udcd6 Book: ".concat(n.bookTitle," by ").concat(n.bookAuthor,"\n\ud83d\udc64 Borrower: ").concat(n.borrowerName," (").concat(n.borrowerEmail,")\n\ud83d\udcc5 Original Request Date: ").concat(new Date(n.requestDate).toLocaleDateString(),"\n\nThe book is now available for other borrowers.\n\nBest regards,\nCommunity Library Team\n      ");await Ye(n.bookOwnerEmail,r,o),await He(),alert("Request cancelled successfully.")}catch(t){console.error("Error cancelling request:",t),alert("Failed to cancel request: "+t.message)}finally{i(!1)}})(e.id),disabled:n,style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\u274c Cancel Request"})}),"approved"===e.status&&(0,iy.jsxs)("div",{children:[(0,iy.jsx)("p",{style:{margin:"0 0 1rem 0",color:uy,fontWeight:"bold"},children:"\ud83d\udcda Book is ready for pickup! Contact the owner to arrange."}),(0,iy.jsx)("button",{onClick:()=>(async(e,t)=>{try{i(!0);const n=new Date,r=new Date;r.setDate(r.getDate()+14),await Wg(Bm(ty,"books",e),{status:"borrowed",borrowDate:n.toISOString(),dueDate:r.toISOString()});const o={bookId:e,requestId:t,borrowerId:Xe.uid,borrowDate:n.toISOString(),dueDate:r.toISOString(),status:"active",rentalAmount:0,fineAmount:0,type:"rental"},s=await Kg(Vm(ty,"transactions"),o);await Wg(Bm(ty,"requests",t),{status:"picked-up",pickupDate:n.toISOString(),transactionId:s.id}),alert("Book picked up successfully! Due date: ".concat(r.toLocaleDateString())),await He(),await Ke(),await Ge()}catch(n){console.error("Error processing book pickup:",n),alert("Failed to process pickup: "+n.message)}finally{i(!1)}})(e.bookId,e.id),disabled:n,style:{padding:"0.5rem 1rem",background:uy,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer",marginRight:"0.5rem"},children:"\ud83d\udcda Mark as Picked Up"})]}),"picked-up"===e.status&&(0,iy.jsxs)("div",{children:[(0,iy.jsx)("p",{style:{margin:"0 0 1rem 0",color:"#17a2b8",fontWeight:"bold"},children:"\ud83d\udcd6 Book borrowed! Remember to return it on time."}),(0,iy.jsx)("button",{onClick:()=>(async(e,t)=>{try{i(!0);const n=Bm(ty,"transactions",t),r=(await Vg(n)).data();if(!r)return void alert("Transaction not found");const o=new Date,s=new Date(r.borrowDate),a=new Date(r.dueDate),l=Math.ceil((o-s)/864e5),c=$e.find(t=>t.id===e),u=c?parseFloat(c.rentalPrice):0,d=l*u;let h=0;o>a&&(h=Math.ceil((o-a)/864e5)*u*.5),await Wg(Bm(ty,"books",e),{status:"available",returnDate:o.toISOString(),borrowDate:null,dueDate:null,reservedFor:null}),await Wg(n,{status:"completed",returnDate:o.toISOString(),rentalDays:l,rentalAmount:d,fineAmount:h,totalAmount:d+h});const f="Book returned successfully!\n\nRental Details:\n"+"Days borrowed: ".concat(l,"\n")+"Rental amount: \u20b9".concat(d.toFixed(2),"\n")+(h>0?"Fine (overdue): \u20b9".concat(h.toFixed(2),"\n"):"")+"Total amount: \u20b9".concat((d+h).toFixed(2));alert(f),await He(),await Ke(),await Ge()}catch(n){console.error("Error processing book return:",n),alert("Failed to process return: "+n.message)}finally{i(!1)}})(e.bookId,e.transactionId),disabled:n,style:{padding:"0.5rem 1rem",background:"#17a2b8",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\ud83d\udce4 Return Book"})]})]},e.id))]})]})},dt=()=>{const e=re.filter(e=>!e.read).length,t=e=>{switch(e){case"borrow_request":return"\ud83d\udcda";case"book_approved":return"\u2705";case"book_rejected":return"\u274c";case"book_returned":return"\ud83d\udce4";case"rental_update":return"\u23f0";case"rental_overdue":return"\u26a0\ufe0f";case"system":return"\ud83d\udd14";default:return"\ud83d\udce2"}},n=e=>"high"===e.priority||"rental_overdue"===e.type?"#ff4757":"medium"===e.priority||"rental_update"===e.type?"#ffa502":ay;return(0,iy.jsxs)("div",{style:{padding:"1rem",maxWidth:"800px",margin:"0 auto"},children:[(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,iy.jsxs)("div",{children:[(0,iy.jsx)("h2",{style:{color:cy,margin:0},children:"Notification Center"}),e>0&&(0,iy.jsxs)("p",{style:{color:"#666",margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:[e," unread notification",1!==e?"s":""]})]}),re.length>0&&e>0&&(0,iy.jsx)("button",{onClick:async()=>{try{const t=(Hm(e=Om(e=ty,Wm)),new Yg(e,t=>Gg(e,t)));re.filter(e=>!e.read&&!e.id.startsWith("rental-")).forEach(e=>{const n=Bm(ty,"notifications",e.id);t.update(n,{read:!0})}),re.filter(e=>!e.read&&!e.id.startsWith("rental-")).length>0&&await t.commit(),ie(e=>e.map(e=>c(c({},e),{},{read:!0}))),await ue()}catch(t){console.error("Error marking all notifications as read:",t)}var e},style:{padding:"0.5rem 1rem",border:"none",borderRadius:"6px",background:ay,color:"white",cursor:"pointer",fontSize:"0.9rem"},children:"Mark All Read"})]}),0===re.length?(0,iy.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#999",background:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\ud83d\udd14"}),(0,iy.jsx)("h3",{style:{margin:"0 0 0.5rem 0"},children:"No notifications yet"}),(0,iy.jsx)("p",{style:{margin:0},children:"You'll see updates about your borrow requests and rentals here."})]}):(0,iy.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:re.map(e=>(0,iy.jsxs)("div",{style:{background:e.read?"white":"#f8f9ff",border:"1px solid ".concat(e.read?"#e0e0e0":n(e)),borderRadius:"8px",padding:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",position:"relative"},children:[(0,iy.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[(0,iy.jsx)("div",{style:{fontSize:"1.5rem",flexShrink:0,marginTop:"0.25rem"},children:t(e.type)}),(0,iy.jsxs)("div",{style:{flex:1},children:[(0,iy.jsx)("div",{style:{fontSize:"0.95rem",color:cy,lineHeight:"1.4",marginBottom:"0.5rem"},children:e.message}),e.bookTitle&&(0,iy.jsxs)("div",{style:{fontSize:"0.85rem",color:"#666",fontStyle:"italic",marginBottom:"0.5rem"},children:["Book: ",e.bookTitle]}),(0,iy.jsxs)("div",{style:{fontSize:"0.8rem",color:"#999",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,iy.jsxs)("span",{children:[new Date(e.createdAt).toLocaleDateString()," at"," ",new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[!e.read&&(0,iy.jsx)("button",{onClick:()=>(async e=>{if(e.startsWith("rental-"))ie(t=>t.map(t=>t.id===e?c(c({},t),{},{read:!0}):t));else try{const t=Bm(ty,"notifications",e);await Wg(t,{read:!0}),await ue()}catch(t){console.error("Error marking notification as read:",t)}})(e.id),style:{padding:"0.25rem 0.5rem",border:"none",borderRadius:"4px",background:ay,color:"white",cursor:"pointer",fontSize:"0.75rem"},children:"Mark Read"}),(0,iy.jsx)("button",{onClick:()=>(async e=>{if(e.startsWith("rental-"))ie(t=>t.filter(t=>t.id!==e));else try{await Hg(Bm(ty,"notifications",e)),await ue()}catch(t){console.error("Error deleting notification:",t)}})(e.id),style:{padding:"0.25rem 0.5rem",border:"none",borderRadius:"4px",background:"#ff4757",color:"white",cursor:"pointer",fontSize:"0.75rem"},children:"Delete"})]})]})]})]}),!e.read&&(0,iy.jsx)("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",width:"8px",height:"8px",borderRadius:"50%",background:n(e)}})]},e.id))})]})},ht=()=>{var e;if(!Xe)return(0,iy.jsx)("div",{style:{background:ly,padding:"2rem",borderRadius:"10px",textAlign:"center"},children:(0,iy.jsx)("p",{style:{margin:0,color:"#666"},children:"Please log in to view your account."})});return(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,iy.jsx)("h2",{style:{color:cy,margin:0},children:"My Account"}),!T&&(0,iy.jsx)("button",{onClick:()=>{N((null===m||void 0===m?void 0:m.name)||""),P((null===m||void 0===m?void 0:m.phoneNumber)||""),O((null===m||void 0===m?void 0:m.smsOptIn)||!1),M(Ve((null===m||void 0===m?void 0:m.phoneNumber)||"")),C(!0)},style:{padding:"0.5rem 1rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"\u270f\ufe0f Edit Profile"})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"8px",border:"1px solid #e0e0e0",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsx)("h3",{style:{color:cy,marginBottom:"1rem"},children:"Profile Information"}),(0,iy.jsxs)("div",{style:{display:"grid",gap:"1rem"},children:[(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Full Name"}),T?(0,iy.jsx)("input",{type:"text",value:A,onChange:e=>N(e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"},placeholder:"Enter your full name"}):(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:ly,borderRadius:"5px"},children:(null===m||void 0===m?void 0:m.name)||"Not provided"})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Email Address"}),(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:ly,borderRadius:"5px"},children:Xe.email})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Account Status"}),(0,iy.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,iy.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:Xe.emailVerified?(0,iy.jsx)("span",{style:{color:"#4caf50",fontSize:"0.9rem"},children:"\u2705 Email Verified"}):(0,iy.jsxs)(iy.Fragment,{children:[(0,iy.jsx)("span",{style:{color:"#ff9800",fontSize:"0.9rem"},children:"\u26a0\ufe0f Email Not Verified"}),(0,iy.jsx)("button",{onClick:async()=>{try{await Jn(Xe),alert("Verification email sent! Please check your inbox.")}catch(e){alert("Failed to send verification email: "+e.message)}},style:{padding:"0.25rem 0.5rem",background:"#2196f3",color:"white",border:"none",borderRadius:"3px",fontSize:"0.7rem",cursor:"pointer"},children:"Resend Verification"})]})}),(0,iy.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:"sujay_jain@hotmail.com"===Xe.email?(0,iy.jsx)("span",{style:{color:"#4caf50",fontSize:"0.9rem"},children:"\ud83d\udc51 Super Admin"}):"approved"===(null===m||void 0===m?void 0:m.status)?(0,iy.jsx)("span",{style:{color:"#4caf50",fontSize:"0.9rem"},children:"\u2705 Account Approved"}):"pending"===(null===m||void 0===m?void 0:m.status)?(0,iy.jsx)("span",{style:{color:"#ff9800",fontSize:"0.9rem"},children:"\ud83d\udccb Pending Admin Approval"}):(0,iy.jsx)("span",{style:{color:"#f44336",fontSize:"0.9rem"},children:"\u274c Account Status Unknown"})}),(!Xe.emailVerified||"approved"!==(null===m||void 0===m?void 0:m.status)&&"sujay_jain@hotmail.com"!==Xe.email)&&(0,iy.jsx)("div",{style:{background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"5px",padding:"0.5rem",fontSize:"0.8rem",color:"#856404"},children:"\u26a0\ufe0f You need email verification and admin approval to borrow or publish books."})]})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Phone Number"}),T?(0,iy.jsxs)("div",{children:[(0,iy.jsx)("input",{type:"tel",value:R,onChange:e=>{const t=e.target.value;P(t),M(Ve(t))},style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"},placeholder:"Enter your phone number"}),L.message&&(0,iy.jsx)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:L.isValid?"#28a745":"#dc3545"},children:L.message})]}):(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:ly,borderRadius:"5px"},children:(null===m||void 0===m?void 0:m.phoneNumber)||"Not provided"})]}),T&&(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"SMS Notifications"}),(0,iy.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0.5rem",border:"1px solid #e0e0e0",borderRadius:"5px",background:"#f8f9fa"},children:[(0,iy.jsx)("input",{type:"checkbox",id:"editSmsOptIn",checked:D,onChange:e=>O(e.target.checked),style:{marginRight:"0.5rem"}}),(0,iy.jsx)("label",{htmlFor:"editSmsOptIn",style:{fontSize:"0.9rem",color:"#666"},children:"\ud83d\udcf1 Send me SMS notifications for book requests and reminders"})]})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Community"}),(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:ly,borderRadius:"5px"},children:(null===m||void 0===m?void 0:m.communityName)||"Not provided"})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Apartment Number"}),(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:ly,borderRadius:"5px"},children:(null===m||void 0===m?void 0:m.apartmentNumber)||"Not provided"})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Role(s)"}),(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:ly,borderRadius:"5px"},children:(null===m||void 0===m||null===(e=m.persona)||void 0===e?void 0:e.join(", "))||"Not specified"})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Account Status"}),(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:"approved"===(null===m||void 0===m?void 0:m.status)?"#d4edda":"#fff3cd",color:"approved"===(null===m||void 0===m?void 0:m.status)?"#155724":"#856404",borderRadius:"5px",fontWeight:"bold"},children:"approved"===(null===m||void 0===m?void 0:m.status)?"\u2705 Approved":"\u23f3 Pending Admin Approval"})]}),(0,iy.jsxs)("div",{children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Email Verification"}),(0,iy.jsx)("p",{style:{margin:0,padding:"0.5rem",background:Xe.emailVerified?"#d4edda":"#f8d7da",color:Xe.emailVerified?"#155724":"#721c24",borderRadius:"5px",fontWeight:"bold"},children:Xe.emailVerified?"\u2705 Verified":"\u274c Not Verified"})]})]}),!T&&(0,iy.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,iy.jsx)("h3",{style:{color:cy,marginBottom:"1rem"},children:"Financial Summary"}),(0,iy.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,iy.jsxs)("div",{style:{background:"#e8f4fd",padding:"1rem",borderRadius:"8px",border:"1px solid #bee5eb"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#0c5460"},children:"\ud83d\udcda As Borrower"}),(0,iy.jsxs)("p",{style:{margin:0,fontSize:"1.2rem",fontWeight:"bold",color:"#0c5460"},children:["$",ce((null===Xe||void 0===Xe?void 0:Xe.id)||(null===Xe||void 0===Xe?void 0:Xe.email),"borrower").toFixed(2)]}),(0,iy.jsx)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:"#6c757d"},children:"Outstanding rent and fines"})]}),(0,iy.jsxs)("div",{style:{background:"#f8f9fa",padding:"1rem",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#495057"},children:"\ud83d\udcd6 As Publisher"}),(0,iy.jsxs)("p",{style:{margin:0,fontSize:"1.2rem",fontWeight:"bold",color:"#495057"},children:["$",ce((null===Xe||void 0===Xe?void 0:Xe.id)||(null===Xe||void 0===Xe?void 0:Xe.email),"publisher").toFixed(2)]}),(0,iy.jsx)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.8rem",color:"#6c757d"},children:"Rent owed to you"})]})]})]}),T&&(0,iy.jsxs)("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,iy.jsx)("button",{onClick:()=>{L.isValid||!R?(async e=>{try{i(!0);const t=Bm(ty,"users",Xe.uid);await Wg(t,c(c({},e),{},{updatedAt:(new Date).toISOString()})),await We(Xe.uid),C(!1),alert("Profile updated successfully!")}catch(t){console.error("Error updating profile:",t),alert("Failed to update profile: "+t.message)}finally{i(!1)}})({name:A,phoneNumber:R,smsOptIn:D}):alert("Please enter a valid phone number before saving.")},disabled:n||!L.isValid&&R,style:{padding:"0.75rem 1.5rem",background:!L.isValid&&R?"#ccc":uy,color:"white",border:"none",borderRadius:"5px",cursor:!L.isValid&&R?"not-allowed":"pointer",fontWeight:"bold"},children:n?"Saving...":"\ud83d\udcbe Save Changes"}),(0,iy.jsx)("button",{onClick:()=>{C(!1),N(""),P(""),O(!1),M({isValid:!0,message:""})},disabled:n,style:{padding:"0.75rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:"\u274c Cancel"})]}),!T&&(0,iy.jsx)("div",{style:{marginTop:"2rem",textAlign:"center"},children:(0,iy.jsx)("p",{style:{color:"#666",fontSize:"0.9rem"},children:"To update community, apartment number, or roles, please contact an administrator."})})]})]})};return(0,iy.jsxs)("div",{style:{minHeight:"100vh",background:"#f8f9fa",fontFamily:"system-ui, -apple-system, sans-serif"},children:[(0,iy.jsx)("header",{style:{background:"linear-gradient(135deg, ".concat(ay," 0%, ").concat("#357ABD"," 100%)"),color:"white",padding:"1rem",borderRadius:"0 0 15px 15px",marginBottom:"1rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",maxWidth:"1200px",margin:"0 auto"},children:[(0,iy.jsx)("h1",{style:{margin:0,fontSize:"1.8rem",fontWeight:"bold"},children:"\ud83d\udcda Community Library"}),Xe?(0,iy.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",fontSize:"0.9rem"},children:[(0,iy.jsxs)("div",{style:{textAlign:"right"},children:[(0,iy.jsxs)("span",{style:{opacity:.9},children:["Welcome, ",Xe.name||Xe.email||"User","!"]}),(0,iy.jsxs)("div",{style:{fontSize:"0.7rem",opacity:.8,marginTop:"0.2rem"},children:[!Xe.emailVerified&&(0,iy.jsx)("span",{style:{color:"#ffeb3b",marginRight:"0.5rem"},children:"\u26a0\ufe0f Email not verified"}),"pending"===(null===m||void 0===m?void 0:m.status)&&"sujay_jain@hotmail.com"!==Xe.email&&(0,iy.jsx)("span",{style:{color:"#ff9800"},children:"\ud83d\udccb Pending approval"}),"approved"===(null===m||void 0===m?void 0:m.status)&&(0,iy.jsx)("span",{style:{color:"#4caf50"},children:"\u2705 Approved"})]})]}),(0,iy.jsx)("button",{onClick:tt,style:{padding:"0.4rem 0.8rem",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"15px",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s ease"},onMouseOver:e=>{e.target.style.background="rgba(255,255,255,0.3)"},onMouseOut:e=>{e.target.style.background="rgba(255,255,255,0.2)"},children:"Logout"})]}):(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem",fontSize:"0.8rem"},children:[(0,iy.jsx)("button",{onClick:()=>l(!0),style:{padding:"0.4rem 0.8rem",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"15px",cursor:"pointer",fontSize:"0.8rem"},children:"Login"}),(0,iy.jsx)("button",{onClick:()=>d(!0),style:{padding:"0.4rem 0.8rem",background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"15px",cursor:"pointer",fontSize:"0.8rem"},children:"Register"})]})]})}),(0,iy.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[(0,iy.jsx)(oy,{}),(0,iy.jsx)(sy,{}),(()=>{const n=["home","browse","my-books","requests","notifications","account"];return Xe&&("sujay_jain@hotmail.com"===Xe.email||"admin"===(null===m||void 0===m?void 0:m.role)||"super_admin"===(null===m||void 0===m?void 0:m.role))&&n.push("admin"),(0,iy.jsx)("nav",{style:{background:ly,padding:"0.8rem",borderRadius:"10px",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:(0,iy.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:"0.5rem"},children:n.map(n=>(0,iy.jsx)("button",{onClick:()=>t(n),style:{padding:"0.6rem 1.2rem",border:"none",borderRadius:"20px",background:e===n?ay:"white",color:e===n?"white":cy,cursor:"pointer",fontWeight:e===n?"bold":"normal",transition:"all 0.2s ease",fontSize:"0.9rem"},children:n.charAt(0).toUpperCase()+n.slice(1).replace("-"," ")},n))})})})(),(()=>{switch(e){case"browse":return(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"0.5rem"},children:[(0,iy.jsx)("h2",{style:{margin:0,color:cy},children:"Browse Books"}),(0,iy.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,iy.jsxs)("div",{style:{display:"flex",background:"#f8f9fa",borderRadius:"20px",padding:"0.25rem",border:"1px solid #e0e0e0"},children:[(0,iy.jsx)("button",{onClick:()=>se("list"),style:{padding:"0.4rem 0.8rem",border:"none",borderRadius:"15px",background:"list"===oe?ay:"transparent",color:"list"===oe?"white":"#666",cursor:"pointer",fontSize:"0.8rem",fontWeight:"list"===oe?"bold":"normal",transition:"all 0.2s ease"},children:"\ud83d\udccb List"}),(0,iy.jsx)("button",{onClick:()=>se("tile"),style:{padding:"0.4rem 0.8rem",border:"none",borderRadius:"15px",background:"tile"===oe?ay:"transparent",color:"tile"===oe?"white":"#666",cursor:"pointer",fontSize:"0.8rem",fontWeight:"tile"===oe?"bold":"normal",transition:"all 0.2s ease"},children:"\ud83c\udfb4 Tiles"})]}),(0,iy.jsx)("input",{type:"text",placeholder:"Search books...",value:k,onChange:e=>S(e.target.value),style:{padding:"0.5rem 1rem",border:"1px solid #ddd",borderRadius:"20px",width:"250px",fontSize:"0.9rem"}})]})]}),0===Je.length?(0,iy.jsx)("div",{style:{background:ly,padding:"2rem",borderRadius:"10px",textAlign:"center"},children:(0,iy.jsx)("p",{style:{margin:0,color:"#666"},children:k?"No books found matching your search.":"No books available yet. Be the first to add one!"})}):(0,iy.jsx)("div",{style:{display:"tile"===oe?"grid":"block",gridTemplateColumns:"tile"===oe?"repeat(auto-fill, minmax(280px, 1fr))":"none",gap:"tile"===oe?"1.5rem":"0"},children:Je.map("tile"===oe?st:ot)})]});case"my-books":return(()=>{var e;if(!Xe)return(0,iy.jsx)("div",{style:{background:ly,padding:"2rem",borderRadius:"10px",textAlign:"center"},children:(0,iy.jsx)("p",{style:{margin:0,color:"#666"},children:"Please log in to view your books."})});const t=Xe&&("sujay_jain@hotmail.com"===Xe.email||"super_admin"===(null===m||void 0===m?void 0:m.role)),n=m&&(null===(e=m.persona)||void 0===e?void 0:e.includes("publisher"))||t||"demo-user"===Xe.id,r=$e.filter(e=>e.ownerId===Xe.id||e.ownerEmail===Xe.email);return(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,iy.jsx)("h2",{style:{margin:0,color:cy},children:"My Books"}),!E&&n&&(0,iy.jsx)("button",{onClick:()=>x(!0),style:{padding:"0.6rem 1.2rem",background:uy,color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"+ Add Book"}),!n&&(0,iy.jsx)("div",{style:{padding:"0.6rem 1.2rem",background:"#f0f0f0",color:"#666",borderRadius:"5px",fontSize:"0.9rem"},children:"\ud83d\udcda Publisher role required to add books"})]}),E&&n&&it(),0===r.length?(0,iy.jsx)("div",{style:{background:ly,padding:"2rem",borderRadius:"10px",textAlign:"center"},children:(0,iy.jsx)("p",{style:{margin:0,color:"#666"},children:n?'You haven\'t added any books yet. Click "Add Book" to get started!':"You need Publisher role to add books. Contact admin to update your role."})}):r.map(ot)]})})();case"requests":return ut();case"notifications":return dt();case"account":return ht();case"admin":return(()=>{const e=Xe&&("sujay_jain@hotmail.com"===Xe.email||"super_admin"===(null===m||void 0===m?void 0:m.role));console.log("renderAdmin called:",{adminView:G,isSuperAdmin:e,currentUser:!!Xe,currentUserEmail:null===Xe||void 0===Xe?void 0:Xe.email,userProfileRole:null===m||void 0===m?void 0:m.role,allUsersLength:Y.length,transactionsLength:$.length}),"dashboard"===G&&(0===Y.length&&(console.log("Dashboard accessed but no users loaded, triggering fetch..."),de()),0===$.length&&(console.log("Dashboard accessed but no transactions loaded, triggering fetch..."),he()));const t=Xe&&"admin"===(null===m||void 0===m?void 0:m.role)&&!e,n=(null===Xe||void 0===Xe?void 0:Xe.communityName)||(null===m||void 0===m?void 0:m.communityName),r=e?$e:$e.filter(e=>e.communityName===n);return(0,iy.jsxs)("div",{children:[(0,iy.jsx)("h2",{style:{margin:"0 0 1rem 0",color:cy},children:e?"Super Admin Dashboard":t?"Admin Dashboard - ".concat(n):"Admin Dashboard"}),t&&(0,iy.jsx)("div",{style:{background:"#e8f4fd",padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #bee5eb"},children:(0,iy.jsxs)("p",{style:{margin:0,color:ay,fontSize:"0.9rem"},children:["\u2139\ufe0f ",(0,iy.jsx)("strong",{children:"Community Admin:"})," You can manage books and users within your community (",n,")."]})}),(0,iy.jsx)("div",{style:{background:ly,padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:(0,iy.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,iy.jsx)("button",{onClick:()=>Q("dashboard"),style:{padding:"0.6rem 1.2rem",background:"dashboard"===G?ay:"white",color:"dashboard"===G?"white":cy,border:"1px solid #ddd",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udcca Dashboard"}),(0,iy.jsx)("button",{onClick:()=>{Q("users"),de()},style:{padding:"0.6rem 1.2rem",background:"users"===G?ay:"white",color:"users"===G?"white":cy,border:"1px solid #ddd",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udc65 Users"}),(0,iy.jsx)("button",{onClick:()=>Q("books"),style:{padding:"0.6rem 1.2rem",background:"books"===G?ay:"white",color:"books"===G?"white":cy,border:"1px solid #ddd",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udcda Books"}),e&&(0,iy.jsx)("button",{onClick:()=>{Q("transactions"),he(),de()},style:{padding:"0.6rem 1.2rem",background:"transactions"===G?ay:"white",color:"transactions"===G?"white":cy,border:"1px solid #ddd",borderRadius:"5px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udcbc Transactions"})]})}),"dashboard"===G&&(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("div",{style:{background:ly,padding:"1.5rem",borderRadius:"10px",marginBottom:"1rem"},children:[(0,iy.jsxs)("h3",{style:{margin:"0 0 1rem 0",color:cy},children:["Library Statistics ",!e&&"(".concat(n,")")]}),(0,iy.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:ay},children:"Total Books"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:r.length})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:uy},children:"Available"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:r.filter(e=>"available"===e.status).length})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:dy},children:"On Hold"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:r.filter(e=>"on-hold"===e.status).length})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#dc3545"},children:"Borrowed"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:r.filter(e=>"borrowed"===e.status).length})]}),e&&(0,iy.jsxs)(iy.Fragment,{children:[(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:ay},children:"Communities"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:new Set($e.map(e=>e.communityName)).size})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#6f42c1"},children:"Total Users"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:Y.length})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#e83e8c"},children:"Transactions"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold",color:cy},children:$.length})]})]})]})]}),(0,iy.jsxs)("div",{style:{background:ly,padding:"1.5rem",borderRadius:"10px"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 1rem 0",color:cy},children:"Quick Actions"}),(0,iy.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},children:[(0,iy.jsxs)("button",{onClick:()=>{Q("users"),de()},style:{padding:"1rem",background:"white",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:ay},children:"\ud83d\udc65 Manage Users"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#666"},children:"View and manage user roles and permissions"})]}),(0,iy.jsxs)("button",{onClick:()=>Q("books"),style:{padding:"1rem",background:"white",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:uy},children:"\ud83d\udcda Manage Books"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#666"},children:"Oversee book inventory and availability"})]}),e&&(0,iy.jsxs)("button",{onClick:()=>{console.log("Transaction button clicked, setting adminView to transactions"),Q("transactions"),console.log("Calling fetchTransactions and fetchAllUsers"),he(),de()},style:{padding:"1rem",background:"white",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",textAlign:"left"},children:[(0,iy.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:dy},children:"\ud83d\udcbc View Transactions"}),(0,iy.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"#666"},children:"Monitor all borrowing and lending activities"})]})]})]})]}),"users"===G&&lt(),"books"===G&&(0,iy.jsxs)("div",{children:[(0,iy.jsxs)("h3",{style:{margin:"0 0 1rem 0",color:cy},children:["Book Management ",!e&&"(".concat(n,")")]}),(0,iy.jsx)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",border:"1px solid #ddd"},children:(0,iy.jsxs)("p",{style:{margin:0,color:"#666",textAlign:"center"},children:["\ud83d\udcda Book management interface will be displayed here.",(0,iy.jsx)("br",{}),"You can view all books from the Browse section."]})})]}),"transactions"===G&&e&&ct(),te&&at()]})})();default:return(0,iy.jsx)("div",{children:(0,iy.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(ay,"20 0%, ").concat(ly," 100%)"),padding:"2rem",borderRadius:"10px",marginBottom:"1.5rem",textAlign:"center"},children:[(0,iy.jsx)("h2",{style:{margin:"0 0 1rem 0",color:cy,fontSize:"2rem"},children:"Welcome to Community Library"}),(0,iy.jsx)("p",{style:{margin:"0 0 1.5rem 0",color:"#666",fontSize:"1.1rem",lineHeight:1.6},children:"Share books with your community. Lend what you have, borrow what you need."}),(0,iy.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginTop:"1.5rem"},children:[(0,iy.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:ay},children:"\ud83d\udcd6 Browse Books"}),(0,iy.jsx)("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:"Discover books available in your community library"})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:uy},children:"\ud83d\udcda Share Books"}),(0,iy.jsx)("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:"Add your own books to share with the community"})]}),(0,iy.jsxs)("div",{style:{background:"white",padding:"1.5rem",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 0.5rem 0",color:dy},children:"\ud83e\udd1d Connect"}),(0,iy.jsx)("p",{style:{margin:0,color:"#666",fontSize:"0.9rem"},children:"Build connections through shared reading experiences"})]})]})]})})}})()]}),a&&(()=>{const e=e=>{"Enter"===e.key&&(e.preventDefault(),Ze(ye,be))};return(0,iy.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,iy.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"300px",maxWidth:"90vw"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:"Login"}),(0,iy.jsx)("input",{type:"email",placeholder:"Email",value:ye,onChange:e=>ve(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsx)("input",{type:"password",placeholder:"Password",value:be,onChange:e=>we(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"1rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,iy.jsx)("button",{onClick:()=>Ze(ye,be),disabled:n,style:{flex:1,padding:"0.6rem",background:ay,color:"white",border:"none",borderRadius:"5px",cursor:n?"not-allowed":"pointer"},children:n?"Logging in...":"Login"}),(0,iy.jsx)("button",{onClick:()=>{l(!1),ve(""),we("")},style:{flex:1,padding:"0.6rem",background:"#ccc",color:cy,border:"none",borderRadius:"5px",cursor:"pointer"},children:"Cancel"})]})]})})})(),u&&(()=>{const e=e=>{"Enter"===e.key&&(e.preventDefault(),Ue.length>0&&_e&&Ae&&Re&&De&&Me.isValid&&ke&&Ee&&et(ke,Ee,{name:_e,parentName:Te,apartmentNumber:Ae,communityName:Re,phoneNumber:De,smsOptIn:Le,persona:Ue}))};return(0,iy.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,iy.jsxs)("div",{style:{background:"white",padding:"2rem",borderRadius:"10px",width:"400px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},children:[(0,iy.jsx)("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:"Register for Community Library"}),(0,iy.jsx)("input",{type:"text",placeholder:"Full Name * (e.g., John Doe)",value:_e,onChange:e=>Ie(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsx)("input",{type:"text",placeholder:"Parent's Name (optional, e.g., Jane Doe)",value:Te,onChange:e=>Ce(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsx)("input",{type:"text",placeholder:"Apartment Number * (e.g., A-101, B-205)",value:Ae,onChange:e=>Ne(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsxs)("select",{value:Re,onChange:e=>Pe(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box",fontSize:"1rem"},children:[(0,iy.jsx)("option",{value:"",children:"Select Community *"}),["Aparna Sarovar Zenith","Aparna Cyberlife","Aparna Sarovar","Aparna Cyberzon","Aparna Cybercommune"].map(e=>(0,iy.jsx)("option",{value:e,children:e},e))]}),(0,iy.jsx)("input",{type:"tel",placeholder:"Phone Number * (e.g., +91 98765 43210)",value:De,onChange:e=>{const t=e.target.value;Oe(t),Fe(Ve(t))},onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),Me.message&&(0,iy.jsx)("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.8rem",color:Me.isValid?"#28a745":"#dc3545"},children:Me.message}),(0,iy.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem",padding:"0.5rem",border:"1px solid #e0e0e0",borderRadius:"5px",background:"#f8f9fa"},children:[(0,iy.jsx)("input",{type:"checkbox",id:"smsOptIn",checked:Le,onChange:e=>je(e.target.checked),style:{marginRight:"0.5rem"}}),(0,iy.jsx)("label",{htmlFor:"smsOptIn",style:{fontSize:"0.9rem",color:"#666"},children:"\ud83d\udcf1 Send me SMS notifications for book requests and reminders (optional)"})]}),(0,iy.jsx)("input",{type:"email",placeholder:"Email Address * (e.g., john.doe@example.com)",value:ke,onChange:e=>Se(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"0.5rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsx)("input",{type:"password",placeholder:"Password * (minimum 6 characters)",value:Ee,onChange:e=>xe(e.target.value),onKeyDown:e,style:{width:"100%",padding:"0.5rem",marginBottom:"1rem",border:"1px solid #ddd",borderRadius:"5px",boxSizing:"border-box"}}),(0,iy.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,iy.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:cy},children:"Select your role(s) *:"}),(0,iy.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.3rem"},children:[{key:"publisher",label:"\ud83d\udcda Publisher (I want to lend books)"},{key:"borrower",label:"\ud83d\udcd6 Borrower (I want to borrow books)"}].map(e=>{let{key:t,label:n}=e;return(0,iy.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,iy.jsx)("input",{type:"checkbox",checked:Ue.includes(t),onChange:()=>{return e=t,void(Ue.includes(e)?ze(Ue.filter(t=>t!==e)):ze([...Ue,e]));var e},style:{marginRight:"0.5rem"}}),(0,iy.jsx)("span",{style:{fontSize:"0.9rem"},children:n})]},t)})})]}),(0,iy.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,iy.jsx)("button",{onClick:()=>et(ke,Ee,{name:_e,parentName:Te,apartmentNumber:Ae,communityName:Re,phoneNumber:De,smsOptIn:Le,persona:Ue}),disabled:n||0===Ue.length||!_e||!Ae||!Re||!De||!Me.isValid||!ke,style:{flex:1,padding:"0.6rem",background:0!==Ue.length&&_e&&Ae&&Re&&De&&Me.isValid&&ke?uy:"#ccc",color:"white",border:"none",borderRadius:"5px",cursor:!n&&0!==Ue.length&&_e&&Ae&&Re&&De&&Me.isValid&&ke?"pointer":"not-allowed"},children:n?"Registering...":"Register"}),(0,iy.jsx)("button",{onClick:()=>{d(!1),Se(""),xe(""),Ie(""),Ce(""),Ne(""),Pe(""),Oe(""),je(!1),Fe({isValid:!1,message:""}),ze([])},style:{flex:1,padding:"0.6rem",background:"#ccc",color:cy,border:"none",borderRadius:"5px",cursor:"pointer"},children:"Cancel"})]})]})})})()]})};i.createRoot(document.getElementById("root")).render((0,iy.jsx)(r.StrictMode,{children:(0,iy.jsx)(hy,{})}))})();
//# sourceMappingURL=main.5235389a.js.map